(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=function(){function n(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e(this,"_x",0),e(this,"_y",0),this._x=t,this._y=i}var i,r,o;return i=n,o=[{key:"random",value:function(){return new n(Math.random(),Math.random()).normalize()}},{key:"distance",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}}],(r=[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"sqrMagnitude",value:function(){return Math.pow(this.x,2)+Math.pow(this.y,2)}},{key:"magnitude",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"normalize",value:function(){var t=this.magnitude();return new n(this.x/t,this.y/t)}},{key:"scale",value:function(t){return new n(this.x*t,this.y*t)}},{key:"add",value:function(t){return new n(this.x+t.x,this.y+t.y)}},{key:"rotate",value:function(t){var e=t*Math.PI/180;return new n(this.x*Math.cos(e)-Math.sin(e)*this.y,this.x*Math.sin(e)+this.y*Math.cos(e))}},{key:"toString",value:function(){return"Vector2(x: ".concat(this.x,", y: ").concat(this.y,")")}}])&&t(i.prototype,r),o&&t(i,o),n}();e(n,"ZERO",new n(0,0));const i=n;function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;e.ready&&(t.save(),t.translate(n.x,n.y),t.rotate(r*Math.PI/180),t.translate(-n.x,-n.y),t.drawImage(e.texture,n.x-i.x/2,n.y-i.y/2,i.x,i.y),t.restore())}var s=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"size",void 0),o(this,"el",void 0),o(this,"ready",!1),this.el=new Image,this.el.src=e,this.el.addEventListener("load",(function(){i.ready=!0}))}var e,n;return e=t,(n=[{key:"texture",get:function(){return this.el}}])&&r(e.prototype,n),t}();function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"scaleX",void 0),l(this,"scaleY",void 0),this.scaleX=e,this.scaleY=n,this.translate=this.translate.bind(this),this.translateValueX=this.translateValueX.bind(this),this.translateValueY=this.translateValueY.bind(this)}var e,n;return e=t,(n=[{key:"translate",value:function(t){return new i(t.x*this.scaleX,t.y*this.scaleY)}},{key:"translateValueX",value:function(t){return t*this.scaleX}},{key:"translateValueY",value:function(t){return t*this.scaleY}}])&&u(e.prototype,n),t}();function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(){function t(){c(this,t),y(this,"particles",void 0),this.particles=[]}return d(t,[{key:"update",value:function(t,e){this.particles=this.particles.filter((function(n){return n.update(t,e),n.remainingTime>0}))}},{key:"add",value:function(t){this.particles.push(t)}}]),t}(),p=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;c(this,t),y(this,"position",void 0),y(this,"_rate",.1),y(this,"_elapsed",0),y(this,"_count",10),y(this,"_container",void 0),y(this,"_particleGenerator",void 0),y(this,"_predicate",void 0),this._container=new v,this._particleGenerator=e,this._predicate=n,this._count=r,this._rate=i}return d(t,[{key:"draw",value:function(t,e,n){this._container.particles.forEach((function(i){i.draw(t,e,n)}))}},{key:"update",value:function(t,e){if(this._predicate(e)&&(this._elapsed+=t,this._elapsed>this._rate)){this._elapsed-=this._rate;for(var n=0;n<this._count;n++)this._container.add(new g(this.position,this._particleGenerator.velocity(e),this._particleGenerator.lifetime(e),this._particleGenerator.rotation(e),this._particleGenerator.texture(e),this._particleGenerator.size(e)))}this._container.update(t,e)}}]),t}(),g=function(){function t(e,n,i,r,o,a){c(this,t),y(this,"_center",void 0),y(this,"_direction",void 0),y(this,"_velocity",void 0),y(this,"_lifetime",void 0),y(this,"_rotation",void 0),y(this,"_elapsedLifetime",void 0),y(this,"_texture",void 0),y(this,"_size",void 0),this._center=e,this._velocity=n,this._lifetime=i,this._rotation=r,this._texture=o,this._size=a,this._elapsedLifetime=0}return d(t,[{key:"draw",value:function(t,e,n){t.globalAlpha=1-this._elapsedLifetime/this._lifetime,a(t,this._texture,n.translate(this._center),n.translate(this._size),this._rotation),t.globalAlpha=1}},{key:"velocity",get:function(){return this._velocity}},{key:"direction",get:function(){return this._direction}},{key:"center",get:function(){return this._center}},{key:"remainingTime",get:function(){return this._lifetime-this._elapsedLifetime}},{key:"update",value:function(t,e){this._elapsedLifetime+=t,this._center=this._center.add(this._velocity.scale(t))}}]),t}();function w(t,e,n){var r=new i(n.x-e.x,n.y-e.y),o=new i(e.x-t.center.x,e.y-t.center.y),a=-2*(r.x*o.x+r.y*o.y),s=2*(r.x*r.x+r.y*r.y),u=Math.sqrt(a*a-2*s*(o.x*o.x+o.y*o.y-t.radius*t.radius));if(isNaN(u))return!1;var l=(a-u)/s,h=(a+u)/s;return l<=1&&l>=0||h<=1&&h>=0}function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var _=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"gaussian",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e=0,n=0;n<t;n++)e+=Math.random();return e/t-.5}}])&&m(e.prototype,n),t}());function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var k=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,"_center",void 0),x(this,"_radius",void 0),this._center=e,this._radius=n}var e,n;return e=t,(n=[{key:"center",get:function(){return this._center}},{key:"radius",get:function(){return this._radius}}])&&b(e.prototype,n),t}();function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),t}function z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;T(this,t),z(this,"_rotationOffset",void 0),z(this,"tex",new s("assets/Smoke.png",new i(32,32))),z(this,"_size",new i(.425,.425)),this._rotationOffset=e}return C(t,[{key:"texture",value:function(t){return this.tex}},{key:"size",value:function(t){return this._size}},{key:"velocity",value:function(t){var e=t.lander.rotationVector,n=100*_.gaussian(12);return(e=e.rotate(n+this._rotationOffset)).scale(-5*_.gaussian(12))}},{key:"lifetime",value:function(t){return 5+_.gaussian(12)}},{key:"rotation",value:function(t){return 0}}]),t}(),P=function(){function t(){T(this,t),z(this,"tex",new s("assets/Fire.png",new i(32,32))),z(this,"_size",new i(.425,.425))}return C(t,[{key:"texture",value:function(t){return this.tex}},{key:"size",value:function(t){return this._size}},{key:"velocity",value:function(t){var e=t.lander.rotationVector,n=360*Math.random();return(e=e.rotate(n)).scale(-20*_.gaussian(12))}},{key:"lifetime",value:function(t){return 2+_.gaussian(12)}},{key:"rotation",value:function(t){return 0}}]),t}(),O=function(){function t(e,n,r){var o=this;T(this,t),z(this,"size",void 0),z(this,"texture",void 0),z(this,"_frozen",void 0),z(this,"thrustEmitter",void 0),z(this,"leftRotationEmitter",void 0),z(this,"rightRotationEmitter",void 0),z(this,"explosionEmitter",void 0),z(this,"_position",void 0),z(this,"_velocity",void 0),z(this,"_rotationVector",void 0),z(this,"_rotation",void 0),z(this,"_explosionCount",0),z(this,"_isExploding",!1),z(this,"fuel",100),z(this,"crashed",!1),z(this,"thrusting",!1),z(this,"turningLeft",!1),z(this,"turningRight",!1),this.texture=n,this.size=r,this._frozen=!1,this._position=e,this._velocity=new i(0,0),this._rotationVector=new i(0,-1),this._rotation=0,this.thrustEmitter=new p(new S,(function(t){return t.lander.thrusting&&t.lander.fuel>0&&!o._frozen}),.03,5),this.leftRotationEmitter=new p(new S(90),(function(t){return t.lander.turningLeft&&t.lander.fuel>0&&!o._frozen}),.03,3),this.rightRotationEmitter=new p(new S(-90),(function(t){return t.lander.turningRight&&t.lander.fuel>0&&!o._frozen}),.03,3),this.explosionEmitter=new p(new P,(function(t){return o._isExploding}),.03,200),this.positionEmitters()}return C(t,[{key:"draw",value:function(t,e,n){e.lander.crashed||a(t,this.texture,n.translate(this._position),n.translate(this.size),this._rotation),this.thrustEmitter.draw(t,e,n),this.leftRotationEmitter.draw(t,e,n),this.rightRotationEmitter.draw(t,e,n),this.explosionEmitter.draw(t,e,n)}},{key:"debugDraw",value:function(t,e,n){t.beginPath(),t.strokeStyle="#ffffff";var r=n.translate(this._position);t.arc(r.x,r.y,n.translate(new i(4,0)).x,0,2*Math.PI),t.stroke();var o=n.translate(this._position),a=n.translate(this._rotationVector.scale(5));t.beginPath(),this._rotation%360<5&&this._rotation%360>-5?t.strokeStyle="#00ff00":t.strokeStyle="#ff0000",t.lineTo(o.x,o.y),t.lineTo(o.x+a.x,o.y+a.y),t.stroke();var s=n.translate(this._velocity.normalize().scale(5));t.beginPath(),this._velocity.sqrMagnitude()<4?t.strokeStyle="#0000ff":t.strokeStyle="#ff0000",t.lineTo(o.x,o.y),t.lineTo(o.x+s.x,o.y+s.y),t.stroke()}},{key:"positionEmitters",value:function(){this.thrustEmitter.position=this._position.add(this._rotationVector.scale(-1.5)),this.leftRotationEmitter.position=this._position.add(this._rotationVector.rotate(70).scale(-1.75)),this.rightRotationEmitter.position=this._position.add(this._rotationVector.rotate(-70).scale(-1.75)),this.explosionEmitter.position=this._position}},{key:"update",value:function(t,e){if(this._isExploding&&(console.log("Explosion"),this._explosionCount++),this._explosionCount>5&&(this._isExploding=!1,this._explosionCount=0),this.thrustEmitter.update(t,e),this.leftRotationEmitter.update(t,e),this.rightRotationEmitter.update(t,e),this.explosionEmitter.update(t,e),!this._frozen){this.turningLeft&&this.fuel>0&&this.rotate(t,e,-1),this.turningRight&&this.fuel>0&&this.rotate(t,e,1),this._velocity=this._velocity.add(e.config.gravity.scale(t)),this.thrusting&&this.fuel>0&&(this._velocity=this._velocity.add(this._rotationVector.scale(t*e.config.thrustCoefficient)),this.fuel-=e.config.fuelConsumption*t),this.fuel<0&&(this.fuel=0,e.commands.execute("fuelExpired",e)),this._position=this._position.add(this._velocity.scale(t)),this.positionEmitters();for(var n=0;n<e.terrain.points.length-1;n++)if(w(new k(this._position,2),e.terrain.points[n],e.terrain.points[n+1])){if(this.velocity.sqrMagnitude()<=4&&(this.rotation<5||this.rotation>355))for(var i=0;i<e.safeZones.length;i++)if(e.terrain.points[n]==e.safeZones[i][0]&&e.terrain.points[n+1]==e.safeZones[i][1])return void e.commands.execute("safeLanding",e);e.commands.execute("crashLanding",e),this._isExploding=!0}(this.position.x>e.config.worldSize.x+10||this.position.x<-10||this.position.y>e.config.worldSize.y+10)&&(e.commands.execute("crashLanding",e),this._isExploding=!0)}}},{key:"rotate",value:function(t,e,n){this.fuel-=e.config.fuelConsumption*t*.5,this._rotation+=n*e.config.theta*t,this._rotationVector=this._rotationVector.rotate(n*e.config.theta*t)}},{key:"velocity",get:function(){return this._velocity}},{key:"rotation",get:function(){return(this._rotation%360+360)%360}},{key:"rotationVector",get:function(){return this._rotationVector}},{key:"position",get:function(){return this._position}},{key:"freeze",value:function(){this._frozen=!0,this._velocity=i.ZERO}},{key:"frozen",get:function(){return this._frozen}}]),t}();function M(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function A(t,e,n){return e&&V(t.prototype,e),n&&V(t,n),t}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F=function(){function t(){L(this,t),R(this,"_wasPressed",!1),R(this,"_lastPressed",Date.now()),R(this,"_onStateChanged",new Set),R(this,"_onKeyUp",new Set),R(this,"_onKeyDown",new Set)}return A(t,[{key:"update",value:function(t,e){if(this._wasPressed!=t){var n;n=t?this._onKeyDown:this._onKeyUp;var i,r=Date.now(),o=M(n);try{for(o.s();!(i=o.n()).done;)(0,i.value)(t,r-this._lastPressed,e)}catch(t){o.e(t)}finally{o.f()}var a,s=M(this._onStateChanged);try{for(s.s();!(a=s.n()).done;)(0,a.value)(t,r-this._lastPressed,e)}catch(t){s.e(t)}finally{s.f()}this._lastPressed=r,this._wasPressed=!this._wasPressed}}},{key:"addUp",value:function(t){this._onKeyUp.add(t)}},{key:"addDown",value:function(t){this._onKeyDown.add(t)}},{key:"addChanged",value:function(t){this._onStateChanged.add(t)}}]),t}(),D=function(){function t(){L(this,t),R(this,"handlers",void 0),R(this,"descriptions",void 0),window.addEventListener("keydown",this.updateDown.bind(this)),window.addEventListener("keyup",this.updateUp.bind(this)),this.handlers=new Map}return A(t,[{key:"registerHandler",value:function(t,e){var n;this.handlers.has(t)?console.warn("Key handler registered twice for keyCode ".concat(t)):(this.handlers.set(t,new F),null===(n=this.descriptions)||void 0===n||n.set(t,e))}},{key:"bindUp",value:function(t,e){this.handlers.get(t).addUp(e)}},{key:"bindDown",value:function(t,e){this.handlers.get(t).addDown(e)}},{key:"bindChanged",value:function(t,e){this.handlers.get(t).addChanged(e)}},{key:"updateDown",value:function(t){this.handlers.has(t.key)&&(t.preventDefault(),this.handlers.get(t.key).update(!0,{alt:t.altKey,shift:t.shiftKey,ctrl:t.ctrlKey}))}},{key:"updateUp",value:function(t){this.handlers.has(t.key)&&(t.preventDefault(),this.handlers.get(t.key).update(!1,{alt:t.altKey,shift:t.shiftKey,ctrl:t.ctrlKey}))}},{key:"clear",value:function(){this.handlers=new Map}},{key:"remove",value:function(t){this.handlers.delete(t)}}]),t}();function K(t,e,n,i,r){t.registerHandler(i,n),e.has("begin".concat(n))&&t.bindDown(i,(function(){return e.execute("begin".concat(n),r)})),e.has("end".concat(n))&&t.bindUp(i,(function(){return e.execute("end".concat(n),r)})),e.has("toggle".concat(n))&&t.bindChanged(i,(function(){return e.execute("toggle".concat(n),r)}))}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Z(t,e,n){return e&&U(t.prototype,e),n&&U(t,n),t}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Y=function(){function t(e,n){I(this,t),X(this,"_name",void 0),X(this,"_action",void 0),this._name=e,this._action=n}return Z(t,[{key:"name",get:function(){return this._name}},{key:"invoke",value:function(t){this._action(t)}}]),t}(),q=function(){function t(){I(this,t),X(this,"commands",void 0),this.commands=new Map}return Z(t,[{key:"createCommand",value:function(t,e){this.commands.set(t,new Y(t,e))}},{key:"has",value:function(t){return this.commands.has(t)}},{key:"execute",value:function(t,e){this.commands.has(t)?this.commands.get(t).invoke(e):console.warn("Attempting to invoke non-existent command ".concat(t))}}]),t}();function G(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var N=function(){function t(e,n,r,o){var a,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s=void 0,(a="points")in this?Object.defineProperty(this,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[a]=s,this.points=[r,o];for(var u=0;u<e;u++){var l=this.points.length;n/=2;for(var h=0;h<l-1;h++){var c=new i((this.points[2*h].x+this.points[2*h+1].x)/2,(this.points[2*h].y+this.points[2*h+1].y)/2);c=c.add(new i(0,_.gaussian(12)*n)),this.points.splice(2*h+1,0,c)}}}var e,n;return e=t,(n=[{key:"insertSafeZone",value:function(t,e,n){for(var r=t+n/2,o=r+(e-n/2-r)*Math.random(),a=0,s=this.points[0];s.x<o;)s=this.points[++a];var u=s;a++,s=this.points[a];for(var l=0;s.x<o+n;)l=s.x,this.points.splice(a,1),s=this.points[a];return this.points[a]=new i(l,u.y),[u,this.points[a]]}}])&&G(e.prototype,n),t}();function $(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var J=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),B(this,"el",void 0),B(this,"ready",!1),B(this,"continue",!1),B(this,"loop",!1),B(this,"_playing",!1),B(this,"cutoff",0),this.el=new Audio(e),this.el.addEventListener("load",(function(){i.ready=!0})),n&&(this.loop=!0,this.cutoff=n)}var e,n;return e=t,(n=[{key:"play",value:function(){var t=this;this.el.play(),this.continue=!0,this._playing=!0,this.loop?setTimeout((function(){t.continue&&(t.el.currentTime=0,t.playRec())}),1e3*this.cutoff):setTimeout((function(){return t._playing=!1}),1e3*this.el.duration)}},{key:"playRec",value:function(){var t=this;setTimeout((function(){t.continue&&(t.el.currentTime=0,t.playRec())}),1e3*this.cutoff)}},{key:"stop",value:function(){this.el.pause(),this.continue=!1,this._playing=!1,this.el.currentTime=0}},{key:"playing",get:function(){return this._playing}}])&&$(e.prototype,n),t}(),Q=document.getElementById("canvas"),tt=Q.getContext("2d"),et=new i(4/3,1),nt=et.scale(100),it=new s("assets/Lander.png",new i(500,500));window.innerWidth/et.x<window.innerHeight/et.y?(Q.width=window.innerWidth,Q.height=window.innerWidth*et.y/et.x):(Q.width=window.innerHeight*et.x/et.y,Q.height=window.innerHeight);var rt=new h(Q.width/nt.x,Q.height/nt.y);window.addEventListener("resize",(function(){window.innerWidth/et.x<window.innerHeight/et.y?(Q.width=window.innerWidth,Q.height=window.innerWidth*et.y/et.x):(Q.width=window.innerHeight*et.x/et.y,Q.height=window.innerHeight),rt=new h(Q.width/nt.x,Q.height/nt.y)}));var ot=new Array,at=new Array,st=new i(5,5),ut=new i(5,7.5),lt=new i(5,10),ht=0;function ct(t){return function e(n){var i=n-ht;ht=n,function(t,e){for(var n=0;n<at.length;n++)at[n].update(t,e)}(i/1e3,t),function(t){tt.clearRect(0,0,Q.width,Q.height),function(t,e,n){t.beginPath(),t.lineTo(n.translateValueX(0),n.translateValueY(e.config.worldSize.y));var i=t.createLinearGradient(0,0,0,1e3);i.addColorStop(0,"#ffffff"),i.addColorStop(1,"#777777");for(var r=1;r<e.terrain.points.length;r++){var o=n.translate(e.terrain.points[r]);t.lineTo(o.x,o.y)}t.lineTo(n.translateValueX(e.config.worldSize.x),n.translateValueY(e.config.worldSize.y)),t.fillStyle=i,t.fill();for(var a=0;a<e.safeZones.length;a++){t.strokeStyle="#f69205",t.lineWidth=n.translateValueY(.5),t.beginPath();var s=H(e.safeZones[a].map(n.translate),2),u=s[0],l=s[1];t.lineTo(u.x,u.y),t.lineTo(l.x,l.y),t.stroke()}}(tt,t,rt);for(var e=0;e<ot.length;e++)ot[e].draw(tt,t,rt);!function(t,e){var n=rt.translateValueX(2);t.font="".concat(n,"px Arial");var i=e.lander.fuel;t.fillStyle=i>0?"#00ff00":"#ffffff";var r=rt.translate(st);t.fillText("Fuel: ".concat(i.toFixed(2),"L"),r.x,r.y);var o=e.lander.rotation;t.fillStyle=o<5||o>355?"#00ff00":"#ffffff";var a=rt.translate(ut);t.fillText("Angle: ".concat(o.toFixed(2),"°"),a.x,a.y);var s=e.lander.velocity.magnitude();t.fillStyle=s<2?"#00ff00":"#ffffff";var u=rt.translate(lt);t.fillText("Velocity: ".concat(s.toFixed(2)," m/s"),u.x,u.y),t.fillStyle="#ffffff"}(tt,t)}(t),t.running&&requestAnimationFrame(e)}}function ft(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new O(new i(nt.x/2,0),it,new i(5,5));t.lander=n,at=[],(ot=[]).push(n),at.push(n);for(var r=new N(8,500,new i(0,2*nt.y/3),new i(nt.x,2*nt.y/3)),o=[],a=3-e,s=10,u=nt.x-10,l=(u-s)/a,h=0;h<a;h++)o.push(r.insertSafeZone(s+l*h,s+l*(h+1),7.5*a));t.terrain=r,t.safeZones=o,requestAnimationFrame(ct(t))}ft(function t(){var e,n,r,o={terrain:void 0,running:!0,lander:void 0,safeZones:void 0,commands:void 0,keys:void 0,config:{fuelConsumption:20,thrustCoefficient:10,theta:90,gravity:new i(0,1),worldSize:nt},sounds:{mainThruster:new J("assets/mainthruster.wav",4),subThruster:new J("assets/subthruster.wav",4),explosion:new J("assets/explosion.wav"),landing:new J("assets/landing.wav"),noFuel:new J("assets/nofuel.wav",1)}};return o.commands=((e=new q).createCommand("beginThrust",(function(t){t.lander.frozen||(t.lander.thrusting=!0,t.lander.fuel>0?t.sounds.mainThruster.play():t.sounds.noFuel.play())})),e.createCommand("endThrust",(function(t){t.lander.thrusting=!1,t.sounds.mainThruster.stop(),t.sounds.noFuel.stop()})),e.createCommand("fuelExpired",(function(t){t.lander.frozen||(t.sounds.mainThruster.playing&&(t.sounds.mainThruster.stop(),t.sounds.noFuel.play()),t.sounds.subThruster.playing&&(t.sounds.subThruster.stop(),t.sounds.noFuel.play()))})),e.createCommand("beginTurnLeft",(function(t){t.lander.frozen||(t.lander.turningLeft=!0,t.lander.fuel>0?t.sounds.subThruster.play():t.sounds.noFuel.play())})),e.createCommand("endTurnLeft",(function(t){t.lander.frozen||(t.sounds.subThruster.stop(),t.sounds.noFuel.stop(),t.lander.turningLeft=!1)})),e.createCommand("beginTurnRight",(function(t){t.lander.frozen||(t.lander.fuel>0?t.sounds.subThruster.play():t.sounds.noFuel.play(),t.lander.turningRight=!0)})),e.createCommand("endTurnRight",(function(t){t.lander.frozen||(t.sounds.subThruster.stop(),t.sounds.noFuel.stop(),t.lander.turningRight=!1)})),e.createCommand("safeLanding",(function(e){e.sounds.landing.play(),e.lander.freeze(),setTimeout((function(){e.running=!1,ft(t(),2)}),3e3)})),e.createCommand("crashLanding",(function(t){t.sounds.mainThruster.stop(),t.sounds.subThruster.stop(),t.sounds.noFuel.stop(),t.sounds.explosion.play(),t.lander.crashed=!0,t.lander.freeze()})),e),o.keys=(n=o,K(r=new D,n.commands,"Thrust","ArrowUp",n),K(r,n.commands,"TurnLeft","ArrowLeft",n),K(r,n.commands,"TurnRight","ArrowRight",n),r),o}(),1)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy92ZWN0b3IyLnRzIiwid2VicGFjazovL2x1bmFybGFuZGVyLy4vc3JjL3RleHR1cmUudHMiLCJ3ZWJwYWNrOi8vbHVuYXJsYW5kZXIvLi9zcmMvY29vcmRpbmF0ZS50cyIsIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy9wYXJ0aWNsZS50cyIsIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy9jb2xsaXNpb24udHMiLCJ3ZWJwYWNrOi8vbHVuYXJsYW5kZXIvLi9zcmMvcmFuZG9tLnRzIiwid2VicGFjazovL2x1bmFybGFuZGVyLy4vc3JjL2NpcmNsZS50cyIsIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy9sYW5kZXIudHMiLCJ3ZWJwYWNrOi8vbHVuYXJsYW5kZXIvLi9zcmMva2V5LnRzIiwid2VicGFjazovL2x1bmFybGFuZGVyLy4vc3JjL2NvbW1hbmQudHMiLCJ3ZWJwYWNrOi8vbHVuYXJsYW5kZXIvLi9zcmMvdGVycmFpbi50cyIsIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy9zb3VuZC50cyIsIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy9nYW1lLnRzIiwid2VicGFjazovL2x1bmFybGFuZGVyLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbIlZlY3RvcjIiLCJ4IiwieSIsInRoaXMiLCJfeCIsIl95IiwiTWF0aCIsInJhbmRvbSIsIm5vcm1hbGl6ZSIsInBvczEiLCJwb3MyIiwic3FydCIsInBvdyIsIm1hZ25pdHVkZSIsInNjYWxhciIsIm90aGVyIiwiZGVncmVlcyIsInJhZCIsIlBJIiwiY29zIiwic2luIiwiZHJhd1RleHR1cmUiLCJjb250ZXh0IiwidGV4dHVyZSIsInBvc2l0aW9uIiwic2l6ZSIsInJvdGF0aW9uIiwicmVhZHkiLCJzYXZlIiwidHJhbnNsYXRlIiwicm90YXRlIiwiZHJhd0ltYWdlIiwicmVzdG9yZSIsIlRleHR1cmUiLCJlbCIsIkltYWdlIiwic3JjIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlZpcnR1YWxDb29yZGluYXRlU3lzdGVtIiwic2NhbGVYIiwic2NhbGVZIiwiYmluZCIsInRyYW5zbGF0ZVZhbHVlWCIsInRyYW5zbGF0ZVZhbHVlWSIsInYxIiwicCIsIlBhcnRpY2xlQ29udGFpbmVyIiwicGFydGljbGVzIiwiZGVsdGEiLCJzdGF0ZSIsImZpbHRlciIsInVwZGF0ZSIsInJlbWFpbmluZ1RpbWUiLCJwYXJ0aWNsZSIsInB1c2giLCJQYXJ0aWNsZUVtaXR0ZXIiLCJnZW5lcmF0b3IiLCJwcmVkaWNhdGUiLCJyYXRlIiwiY291bnQiLCJfY29udGFpbmVyIiwiX3BhcnRpY2xlR2VuZXJhdG9yIiwiX3ByZWRpY2F0ZSIsIl9jb3VudCIsIl9yYXRlIiwiY29vcmRpbmF0ZXMiLCJmb3JFYWNoIiwiZHJhdyIsIl9lbGFwc2VkIiwiaSIsImFkZCIsIlBhcnRpY2xlRWZmZWN0IiwidmVsb2NpdHkiLCJsaWZldGltZSIsImNlbnRlciIsIl9jZW50ZXIiLCJfdmVsb2NpdHkiLCJfbGlmZXRpbWUiLCJfcm90YXRpb24iLCJfdGV4dHVyZSIsIl9zaXplIiwiX2VsYXBzZWRMaWZldGltZSIsImdsb2JhbEFscGhhIiwiX2RpcmVjdGlvbiIsIl8iLCJzY2FsZSIsImlzQ29sbGlkaW5nIiwiY2lyY2xlIiwicHQxIiwicHQyIiwidjIiLCJiIiwiYyIsImQiLCJyYWRpdXMiLCJpc05hTiIsInUxIiwidTIiLCJyYW5kIiwiQ2lyY2xlIiwiX3JhZGl1cyIsIlRocnVzdEdlbmVyYXRvciIsInJvdGF0aW9uT2Zmc2V0IiwiX3JvdGF0aW9uT2Zmc2V0IiwidGV4IiwidiIsImxhbmRlciIsInJvdGF0aW9uVmVjdG9yIiwiZ2F1c3NpYW4iLCJFeHBsb3Npb25HZW5lcmF0b3IiLCJMYW5kZXIiLCJfZnJvemVuIiwiX3Bvc2l0aW9uIiwiX3JvdGF0aW9uVmVjdG9yIiwidGhydXN0RW1pdHRlciIsInRocnVzdGluZyIsImZ1ZWwiLCJsZWZ0Um90YXRpb25FbWl0dGVyIiwidHVybmluZ0xlZnQiLCJyaWdodFJvdGF0aW9uRW1pdHRlciIsInR1cm5pbmdSaWdodCIsImV4cGxvc2lvbkVtaXR0ZXIiLCJfaXNFeHBsb2RpbmciLCJwb3NpdGlvbkVtaXR0ZXJzIiwiY3Jhc2hlZCIsImJlZ2luUGF0aCIsInN0cm9rZVN0eWxlIiwiY2lyY2xlcG9zIiwiYXJjIiwic3Ryb2tlIiwiYWRqUG9zIiwiYWRqVmVjIiwibGluZVRvIiwic3FyTWFnbml0dWRlIiwiY29uc29sZSIsImxvZyIsIl9leHBsb3Npb25Db3VudCIsImNvbmZpZyIsImdyYXZpdHkiLCJ0aHJ1c3RDb2VmZmljaWVudCIsImZ1ZWxDb25zdW1wdGlvbiIsImNvbW1hbmRzIiwiZXhlY3V0ZSIsInRlcnJhaW4iLCJwb2ludHMiLCJsZW5ndGgiLCJqIiwic2FmZVpvbmVzIiwid29ybGRTaXplIiwiZGlyZWN0aW9uIiwidGhldGEiLCJLZXlIYW5kbGVyIiwiRGF0ZSIsIm5vdyIsIlNldCIsInByZXNzZWQiLCJtb2RpZmllcnMiLCJfd2FzUHJlc3NlZCIsInNldCIsIl9vbktleURvd24iLCJfb25LZXlVcCIsInJlcyIsIl9sYXN0UHJlc3NlZCIsIl9vblN0YXRlQ2hhbmdlZCIsImFjdGlvbiIsIktleU1hbmFnZXIiLCJ3aW5kb3ciLCJ1cGRhdGVEb3duIiwidXBkYXRlVXAiLCJoYW5kbGVycyIsIk1hcCIsImtleUNvZGUiLCJkZXNjcmlwdGlvbiIsImhhcyIsIndhcm4iLCJkZXNjcmlwdGlvbnMiLCJ1cGRhdGVGbiIsImdldCIsImFkZFVwIiwiYWRkRG93biIsImFkZENoYW5nZWQiLCJldmVudCIsImtleSIsInByZXZlbnREZWZhdWx0IiwiYWx0IiwiYWx0S2V5Iiwic2hpZnQiLCJzaGlmdEtleSIsImN0cmwiLCJjdHJsS2V5Iiwia2V5Y29kZSIsIm1hcFRvQ29tbWFuZHMiLCJrZXlNYW5hZ2VyIiwiY29tbWFuZE5hbWUiLCJrZXlOYW1lIiwicmVnaXN0ZXJIYW5kbGVyIiwiYmluZERvd24iLCJiaW5kVXAiLCJiaW5kQ2hhbmdlZCIsIkNvbW1hbmQiLCJuYW1lIiwiX25hbWUiLCJfYWN0aW9uIiwiQ29tbWFuZFNlcnZpY2UiLCJpbnZva2UiLCJUZXJyYWluIiwiaXRlcmF0aW9ucyIsInJvdWdobmVzcyIsInAxIiwicDIiLCJzYXZlZExlbmd0aCIsIm1pZCIsInNwbGljZSIsIm1pblgiLCJtYXhYIiwid2lkdGgiLCJ0YXJnZXRYTWluIiwib2Zmc2V0IiwicG9pbnQiLCJzYXZlZCIsIlNvdW5kRWZmZWN0Iiwic291cmNlIiwiY3V0b2ZmIiwiQXVkaW8iLCJsb29wIiwicGxheSIsIl9wbGF5aW5nIiwic2V0VGltZW91dCIsImN1cnJlbnRUaW1lIiwicGxheVJlYyIsImR1cmF0aW9uIiwicGF1c2UiLCJjYW52YXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsInJhdGlvIiwibGFuZGVyVGV4dHVyZSIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImhlaWdodCIsInZjcyIsImRyYXdhYmxlcyIsIkFycmF5IiwidGlja2luZyIsImZ1ZWxQb3NpdGlvbiIsImFuZ2xlUG9zaXRpb24iLCJ2ZWxvY2l0eVBvc2l0aW9uIiwibGFzdFRpbWUiLCJnbG9iYWxTdGF0ZSIsImZuIiwiY2xlYXJSZWN0IiwiY3R4IiwiZ3JkIiwiY3JlYXRlTGluZWFyR3JhZGllbnQiLCJhZGRDb2xvclN0b3AiLCJwdCIsImZpbGxTdHlsZSIsImZpbGwiLCJsaW5lV2lkdGgiLCJtYXAiLCJkcmF3VGVycmFpbiIsImZvbnRTaXplIiwiZm9udCIsImFkanVzdGVkRnVlbFBvc2l0aW9uIiwiZmlsbFRleHQiLCJ0b0ZpeGVkIiwiYW5nbGUiLCJhZGp1c3RlZEFuZ2xlUG9zaXRpb24iLCJtYWduIiwiYWRqdXN0ZWRWZWxvY2l0eVBvc2l0aW9uIiwiZHJhd1RleHQiLCJydW5uaW5nIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic3RhcnQiLCJkaWZmaWN1bHR5IiwibWluIiwibWF4IiwidmFsaWRQb3J0aW9ucyIsImluc2VydFNhZmVab25lIiwiYnVpbGRTdGF0ZSIsImtleXMiLCJ1bmRlZmluZWQiLCJzb3VuZHMiLCJtYWluVGhydXN0ZXIiLCJzdWJUaHJ1c3RlciIsImV4cGxvc2lvbiIsImxhbmRpbmciLCJub0Z1ZWwiLCJjcmVhdGVDb21tYW5kIiwiZnJvemVuIiwic3RvcCIsInBsYXlpbmciLCJmcmVlemUiXSwibWFwcGluZ3MiOiJpVEFBTyxJQUFNQSxFQUFiLFdBVUUsV0FBWUMsRUFBV0MsSSw0RkFBVyxxQkFQYixHQU9hLFlBTmIsR0FPbkJDLEtBQUtDLEdBQUtILEVBQ1ZFLEtBQUtFLEdBQUtILEUsVUFaZCxPLEVBQUEsRSxFQUFBLHFCQU1FLFdBQ0UsT0FBTyxJQUFJRixFQUFRTSxLQUFLQyxTQUFVRCxLQUFLQyxVQUFVQyxjQVByRCxzQkFlRSxTQUF1QkMsRUFBZUMsR0FDcEMsT0FBT0osS0FBS0ssS0FDVkwsS0FBS00sSUFBSUgsRUFBS1IsRUFBSVMsRUFBS1QsRUFBRyxHQUFLSyxLQUFLTSxJQUFJSCxFQUFLUCxFQUFJUSxFQUFLUixFQUFHLFEsRUFqQi9ELGNBcUJFLFdBQ0UsT0FBT0MsS0FBS0MsS0F0QmhCLGFBeUJFLFdBQ0UsT0FBT0QsS0FBS0UsS0ExQmhCLDBCQTZCRSxXQUNFLE9BQU9DLEtBQUtNLElBQUlULEtBQUtGLEVBQUcsR0FBS0ssS0FBS00sSUFBSVQsS0FBS0QsRUFBRyxLQTlCbEQsdUJBaUNFLFdBQ0UsT0FBT0ksS0FBS0ssS0FBS0wsS0FBS00sSUFBSVQsS0FBS0YsRUFBRyxHQUFLSyxLQUFLTSxJQUFJVCxLQUFLRCxFQUFHLE1BbEM1RCx1QkFxQ0UsV0FDRSxJQUFNVyxFQUFZVixLQUFLVSxZQUN2QixPQUFPLElBQUliLEVBQVFHLEtBQUtGLEVBQUlZLEVBQVdWLEtBQUtELEVBQUlXLEtBdkNwRCxtQkEwQ0UsU0FBTUMsR0FDSixPQUFPLElBQUlkLEVBQVFHLEtBQUtGLEVBQUlhLEVBQVFYLEtBQUtELEVBQUlZLEtBM0NqRCxpQkE4Q0UsU0FBSUMsR0FDRixPQUFPLElBQUlmLEVBQVFHLEtBQUtGLEVBQUljLEVB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QUFZdUIsU0FBVSxFQUN0QkUsR0FBTU0sSUFBYyxLQUNyQixRQUdMM0ksRUFBU29KLGNBQWMsZ0JBQWdCLFNBQUF4QyxHQUNyQ0EsRUFBWWtDLE9BQU9DLGFBQWFPLE9BQ2hDMUMsRUFBWWtDLE9BQU9FLFlBQVlNLE9BQy9CMUMsRUFBWWtDLE9BQU9LLE9BQU9HLE9BQzFCMUMsRUFBWWtDLE9BQU9HLFVBQVU3RCxPQUM3QndCLEVBQVkvSSxPQUFPa0IsU0FBVSxFQUM3QjZILEVBQVkvSSxPQUFPMkwsWUFHZHhKLEdBb0NQNEcsRUFBWWdDLE1BakNNeE8sRUFpQ1d3TSxFQTlCN0IxRCxFQURNMEYsRUFBTyxJQUFJcEgsRUFDR3BILEVBQU00RixTQUFVLFNBQVUsVUFBVzVGLEdBQ3pEOEksRUFBYzBGLEVBQU14TyxFQUFNNEYsU0FBVSxXQUFZLFlBQWE1RixHQUM3RDhJLEVBQWMwRixFQUFNeE8sRUFBTTRGLFNBQVUsWUFBYSxhQUFjNUYsR0FDeER3TyxHQTRCQWhDLEVDblFTK0IsR0FDQyxJIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBWZWN0b3IyIHtcbiAgc3RhdGljIFpFUk86IFZlY3RvcjIgPSBuZXcgVmVjdG9yMigwLCAwKTtcblxuICBwcml2YXRlIF94OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF95OiBudW1iZXIgPSAwO1xuXG4gIHN0YXRpYyByYW5kb20oKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKE1hdGgucmFuZG9tKCksIE1hdGgucmFuZG9tKCkpLm5vcm1hbGl6ZSgpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICB0aGlzLl94ID0geDtcbiAgICB0aGlzLl95ID0geTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZGlzdGFuY2UocG9zMTogVmVjdG9yMiwgcG9zMjogVmVjdG9yMikge1xuICAgIHJldHVybiBNYXRoLnNxcnQoXG4gICAgICBNYXRoLnBvdyhwb3MxLnggLSBwb3MyLngsIDIpICsgTWF0aC5wb3cocG9zMS55IC0gcG9zMi55LCAyKVxuICAgICk7XG4gIH1cblxuICBnZXQgeCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl94O1xuICB9XG5cbiAgZ2V0IHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5feTtcbiAgfVxuXG4gIHNxck1hZ25pdHVkZSgpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnBvdyh0aGlzLngsIDIpICsgTWF0aC5wb3codGhpcy55LCAyKTtcbiAgfVxuXG4gIG1hZ25pdHVkZSgpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LCAyKSArIE1hdGgucG93KHRoaXMueSwgMikpO1xuICB9XG5cbiAgbm9ybWFsaXplKCk6IFZlY3RvcjIge1xuICAgIGNvbnN0IG1hZ25pdHVkZSA9IHRoaXMubWFnbml0dWRlKCk7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCAvIG1hZ25pdHVkZSwgdGhpcy55IC8gbWFnbml0dWRlKTtcbiAgfVxuXG4gIHNjYWxlKHNjYWxhcjogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCAqIHNjYWxhciwgdGhpcy55ICogc2NhbGFyKTtcbiAgfVxuXG4gIGFkZChvdGhlcjogVmVjdG9yMik6IFZlY3RvcjIge1xuICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLnggKyBvdGhlci54LCB0aGlzLnkgKyBvdGhlci55KTtcbiAgfVxuXG4gIHJvdGF0ZShkZWdyZWVzOiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICBjb25zdCByYWQgPSAoZGVncmVlcyAqIE1hdGguUEkpIC8gMTgwO1xuICAgIGxldCB2YWwgPSBuZXcgVmVjdG9yMihcbiAgICAgIHRoaXMueCAqIE1hdGguY29zKHJhZCkgLSBNYXRoLnNpbihyYWQpICogdGhpcy55LFxuICAgICAgdGhpcy54ICogTWF0aC5zaW4ocmFkKSArIHRoaXMueSAqIE1hdGguY29zKHJhZClcbiAgICApO1xuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgVmVjdG9yMih4OiAke3RoaXMueH0sIHk6ICR7dGhpcy55fSlgO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZlY3RvcjI7XG4iLCJpbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3VGV4dHVyZShcbiAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICB0ZXh0dXJlOiBUZXh0dXJlLFxuICBwb3NpdGlvbjogVmVjdG9yMixcbiAgc2l6ZTogVmVjdG9yMixcbiAgcm90YXRpb246IG51bWJlciA9IDBcbikge1xuICBpZiAoIXRleHR1cmUucmVhZHkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29udGV4dC5zYXZlKCk7XG4gIGNvbnRleHQudHJhbnNsYXRlKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xuICBjb250ZXh0LnJvdGF0ZSgocm90YXRpb24gKiBNYXRoLlBJKSAvIDE4MCk7XG4gIGNvbnRleHQudHJhbnNsYXRlKC1wb3NpdGlvbi54LCAtcG9zaXRpb24ueSk7XG4gIGNvbnRleHQuZHJhd0ltYWdlKFxuICAgIHRleHR1cmUudGV4dHVyZSxcbiAgICBwb3NpdGlvbi54IC0gc2l6ZS54IC8gMixcbiAgICBwb3NpdGlvbi55IC0gc2l6ZS55IC8gMixcbiAgICBzaXplLngsXG4gICAgc2l6ZS55XG4gICk7XG4gIGNvbnRleHQucmVzdG9yZSgpO1xufVxuXG5leHBvcnQgY2xhc3MgVGV4dHVyZSB7XG4gIHNpemU6IFZlY3RvcjI7XG4gIGVsOiBIVE1MSW1hZ2VFbGVtZW50O1xuICByZWFkeTogYm9vbGVhbiA9IGZhbHNlO1xuICBjb25zdHJ1Y3Rvcih0ZXh0dXJlOiBzdHJpbmcsIHNpemU6IFZlY3RvcjIpIHtcbiAgICB0aGlzLmVsID0gbmV3IEltYWdlKCk7XG4gICAgdGhpcy5lbC5zcmMgPSB0ZXh0dXJlO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5yZWFkeSA9IHRydWU7XG4gICAgfSk7XG4gIH1cblxuICBnZXQgdGV4dHVyZSgpOiBDYW52YXNJbWFnZVNvdXJjZSB7XG4gICAgcmV0dXJuIHRoaXMuZWw7XG4gIH1cbn1cbmBgO1xuIiwiaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4vdmVjdG9yMlwiO1xuXG5leHBvcnQgY2xhc3MgVmlydHVhbENvb3JkaW5hdGVTeXN0ZW0ge1xuICBwcml2YXRlIHNjYWxlWDogbnVtYmVyO1xuICBwcml2YXRlIHNjYWxlWTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHNjYWxlWDogbnVtYmVyLCBzY2FsZVk6IG51bWJlcikge1xuICAgIHRoaXMuc2NhbGVYID0gc2NhbGVYO1xuICAgIHRoaXMuc2NhbGVZID0gc2NhbGVZO1xuICAgIHRoaXMudHJhbnNsYXRlID0gdGhpcy50cmFuc2xhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnRyYW5zbGF0ZVZhbHVlWCA9IHRoaXMudHJhbnNsYXRlVmFsdWVYLmJpbmQodGhpcyk7XG4gICAgdGhpcy50cmFuc2xhdGVWYWx1ZVkgPSB0aGlzLnRyYW5zbGF0ZVZhbHVlWS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgdHJhbnNsYXRlKHYxOiBWZWN0b3IyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHYxLnggKiB0aGlzLnNjYWxlWCwgdjEueSAqIHRoaXMuc2NhbGVZKTtcbiAgfVxuXG4gIHRyYW5zbGF0ZVZhbHVlWChwOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBwICogdGhpcy5zY2FsZVg7XG4gIH1cblxuICB0cmFuc2xhdGVWYWx1ZVkocDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gcCAqIHRoaXMuc2NhbGVZO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29vcmRpbmF0ZVRyYW5zbGF0YWJsZSB7XG4gIHRyYW5zbGF0ZSh2MTogVmVjdG9yMik6IFZlY3RvcjI7XG4gIHRyYW5zbGF0ZVZhbHVlWChwOiBudW1iZXIpOiBudW1iZXI7XG4gIHRyYW5zbGF0ZVZhbHVlWShwOiBudW1iZXIpOiBudW1iZXI7XG59XG4iLCJpbXBvcnQgVGlja2luZyBmcm9tIFwiLi90aWNraW5nXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5pbXBvcnQgRHJhd2FibGUgZnJvbSBcIi4vZHJhd2FibGVcIjtcbmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gXCIuL2Z1bmN0aW9uYWxcIjtcbmltcG9ydCB7IGRyYXdUZXh0dXJlLCBUZXh0dXJlIH0gZnJvbSBcIi4vdGV4dHVyZVwiO1xuaW1wb3J0IHsgQ29vcmRpbmF0ZVRyYW5zbGF0YWJsZSB9IGZyb20gXCIuL2Nvb3JkaW5hdGVcIjtcblxuZXhwb3J0IGNsYXNzIFBhcnRpY2xlQ29udGFpbmVyPFQ+IGltcGxlbWVudHMgVGlja2luZzxUPiB7XG4gIHBhcnRpY2xlczogQXJyYXk8UGFydGljbGVFZmZlY3Q8VD4+O1xuICB1cGRhdGUoZGVsdGE6IG51bWJlciwgc3RhdGU6IFQpIHtcbiAgICAvLyBUT0RPOiBDaGVjayBvbiB0aGUgZWZmaWNpZW5jeSBvZiB0aGlzLlxuICAgIHRoaXMucGFydGljbGVzID0gdGhpcy5wYXJ0aWNsZXMuZmlsdGVyKChwKSA9PiB7XG4gICAgICBwLnVwZGF0ZShkZWx0YSwgc3RhdGUpO1xuICAgICAgcmV0dXJuIHAucmVtYWluaW5nVGltZSA+IDA7XG4gICAgfSk7XG4gIH1cbiAgYWRkKHBhcnRpY2xlOiBQYXJ0aWNsZUVmZmVjdDxUPikge1xuICAgIHRoaXMucGFydGljbGVzLnB1c2gocGFydGljbGUpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wYXJ0aWNsZXMgPSBbXTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUGFydGljbGVFbWl0dGVyPFQ+IGltcGxlbWVudHMgVGlja2luZzxUPiwgRHJhd2FibGU8VD4ge1xuICBwb3NpdGlvbjogVmVjdG9yMjtcbiAgcHJpdmF0ZSBfcmF0ZTogbnVtYmVyID0gMC4xO1xuICBwcml2YXRlIF9lbGFwc2VkOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9jb3VudDogbnVtYmVyID0gMTA7XG4gIHByaXZhdGUgX2NvbnRhaW5lcjogUGFydGljbGVDb250YWluZXI8VD47XG4gIHByaXZhdGUgX3BhcnRpY2xlR2VuZXJhdG9yOiBQYXJ0aWNsZUdlbmVyYXRvcjxUPjtcbiAgcHJpdmF0ZSBfcHJlZGljYXRlOiBQcmVkaWNhdGU8VD47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgZ2VuZXJhdG9yOiBQYXJ0aWNsZUdlbmVyYXRvcjxUPixcbiAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZTxUPixcbiAgICByYXRlOiBudW1iZXIgPSAwLjEsXG4gICAgY291bnQ6IG51bWJlciA9IDEwXG4gICkge1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IG5ldyBQYXJ0aWNsZUNvbnRhaW5lcjxUPigpO1xuICAgIHRoaXMuX3BhcnRpY2xlR2VuZXJhdG9yID0gZ2VuZXJhdG9yO1xuICAgIHRoaXMuX3ByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICB0aGlzLl9jb3VudCA9IGNvdW50O1xuICAgIHRoaXMuX3JhdGUgPSByYXRlO1xuICB9XG4gIGRyYXcoXG4gICAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIHN0YXRlOiBULFxuICAgIGNvb3JkaW5hdGVzPzogQ29vcmRpbmF0ZVRyYW5zbGF0YWJsZVxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9jb250YWluZXIucGFydGljbGVzLmZvckVhY2goKHApID0+IHtcbiAgICAgIHAuZHJhdyhjb250ZXh0LCBzdGF0ZSwgY29vcmRpbmF0ZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlKGRlbHRhOiBudW1iZXIsIHN0YXRlOiBUKSB7XG4gICAgaWYgKHRoaXMuX3ByZWRpY2F0ZShzdGF0ZSkpIHtcbiAgICAgIHRoaXMuX2VsYXBzZWQgKz0gZGVsdGE7XG4gICAgICBpZiAodGhpcy5fZWxhcHNlZCA+IHRoaXMuX3JhdGUpIHtcbiAgICAgICAgdGhpcy5fZWxhcHNlZCAtPSB0aGlzLl9yYXRlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NvdW50OyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9jb250YWluZXIuYWRkKFxuICAgICAgICAgICAgbmV3IFBhcnRpY2xlRWZmZWN0PFQ+KFxuICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLFxuICAgICAgICAgICAgICB0aGlzLl9wYXJ0aWNsZUdlbmVyYXRvci52ZWxvY2l0eShzdGF0ZSksXG4gICAgICAgICAgICAgIHRoaXMuX3BhcnRpY2xlR2VuZXJhdG9yLmxpZmV0aW1lKHN0YXRlKSxcbiAgICAgICAgICAgICAgdGhpcy5fcGFydGljbGVHZW5lcmF0b3Iucm90YXRpb24oc3RhdGUpLFxuICAgICAgICAgICAgICB0aGlzLl9wYXJ0aWNsZUdlbmVyYXRvci50ZXh0dXJlKHN0YXRlKSxcbiAgICAgICAgICAgICAgdGhpcy5fcGFydGljbGVHZW5lcmF0b3Iuc2l6ZShzdGF0ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2NvbnRhaW5lci51cGRhdGUoZGVsdGEsIHN0YXRlKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpY2xlR2VuZXJhdG9yPFQ+IHtcbiAgdGV4dHVyZShzdGF0ZTogVCk6IFRleHR1cmU7XG4gIHNpemUoc3RhdGU6IFQpOiBWZWN0b3IyO1xuICB2ZWxvY2l0eShzdGF0ZTogVCk6IFZlY3RvcjI7XG4gIGxpZmV0aW1lKHN0YXRlOiBUKTogbnVtYmVyO1xuICByb3RhdGlvbihzdGF0ZTogVCk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFBhcnRpY2xlRWZmZWN0PFQ+IGltcGxlbWVudHMgRHJhd2FibGU8VD4sIFRpY2tpbmc8VD4ge1xuICBwcml2YXRlIF9jZW50ZXI6IFZlY3RvcjI7XG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMjtcbiAgcHJpdmF0ZSBfdmVsb2NpdHk6IFZlY3RvcjI7XG4gIHByaXZhdGUgX2xpZmV0aW1lOiBudW1iZXI7XG4gIHByaXZhdGUgX3JvdGF0aW9uOiBudW1iZXI7XG4gIHByaXZhdGUgX2VsYXBzZWRMaWZldGltZTogbnVtYmVyO1xuICBwcml2YXRlIF90ZXh0dXJlOiBUZXh0dXJlO1xuICBwcml2YXRlIF9zaXplOiBWZWN0b3IyO1xuICBjb25zdHJ1Y3RvcihcbiAgICBjZW50ZXI6IFZlY3RvcjIsXG4gICAgdmVsb2NpdHk6IFZlY3RvcjIsXG4gICAgbGlmZXRpbWU6IG51bWJlcixcbiAgICByb3RhdGlvbjogbnVtYmVyLFxuICAgIHRleHR1cmU6IFRleHR1cmUsXG4gICAgc2l6ZTogVmVjdG9yMlxuICApIHtcbiAgICB0aGlzLl9jZW50ZXIgPSBjZW50ZXI7XG4gICAgdGhpcy5fdmVsb2NpdHkgPSB2ZWxvY2l0eTtcbiAgICB0aGlzLl9saWZldGltZSA9IGxpZmV0aW1lO1xuICAgIHRoaXMuX3JvdGF0aW9uID0gcm90YXRpb247XG4gICAgdGhpcy5fdGV4dHVyZSA9IHRleHR1cmU7XG4gICAgdGhpcy5fc2l6ZSA9IHNpemU7XG4gICAgdGhpcy5fZWxhcHNlZExpZmV0aW1lID0gMDtcbiAgfVxuXG4gIGRyYXcoXG4gICAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIHN0YXRlOiBULFxuICAgIGNvb3JkaW5hdGVzOiBDb29yZGluYXRlVHJhbnNsYXRhYmxlXG4gICkge1xuICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxIC0gdGhpcy5fZWxhcHNlZExpZmV0aW1lIC8gdGhpcy5fbGlmZXRpbWU7XG4gICAgZHJhd1RleHR1cmUoXG4gICAgICBjb250ZXh0LFxuICAgICAgdGhpcy5fdGV4dHVyZSxcbiAgICAgIGNvb3JkaW5hdGVzLnRyYW5zbGF0ZSh0aGlzLl9jZW50ZXIpLFxuICAgICAgY29vcmRpbmF0ZXMudHJhbnNsYXRlKHRoaXMuX3NpemUpLFxuICAgICAgdGhpcy5fcm90YXRpb25cbiAgICApO1xuICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxO1xuICB9XG5cbiAgcHVibGljIGdldCB2ZWxvY2l0eSgpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5fdmVsb2NpdHk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGRpcmVjdGlvbigpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xuICB9XG5cbiAgcHVibGljIGdldCBjZW50ZXIoKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuX2NlbnRlcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgcmVtYWluaW5nVGltZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9saWZldGltZSAtIHRoaXMuX2VsYXBzZWRMaWZldGltZTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUoZGVsdGE6IG51bWJlciwgXzogVCkge1xuICAgIHRoaXMuX2VsYXBzZWRMaWZldGltZSArPSBkZWx0YTtcbiAgICB0aGlzLl9jZW50ZXIgPSB0aGlzLl9jZW50ZXIuYWRkKHRoaXMuX3ZlbG9jaXR5LnNjYWxlKGRlbHRhKSk7XG4gIH1cbn1cbiIsImltcG9ydCBWZWN0b3IyIGZyb20gXCIuL3ZlY3RvcjJcIjtcbmltcG9ydCBDaXJjbGUgZnJvbSBcIi4vY2lyY2xlXCI7XG5cbi8qKlxuICogTGluZS1DaXJjbGUgSW50ZXJzZWN0aW9uXG4gKiBAc291cmNlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM3MjI0OTEyL2NpcmNsZS1saW5lLXNlZ21lbnQtY29sbGlzaW9uXG4gKlxuICogQHBhcmFtIGNpcmNsZSBUaGUgY2lyY2xlIHRvIHRlc3QgZm9yIGludGVyc2VjdGlvbi5cbiAqIEBwYXJhbSBwdDEgVGhlIGZpcnN0IHBvaW50IG9mIHRoZSBsaW5lLlxuICogQHBhcmFtIHB0MiBUaGUgc2Vjb25kIHBvaW50IG9mIHRoZSBsaW5lLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDb2xsaWRpbmcoXG4gIGNpcmNsZTogQ2lyY2xlLFxuICBwdDE6IFZlY3RvcjIsXG4gIHB0MjogVmVjdG9yMlxuKTogYm9vbGVhbiB7XG4gIGxldCB2MSA9IG5ldyBWZWN0b3IyKHB0Mi54IC0gcHQxLngsIHB0Mi55IC0gcHQxLnkpO1xuICBsZXQgdjIgPSBuZXcgVmVjdG9yMihwdDEueCAtIGNpcmNsZS5jZW50ZXIueCwgcHQxLnkgLSBjaXJjbGUuY2VudGVyLnkpO1xuICBsZXQgYiA9IC0yICogKHYxLnggKiB2Mi54ICsgdjEueSAqIHYyLnkpO1xuICBsZXQgYyA9IDIgKiAodjEueCAqIHYxLnggKyB2MS55ICogdjEueSk7XG4gIGxldCBkID0gTWF0aC5zcXJ0KFxuICAgIGIgKiBiIC0gMiAqIGMgKiAodjIueCAqIHYyLnggKyB2Mi55ICogdjIueSAtIGNpcmNsZS5yYWRpdXMgKiBjaXJjbGUucmFkaXVzKVxuICApO1xuICBpZiAoaXNOYU4oZCkpIHtcbiAgICAvLyBubyBpbnRlcmNlcHRcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gVGhlc2UgcmVwcmVzZW50IHRoZSB1bml0IGRpc3RhbmNlIG9mIHBvaW50IG9uZSBhbmQgdHdvIG9uIHRoZSBsaW5lXG4gIGxldCB1MSA9IChiIC0gZCkgLyBjO1xuICBsZXQgdTIgPSAoYiArIGQpIC8gYztcbiAgaWYgKHUxIDw9IDEgJiYgdTEgPj0gMCkge1xuICAgIC8vIElmIHBvaW50IG9uIHRoZSBsaW5lIHNlZ21lbnRcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodTIgPD0gMSAmJiB1MiA+PSAwKSB7XG4gICAgLy8gSWYgcG9pbnQgb24gdGhlIGxpbmUgc2VnbWVudFxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsImNsYXNzIFJhbmRvbSB7XG4gIGdhdXNzaWFuKGNvdW50OiBudW1iZXIgPSA2KSB7XG4gICAgbGV0IHJhbmQgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICByYW5kICs9IE1hdGgucmFuZG9tKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmQgLyBjb3VudCAtIDAuNTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcmFuZG9tID0gbmV3IFJhbmRvbSgpO1xuIiwiaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4vdmVjdG9yMlwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaXJjbGUge1xuICBwcml2YXRlIF9jZW50ZXI6IFZlY3RvcjI7XG4gIHByaXZhdGUgX3JhZGl1czogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNlbnRlcjogVmVjdG9yMiwgcmFkaXVzOiBudW1iZXIpIHtcbiAgICB0aGlzLl9jZW50ZXIgPSBjZW50ZXI7XG4gICAgdGhpcy5fcmFkaXVzID0gcmFkaXVzO1xuICB9XG5cbiAgcHVibGljIGdldCBjZW50ZXIoKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuX2NlbnRlcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgcmFkaXVzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3JhZGl1cztcbiAgfVxufVxuIiwiaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi92ZWN0b3IyJ1xuaW1wb3J0IERyYXdhYmxlIGZyb20gJy4vZHJhd2FibGUnXG5pbXBvcnQgVGlja2luZyBmcm9tICcuL3RpY2tpbmcnXG5pbXBvcnQgeyBDb29yZGluYXRlVHJhbnNsYXRhYmxlIH0gZnJvbSAnLi9jb29yZGluYXRlJ1xuaW1wb3J0IHsgZHJhd1RleHR1cmUsIFRleHR1cmUgfSBmcm9tICcuL3RleHR1cmUnXG5pbXBvcnQgeyBHbG9iYWxTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgeyBQYXJ0aWNsZUVtaXR0ZXIsIFBhcnRpY2xlR2VuZXJhdG9yIH0gZnJvbSAnLi9wYXJ0aWNsZSdcbmltcG9ydCB7IGlzQ29sbGlkaW5nIH0gZnJvbSAnLi9jb2xsaXNpb24nXG5pbXBvcnQgeyByYW5kb20gfSBmcm9tICcuL3JhbmRvbSdcbmltcG9ydCBDaXJjbGUgZnJvbSAnLi9jaXJjbGUnXG5cbmNsYXNzIFRocnVzdEdlbmVyYXRvciBpbXBsZW1lbnRzIFBhcnRpY2xlR2VuZXJhdG9yPEdsb2JhbFN0YXRlPiB7XG4gIHByaXZhdGUgX3JvdGF0aW9uT2Zmc2V0OiBudW1iZXJcblxuICBjb25zdHJ1Y3RvciAocm90YXRpb25PZmZzZXQ6IG51bWJlciA9IDApIHtcbiAgICB0aGlzLl9yb3RhdGlvbk9mZnNldCA9IHJvdGF0aW9uT2Zmc2V0XG4gIH1cblxuICBwcml2YXRlIHRleDogVGV4dHVyZSA9IG5ldyBUZXh0dXJlKCdhc3NldHMvU21va2UucG5nJywgbmV3IFZlY3RvcjIoMzIsIDMyKSlcbiAgcHJpdmF0ZSBfc2l6ZTogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKDAuNDI1LCAwLjQyNSlcbiAgdGV4dHVyZSAoXzogR2xvYmFsU3RhdGUpOiBUZXh0dXJlIHtcbiAgICByZXR1cm4gdGhpcy50ZXhcbiAgfVxuICBzaXplIChzdGF0ZTogR2xvYmFsU3RhdGUpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5fc2l6ZVxuICB9XG4gIHZlbG9jaXR5IChzdGF0ZTogR2xvYmFsU3RhdGUpOiBWZWN0b3IyIHtcbiAgICBsZXQgdiA9IHN0YXRlLmxhbmRlci5yb3RhdGlvblZlY3RvclxuICAgIGxldCByb3RhdGlvbiA9IHJhbmRvbS5nYXVzc2lhbigxMikgKiAxMDBcbiAgICB2ID0gdi5yb3RhdGUocm90YXRpb24gKyB0aGlzLl9yb3RhdGlvbk9mZnNldClcbiAgICB2ID0gdi5zY2FsZSgtNSAqIHJhbmRvbS5nYXVzc2lhbigxMikpXG4gICAgcmV0dXJuIHZcbiAgfVxuICBsaWZldGltZSAoc3RhdGU6IEdsb2JhbFN0YXRlKTogbnVtYmVyIHtcbiAgICByZXR1cm4gNSArIHJhbmRvbS5nYXVzc2lhbigxMilcbiAgfVxuICByb3RhdGlvbiAoc3RhdGU6IEdsb2JhbFN0YXRlKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMFxuICB9XG59XG5jbGFzcyBFeHBsb3Npb25HZW5lcmF0b3IgaW1wbGVtZW50cyBQYXJ0aWNsZUdlbmVyYXRvcjxHbG9iYWxTdGF0ZT4ge1xuICBwcml2YXRlIHRleDogVGV4dHVyZSA9IG5ldyBUZXh0dXJlKCdhc3NldHMvRmlyZS5wbmcnLCBuZXcgVmVjdG9yMigzMiwgMzIpKVxuICBwcml2YXRlIF9zaXplOiBWZWN0b3IyID0gbmV3IFZlY3RvcjIoMC40MjUsIDAuNDI1KVxuICB0ZXh0dXJlIChfOiBHbG9iYWxTdGF0ZSk6IFRleHR1cmUge1xuICAgIHJldHVybiB0aGlzLnRleFxuICB9XG4gIHNpemUgKHN0YXRlOiBHbG9iYWxTdGF0ZSk6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLl9zaXplXG4gIH1cbiAgdmVsb2NpdHkgKHN0YXRlOiBHbG9iYWxTdGF0ZSk6IFZlY3RvcjIge1xuICAgIGxldCB2ID0gc3RhdGUubGFuZGVyLnJvdGF0aW9uVmVjdG9yXG4gICAgbGV0IHJvdGF0aW9uID0gTWF0aC5yYW5kb20oKSAqIDM2MFxuICAgIHYgPSB2LnJvdGF0ZShyb3RhdGlvbilcbiAgICB2ID0gdi5zY2FsZSgtMjAgKiByYW5kb20uZ2F1c3NpYW4oMTIpKVxuICAgIHJldHVybiB2XG4gIH1cbiAgbGlmZXRpbWUgKHN0YXRlOiBHbG9iYWxTdGF0ZSk6IG51bWJlciB7XG4gICAgcmV0dXJuIDIgKyByYW5kb20uZ2F1c3NpYW4oMTIpXG4gIH1cbiAgcm90YXRpb24gKHN0YXRlOiBHbG9iYWxTdGF0ZSk6IG51bWJlciB7XG4gICAgcmV0dXJuIDBcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGFuZGVyIGltcGxlbWVudHMgRHJhd2FibGU8R2xvYmFsU3RhdGU+LCBUaWNraW5nPEdsb2JhbFN0YXRlPiB7XG4gIHByaXZhdGUgc2l6ZTogVmVjdG9yMlxuICBwcml2YXRlIHRleHR1cmU6IFRleHR1cmVcbiAgcHJpdmF0ZSBfZnJvemVuOiBib29sZWFuXG4gIHByaXZhdGUgdGhydXN0RW1pdHRlcjogUGFydGljbGVFbWl0dGVyPEdsb2JhbFN0YXRlPlxuICBwcml2YXRlIGxlZnRSb3RhdGlvbkVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcjxHbG9iYWxTdGF0ZT5cbiAgcHJpdmF0ZSByaWdodFJvdGF0aW9uRW1pdHRlcjogUGFydGljbGVFbWl0dGVyPEdsb2JhbFN0YXRlPlxuICBwcml2YXRlIGV4cGxvc2lvbkVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcjxHbG9iYWxTdGF0ZT5cbiAgcHJpdmF0ZSBfcG9zaXRpb246IFZlY3RvcjJcbiAgcHJpdmF0ZSBfdmVsb2NpdHk6IFZlY3RvcjJcbiAgcHJpdmF0ZSBfcm90YXRpb25WZWN0b3I6IFZlY3RvcjJcbiAgcHJpdmF0ZSBfcm90YXRpb246IG51bWJlclxuICBwcml2YXRlIF9leHBsb3Npb25Db3VudDogbnVtYmVyID0gMFxuICBwcml2YXRlIF9pc0V4cGxvZGluZzogYm9vbGVhbiA9IGZhbHNlXG5cbiAgZnVlbDogbnVtYmVyID0gMTAwXG4gIGNyYXNoZWQ6IGJvb2xlYW4gPSBmYWxzZVxuICB0aHJ1c3Rpbmc6IGJvb2xlYW4gPSBmYWxzZVxuICB0dXJuaW5nTGVmdDogYm9vbGVhbiA9IGZhbHNlXG4gIHR1cm5pbmdSaWdodDogYm9vbGVhbiA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IgKHBvc2l0aW9uOiBWZWN0b3IyLCB0ZXh0dXJlOiBUZXh0dXJlLCBzaXplOiBWZWN0b3IyKSB7XG4gICAgdGhpcy50ZXh0dXJlID0gdGV4dHVyZVxuICAgIHRoaXMuc2l6ZSA9IHNpemVcbiAgICB0aGlzLl9mcm96ZW4gPSBmYWxzZVxuICAgIHRoaXMuX3Bvc2l0aW9uID0gcG9zaXRpb25cbiAgICB0aGlzLl92ZWxvY2l0eSA9IG5ldyBWZWN0b3IyKDAsIDApXG4gICAgdGhpcy5fcm90YXRpb25WZWN0b3IgPSBuZXcgVmVjdG9yMigwLCAtMSlcbiAgICB0aGlzLl9yb3RhdGlvbiA9IDBcbiAgICB0aGlzLnRocnVzdEVtaXR0ZXIgPSBuZXcgUGFydGljbGVFbWl0dGVyKFxuICAgICAgbmV3IFRocnVzdEdlbmVyYXRvcigpLFxuICAgICAgc3RhdGUgPT4gc3RhdGUubGFuZGVyLnRocnVzdGluZyAmJiBzdGF0ZS5sYW5kZXIuZnVlbCA+IDAgJiYgIXRoaXMuX2Zyb3plbixcbiAgICAgIDAuMDMsXG4gICAgICA1XG4gICAgKVxuICAgIHRoaXMubGVmdFJvdGF0aW9uRW1pdHRlciA9IG5ldyBQYXJ0aWNsZUVtaXR0ZXIoXG4gICAgICBuZXcgVGhydXN0R2VuZXJhdG9yKDkwKSxcbiAgICAgIHN0YXRlID0+IHN0YXRlLmxhbmRlci50dXJuaW5nTGVmdCAmJiBzdGF0ZS5sYW5kZXIuZnVlbCA+IDAgJiYgIXRoaXMuX2Zyb3plbixcbiAgICAgIDAuMDMsXG4gICAgICAzXG4gICAgKVxuICAgIHRoaXMucmlnaHRSb3RhdGlvbkVtaXR0ZXIgPSBuZXcgUGFydGljbGVFbWl0dGVyKFxuICAgICAgbmV3IFRocnVzdEdlbmVyYXRvcigtOTApLFxuICAgICAgc3RhdGUgPT4gc3RhdGUubGFuZGVyLnR1cm5pbmdSaWdodCAmJiBzdGF0ZS5sYW5kZXIuZnVlbCA+IDAgJiYgIXRoaXMuX2Zyb3plbixcbiAgICAgIDAuMDMsXG4gICAgICAzXG4gICAgKVxuICAgIHRoaXMuZXhwbG9zaW9uRW1pdHRlciA9IG5ldyBQYXJ0aWNsZUVtaXR0ZXIoXG4gICAgICBuZXcgRXhwbG9zaW9uR2VuZXJhdG9yKCksXG4gICAgICBzdGF0ZSA9PiB0aGlzLl9pc0V4cGxvZGluZyxcbiAgICAgIDAuMDMsXG4gICAgICAyMDBcbiAgICApXG4gICAgdGhpcy5wb3NpdGlvbkVtaXR0ZXJzKClcbiAgfVxuXG4gIGRyYXcgKFxuICAgIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICBzdGF0ZTogR2xvYmFsU3RhdGUsXG4gICAgY29vcmRpbmF0ZXM6IENvb3JkaW5hdGVUcmFuc2xhdGFibGVcbiAgKSB7XG4gICAgaWYgKCFzdGF0ZS5sYW5kZXIuY3Jhc2hlZCkge1xuICAgICAgZHJhd1RleHR1cmUoXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIHRoaXMudGV4dHVyZSxcbiAgICAgICAgY29vcmRpbmF0ZXMudHJhbnNsYXRlKHRoaXMuX3Bvc2l0aW9uKSxcbiAgICAgICAgY29vcmRpbmF0ZXMudHJhbnNsYXRlKHRoaXMuc2l6ZSksXG4gICAgICAgIHRoaXMuX3JvdGF0aW9uXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMudGhydXN0RW1pdHRlci5kcmF3KGNvbnRleHQsIHN0YXRlLCBjb29yZGluYXRlcylcbiAgICB0aGlzLmxlZnRSb3RhdGlvbkVtaXR0ZXIuZHJhdyhjb250ZXh0LCBzdGF0ZSwgY29vcmRpbmF0ZXMpXG4gICAgdGhpcy5yaWdodFJvdGF0aW9uRW1pdHRlci5kcmF3KGNvbnRleHQsIHN0YXRlLCBjb29yZGluYXRlcylcbiAgICB0aGlzLmV4cGxvc2lvbkVtaXR0ZXIuZHJhdyhjb250ZXh0LCBzdGF0ZSwgY29vcmRpbmF0ZXMpXG4gICAgLy8gdGhpcy5kZWJ1Z0RyYXcoY29udGV4dCwgc3RhdGUsIGNvb3JkaW5hdGVzKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVidWdEcmF3IChcbiAgICBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgc3RhdGU6IEdsb2JhbFN0YXRlLFxuICAgIGNvb3JkaW5hdGVzOiBDb29yZGluYXRlVHJhbnNsYXRhYmxlXG4gICkge1xuICAgIC8vIERlYnVnIGNvbGxpc2lvblxuICAgIGNvbnRleHQuYmVnaW5QYXRoKClcbiAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyNmZmZmZmYnXG4gICAgbGV0IGNpcmNsZXBvcyA9IGNvb3JkaW5hdGVzLnRyYW5zbGF0ZSh0aGlzLl9wb3NpdGlvbilcbiAgICBjb250ZXh0LmFyYyhcbiAgICAgIGNpcmNsZXBvcy54LFxuICAgICAgY2lyY2xlcG9zLnksXG4gICAgICBjb29yZGluYXRlcy50cmFuc2xhdGUobmV3IFZlY3RvcjIoNCwgMCkpLngsXG4gICAgICAwLFxuICAgICAgTWF0aC5QSSAqIDJcbiAgICApXG4gICAgY29udGV4dC5zdHJva2UoKVxuICAgIGxldCBhZGpQb3MgPSBjb29yZGluYXRlcy50cmFuc2xhdGUodGhpcy5fcG9zaXRpb24pXG5cbiAgICAvLyBEZWJ1ZyByb3RhdGlvblxuICAgIGxldCBhZGpWZWMgPSBjb29yZGluYXRlcy50cmFuc2xhdGUodGhpcy5fcm90YXRpb25WZWN0b3Iuc2NhbGUoNSkpXG4gICAgY29udGV4dC5iZWdpblBhdGgoKVxuICAgIGlmICh0aGlzLl9yb3RhdGlvbiAlIDM2MCA8IDUgJiYgdGhpcy5fcm90YXRpb24gJSAzNjAgPiAtNSkge1xuICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9ICcjMDBmZjAwJ1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyNmZjAwMDAnXG4gICAgfVxuICAgIGNvbnRleHQubGluZVRvKGFkalBvcy54LCBhZGpQb3MueSlcbiAgICBjb250ZXh0LmxpbmVUbyhhZGpQb3MueCArIGFkalZlYy54LCBhZGpQb3MueSArIGFkalZlYy55KVxuICAgIGNvbnRleHQuc3Ryb2tlKClcblxuICAgIC8vIERlYnVnIHZlbG9jaXR5XG4gICAgbGV0IHZlbG9jaXR5ID0gY29vcmRpbmF0ZXMudHJhbnNsYXRlKHRoaXMuX3ZlbG9jaXR5Lm5vcm1hbGl6ZSgpLnNjYWxlKDUpKVxuICAgIGNvbnRleHQuYmVnaW5QYXRoKClcbiAgICBpZiAodGhpcy5fdmVsb2NpdHkuc3FyTWFnbml0dWRlKCkgPCA0KSB7XG4gICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyMwMDAwZmYnXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnI2ZmMDAwMCdcbiAgICB9XG4gICAgY29udGV4dC5saW5lVG8oYWRqUG9zLngsIGFkalBvcy55KVxuICAgIGNvbnRleHQubGluZVRvKGFkalBvcy54ICsgdmVsb2NpdHkueCwgYWRqUG9zLnkgKyB2ZWxvY2l0eS55KVxuICAgIGNvbnRleHQuc3Ryb2tlKClcbiAgfVxuXG4gIHBvc2l0aW9uRW1pdHRlcnMgKCk6IHZvaWQge1xuICAgIHRoaXMudGhydXN0RW1pdHRlci5wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChcbiAgICAgIHRoaXMuX3JvdGF0aW9uVmVjdG9yLnNjYWxlKC0xLjUpXG4gICAgKVxuICAgIHRoaXMubGVmdFJvdGF0aW9uRW1pdHRlci5wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChcbiAgICAgIHRoaXMuX3JvdGF0aW9uVmVjdG9yLnJvdGF0ZSg3MCkuc2NhbGUoLTEuNzUpXG4gICAgKVxuICAgIHRoaXMucmlnaHRSb3RhdGlvbkVtaXR0ZXIucG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoXG4gICAgICB0aGlzLl9yb3RhdGlvblZlY3Rvci5yb3RhdGUoLTcwKS5zY2FsZSgtMS43NSlcbiAgICApXG4gICAgdGhpcy5leHBsb3Npb25FbWl0dGVyLnBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb25cbiAgfVxuXG4gIHVwZGF0ZSAoZGVsdGE6IG51bWJlciwgc3RhdGU6IEdsb2JhbFN0YXRlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2lzRXhwbG9kaW5nKSB7XG4gICAgICBjb25zb2xlLmxvZygnRXhwbG9zaW9uJylcbiAgICAgIHRoaXMuX2V4cGxvc2lvbkNvdW50KytcbiAgICB9XG4gICAgaWYgKHRoaXMuX2V4cGxvc2lvbkNvdW50ID4gNSkge1xuICAgICAgdGhpcy5faXNFeHBsb2RpbmcgPSBmYWxzZVxuICAgICAgdGhpcy5fZXhwbG9zaW9uQ291bnQgPSAwXG4gICAgfVxuICAgIHRoaXMudGhydXN0RW1pdHRlci51cGRhdGUoZGVsdGEsIHN0YXRlKVxuICAgIHRoaXMubGVmdFJvdGF0aW9uRW1pdHRlci51cGRhdGUoZGVsdGEsIHN0YXRlKVxuICAgIHRoaXMucmlnaHRSb3RhdGlvbkVtaXR0ZXIudXBkYXRlKGRlbHRhLCBzdGF0ZSlcbiAgICB0aGlzLmV4cGxvc2lvbkVtaXR0ZXIudXBkYXRlKGRlbHRhLCBzdGF0ZSlcbiAgICBpZiAoIXRoaXMuX2Zyb3plbikge1xuICAgICAgaWYgKHRoaXMudHVybmluZ0xlZnQgJiYgdGhpcy5mdWVsID4gMCkge1xuICAgICAgICB0aGlzLnJvdGF0ZShkZWx0YSwgc3RhdGUsIC0xKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMudHVybmluZ1JpZ2h0ICYmIHRoaXMuZnVlbCA+IDApIHtcbiAgICAgICAgdGhpcy5yb3RhdGUoZGVsdGEsIHN0YXRlLCAxKVxuICAgICAgfVxuICAgICAgdGhpcy5fdmVsb2NpdHkgPSB0aGlzLl92ZWxvY2l0eS5hZGQoc3RhdGUuY29uZmlnLmdyYXZpdHkuc2NhbGUoZGVsdGEpKVxuICAgICAgaWYgKHRoaXMudGhydXN0aW5nICYmIHRoaXMuZnVlbCA+IDApIHtcbiAgICAgICAgdGhpcy5fdmVsb2NpdHkgPSB0aGlzLl92ZWxvY2l0eS5hZGQoXG4gICAgICAgICAgdGhpcy5fcm90YXRpb25WZWN0b3Iuc2NhbGUoZGVsdGEgKiBzdGF0ZS5jb25maWcudGhydXN0Q29lZmZpY2llbnQpXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5mdWVsIC09IHN0YXRlLmNvbmZpZy5mdWVsQ29uc3VtcHRpb24gKiBkZWx0YVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZnVlbCA8IDApIHtcbiAgICAgICAgdGhpcy5mdWVsID0gMFxuICAgICAgICBzdGF0ZS5jb21tYW5kcy5leGVjdXRlKCdmdWVsRXhwaXJlZCcsIHN0YXRlKVxuICAgICAgfVxuICAgICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQodGhpcy5fdmVsb2NpdHkuc2NhbGUoZGVsdGEpKVxuICAgICAgdGhpcy5wb3NpdGlvbkVtaXR0ZXJzKClcbiAgICAgIC8vIHRoaXMudGhydXN0RW1pdHRlci51cGRhdGUoZGVsdGEsIHN0YXRlKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUudGVycmFpbi5wb2ludHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBpc0NvbGxpZGluZyhcbiAgICAgICAgICAgIG5ldyBDaXJjbGUodGhpcy5fcG9zaXRpb24sIDIpLFxuICAgICAgICAgICAgc3RhdGUudGVycmFpbi5wb2ludHNbaV0sXG4gICAgICAgICAgICBzdGF0ZS50ZXJyYWluLnBvaW50c1tpICsgMV1cbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMudmVsb2NpdHkuc3FyTWFnbml0dWRlKCkgPD0gNCAmJlxuICAgICAgICAgICAgKHRoaXMucm90YXRpb24gPCA1IHx8IHRoaXMucm90YXRpb24gPiAzNTUpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHN0YXRlLnNhZmVab25lcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgc3RhdGUudGVycmFpbi5wb2ludHNbaV0gPT0gc3RhdGUuc2FmZVpvbmVzW2pdWzBdICYmXG4gICAgICAgICAgICAgICAgc3RhdGUudGVycmFpbi5wb2ludHNbaSArIDFdID09IHN0YXRlLnNhZmVab25lc1tqXVsxXVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5jb21tYW5kcy5leGVjdXRlKCdzYWZlTGFuZGluZycsIHN0YXRlKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YXRlLmNvbW1hbmRzLmV4ZWN1dGUoJ2NyYXNoTGFuZGluZycsIHN0YXRlKVxuICAgICAgICAgIHRoaXMuX2lzRXhwbG9kaW5nID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54ID4gc3RhdGUuY29uZmlnLndvcmxkU2l6ZS54ICsgMTAgfHxcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54IDwgLTEwIHx8XG4gICAgICAgIHRoaXMucG9zaXRpb24ueSA+IHN0YXRlLmNvbmZpZy53b3JsZFNpemUueSArIDEwXG4gICAgICApIHtcbiAgICAgICAgc3RhdGUuY29tbWFuZHMuZXhlY3V0ZSgnY3Jhc2hMYW5kaW5nJywgc3RhdGUpXG4gICAgICAgIHRoaXMuX2lzRXhwbG9kaW5nID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcm90YXRlIChkZWx0YTogbnVtYmVyLCBzdGF0ZTogR2xvYmFsU3RhdGUsIGRpcmVjdGlvbjogbnVtYmVyKSB7XG4gICAgdGhpcy5mdWVsIC09IHN0YXRlLmNvbmZpZy5mdWVsQ29uc3VtcHRpb24gKiBkZWx0YSAqIDAuNVxuICAgIHRoaXMuX3JvdGF0aW9uICs9IGRpcmVjdGlvbiAqIHN0YXRlLmNvbmZpZy50aGV0YSAqIGRlbHRhXG4gICAgdGhpcy5fcm90YXRpb25WZWN0b3IgPSB0aGlzLl9yb3RhdGlvblZlY3Rvci5yb3RhdGUoXG4gICAgICBkaXJlY3Rpb24gKiBzdGF0ZS5jb25maWcudGhldGEgKiBkZWx0YVxuICAgIClcbiAgfVxuXG4gIGdldCB2ZWxvY2l0eSAoKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuX3ZlbG9jaXR5XG4gIH1cblxuICBnZXQgcm90YXRpb24gKCk6IG51bWJlciB7XG4gICAgcmV0dXJuICgodGhpcy5fcm90YXRpb24gJSAzNjApICsgMzYwKSAlIDM2MFxuICB9XG5cbiAgZ2V0IHJvdGF0aW9uVmVjdG9yICgpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5fcm90YXRpb25WZWN0b3JcbiAgfVxuXG4gIGdldCBwb3NpdGlvbiAoKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uXG4gIH1cblxuICBwdWJsaWMgZnJlZXplICgpIHtcbiAgICB0aGlzLl9mcm96ZW4gPSB0cnVlXG4gICAgdGhpcy5fdmVsb2NpdHkgPSBWZWN0b3IyLlpFUk9cbiAgfVxuXG4gIHB1YmxpYyBnZXQgZnJvemVuKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Zyb3plbjtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29tbWFuZFNlcnZpY2UgfSBmcm9tIFwiLi9jb21tYW5kXCI7XG5cbmludGVyZmFjZSBNb2RpZmllcnMge1xuICBhbHQ6IGJvb2xlYW47XG4gIHNoaWZ0OiBib29sZWFuO1xuICBjdHJsOiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgS2V5UmVzcG9uc2Uge1xuICAocHJlc3NlZDogYm9vbGVhbiwgdGltZURlbHRhOiBudW1iZXIsIG1vZGlmaWVyczogTW9kaWZpZXJzKTogdm9pZDtcbn1cblxuY2xhc3MgS2V5SGFuZGxlciB7XG4gIHByaXZhdGUgX3dhc1ByZXNzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfbGFzdFByZXNzZWQ6IG51bWJlciA9IERhdGUubm93KCk7XG4gIHByaXZhdGUgX29uU3RhdGVDaGFuZ2VkOiBTZXQ8S2V5UmVzcG9uc2U+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIF9vbktleVVwOiBTZXQ8S2V5UmVzcG9uc2U+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIF9vbktleURvd246IFNldDxLZXlSZXNwb25zZT4gPSBuZXcgU2V0KCk7XG5cbiAgdXBkYXRlKHByZXNzZWQ6IGJvb2xlYW4sIG1vZGlmaWVyczogTW9kaWZpZXJzKSB7XG4gICAgaWYgKHRoaXMuX3dhc1ByZXNzZWQgIT0gcHJlc3NlZCkge1xuICAgICAgLy8gSW5pdCBzZXRcbiAgICAgIGxldCBzZXQ7XG4gICAgICBpZiAocHJlc3NlZCkge1xuICAgICAgICBzZXQgPSB0aGlzLl9vbktleURvd247XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXQgPSB0aGlzLl9vbktleVVwO1xuICAgICAgfVxuXG4gICAgICAvLyBUaW1lIGRlbHRhXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgICAvLyBIYW5kbGVyc1xuICAgICAgZm9yIChsZXQgcmVzIG9mIHNldCkge1xuICAgICAgICByZXMocHJlc3NlZCwgbm93IC0gdGhpcy5fbGFzdFByZXNzZWQsIG1vZGlmaWVycyk7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCByZXMgb2YgdGhpcy5fb25TdGF0ZUNoYW5nZWQpIHtcbiAgICAgICAgcmVzKHByZXNzZWQsIG5vdyAtIHRoaXMuX2xhc3RQcmVzc2VkLCBtb2RpZmllcnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGVzXG4gICAgICB0aGlzLl9sYXN0UHJlc3NlZCA9IG5vdztcbiAgICAgIHRoaXMuX3dhc1ByZXNzZWQgPSAhdGhpcy5fd2FzUHJlc3NlZDtcbiAgICB9XG4gIH1cblxuICBhZGRVcChhY3Rpb246IEtleVJlc3BvbnNlKSB7XG4gICAgdGhpcy5fb25LZXlVcC5hZGQoYWN0aW9uKTtcbiAgfVxuICBhZGREb3duKGFjdGlvbjogS2V5UmVzcG9uc2UpIHtcbiAgICB0aGlzLl9vbktleURvd24uYWRkKGFjdGlvbik7XG4gIH1cbiAgYWRkQ2hhbmdlZChhY3Rpb246IEtleVJlc3BvbnNlKSB7XG4gICAgdGhpcy5fb25TdGF0ZUNoYW5nZWQuYWRkKGFjdGlvbik7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEtleU1hbmFnZXIge1xuICBwcml2YXRlIGhhbmRsZXJzOiBNYXA8c3RyaW5nLCBLZXlIYW5kbGVyPjtcbiAgcHJpdmF0ZSBkZXNjcmlwdGlvbnM6IE1hcDxzdHJpbmcsIHN0cmluZz47XG4gIHB1YmxpYyByZWdpc3RlckhhbmRsZXIoa2V5Q29kZTogc3RyaW5nLCBkZXNjcmlwdGlvbj86IHN0cmluZykge1xuICAgIGlmICghdGhpcy5oYW5kbGVycy5oYXMoa2V5Q29kZSkpIHtcbiAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGtleUNvZGUsIG5ldyBLZXlIYW5kbGVyKCkpO1xuICAgICAgdGhpcy5kZXNjcmlwdGlvbnM/LnNldChrZXlDb2RlLCBkZXNjcmlwdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihgS2V5IGhhbmRsZXIgcmVnaXN0ZXJlZCB0d2ljZSBmb3Iga2V5Q29kZSAke2tleUNvZGV9YCk7XG4gICAgfVxuICB9XG4gIGJpbmRVcChrZXlDb2RlOiBzdHJpbmcsIHVwZGF0ZUZuOiBLZXlSZXNwb25zZSkge1xuICAgIHRoaXMuaGFuZGxlcnMuZ2V0KGtleUNvZGUpLmFkZFVwKHVwZGF0ZUZuKTtcbiAgfVxuICBiaW5kRG93bihrZXlDb2RlOiBzdHJpbmcsIHVwZGF0ZUZuOiBLZXlSZXNwb25zZSkge1xuICAgIHRoaXMuaGFuZGxlcnMuZ2V0KGtleUNvZGUpLmFkZERvd24odXBkYXRlRm4pO1xuICB9XG4gIGJpbmRDaGFuZ2VkKGtleUNvZGU6IHN0cmluZywgdXBkYXRlRm46IEtleVJlc3BvbnNlKSB7XG4gICAgdGhpcy5oYW5kbGVycy5nZXQoa2V5Q29kZSkuYWRkQ2hhbmdlZCh1cGRhdGVGbik7XG4gIH1cbiAgdXBkYXRlRG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmICh0aGlzLmhhbmRsZXJzLmhhcyhldmVudC5rZXkpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50LmtleSk7XG4gICAgICBoYW5kbGVyLnVwZGF0ZSh0cnVlLCB7XG4gICAgICAgIGFsdDogZXZlbnQuYWx0S2V5LFxuICAgICAgICBzaGlmdDogZXZlbnQuc2hpZnRLZXksXG4gICAgICAgIGN0cmw6IGV2ZW50LmN0cmxLZXksXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVVcChldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmICh0aGlzLmhhbmRsZXJzLmhhcyhldmVudC5rZXkpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50LmtleSk7XG4gICAgICBoYW5kbGVyLnVwZGF0ZShmYWxzZSwge1xuICAgICAgICBhbHQ6IGV2ZW50LmFsdEtleSxcbiAgICAgICAgc2hpZnQ6IGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICBjdHJsOiBldmVudC5jdHJsS2V5LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGNsZWFyKCkge1xuICAgIHRoaXMuaGFuZGxlcnMgPSBuZXcgTWFwKCk7XG4gIH1cblxuICByZW1vdmUoa2V5Y29kZTogc3RyaW5nKSB7XG4gICAgdGhpcy5oYW5kbGVycy5kZWxldGUoa2V5Y29kZSk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy51cGRhdGVEb3duLmJpbmQodGhpcykpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy51cGRhdGVVcC5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmhhbmRsZXJzID0gbmV3IE1hcDxzdHJpbmcsIEtleUhhbmRsZXI+KCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hcFRvQ29tbWFuZHM8VD4oa2V5TWFuYWdlcjogS2V5TWFuYWdlciwgY29tbWFuZHM6IENvbW1hbmRTZXJ2aWNlPFQ+LCBjb21tYW5kTmFtZTogc3RyaW5nLCBrZXlOYW1lOiBzdHJpbmcsIHN0YXRlOiBUKSB7XG4gICAga2V5TWFuYWdlci5yZWdpc3RlckhhbmRsZXIoa2V5TmFtZSwgY29tbWFuZE5hbWUpO1xuICAgIGlmIChjb21tYW5kcy5oYXMoYGJlZ2luJHtjb21tYW5kTmFtZX1gKSkge1xuICAgICAgICBrZXlNYW5hZ2VyLmJpbmREb3duKGtleU5hbWUsICgpID0+IGNvbW1hbmRzLmV4ZWN1dGUoYGJlZ2luJHtjb21tYW5kTmFtZX1gLCBzdGF0ZSkpO1xuICAgIH1cbiAgICBpZiAoY29tbWFuZHMuaGFzKGBlbmQke2NvbW1hbmROYW1lfWApKSB7XG4gICAgICAgIGtleU1hbmFnZXIuYmluZFVwKGtleU5hbWUsICgpID0+IGNvbW1hbmRzLmV4ZWN1dGUoYGVuZCR7Y29tbWFuZE5hbWV9YCwgc3RhdGUpKTtcbiAgICB9XG4gICAgaWYgKGNvbW1hbmRzLmhhcyhgdG9nZ2xlJHtjb21tYW5kTmFtZX1gKSkge1xuICAgICAgICBrZXlNYW5hZ2VyLmJpbmRDaGFuZ2VkKGtleU5hbWUsICgpID0+IGNvbW1hbmRzLmV4ZWN1dGUoYHRvZ2dsZSR7Y29tbWFuZE5hbWV9YCwgc3RhdGUpKTtcbiAgICB9XG59IiwiaW50ZXJmYWNlIENvbW1hbmRSdW5uYWJsZTxUPiB7XG4gIChzdGF0ZTogVCk6IHZvaWQ7XG59XG5cbmNsYXNzIENvbW1hbmQ8VD4ge1xuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgX2FjdGlvbjogQ29tbWFuZFJ1bm5hYmxlPFQ+O1xuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGFjdGlvbjogQ29tbWFuZFJ1bm5hYmxlPFQ+KSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fYWN0aW9uID0gYWN0aW9uO1xuICB9XG5cbiAgcHVibGljIGdldCBuYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gIH1cblxuICBwdWJsaWMgaW52b2tlKHN0YXRlOiBUKTogdm9pZCB7XG4gICAgdGhpcy5fYWN0aW9uKHN0YXRlKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29tbWFuZFNlcnZpY2U8VD4ge1xuICBwcml2YXRlIGNvbW1hbmRzOiBNYXA8c3RyaW5nLCBDb21tYW5kPFQ+PjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbW1hbmRzID0gbmV3IE1hcDxzdHJpbmcsIENvbW1hbmQ8VD4+KCk7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlQ29tbWFuZChuYW1lOiBzdHJpbmcsIGFjdGlvbjogQ29tbWFuZFJ1bm5hYmxlPFQ+KTogdm9pZCB7XG4gICAgdGhpcy5jb21tYW5kcy5zZXQobmFtZSwgbmV3IENvbW1hbmQobmFtZSwgYWN0aW9uKSk7XG4gIH1cblxuICBwdWJsaWMgaGFzKG5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZHMuaGFzKG5hbWUpO1xuICB9XG5cbiAgcHVibGljIGV4ZWN1dGUobmFtZTogc3RyaW5nLCBzdGF0ZTogVCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbW1hbmRzLmhhcyhuYW1lKSkge1xuICAgICAgdGhpcy5jb21tYW5kcy5nZXQobmFtZSkuaW52b2tlKHN0YXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKGBBdHRlbXB0aW5nIHRvIGludm9rZSBub24tZXhpc3RlbnQgY29tbWFuZCAke25hbWV9YCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5pbXBvcnQgeyByYW5kb20gfSBmcm9tIFwiLi9yYW5kb21cIjtcbmltcG9ydCB7IENvb3JkaW5hdGVUcmFuc2xhdGFibGUgfSBmcm9tIFwiLi9jb29yZGluYXRlXCI7XG5pbXBvcnQgeyBHbG9iYWxTdGF0ZSB9IGZyb20gXCIuL3N0YXRlXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3VGVycmFpbihcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gIHN0YXRlOiBHbG9iYWxTdGF0ZSxcbiAgdmNzOiBDb29yZGluYXRlVHJhbnNsYXRhYmxlLFxuKSB7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4LmxpbmVUbyh2Y3MudHJhbnNsYXRlVmFsdWVYKDApLCB2Y3MudHJhbnNsYXRlVmFsdWVZKHN0YXRlLmNvbmZpZy53b3JsZFNpemUueSkpO1xuXG4gIHZhciBncmQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgMCwgMTAwMCk7XG4gIGdyZC5hZGRDb2xvclN0b3AoMCwgXCIjZmZmZmZmXCIpO1xuICBncmQuYWRkQ29sb3JTdG9wKDEsIFwiIzc3Nzc3N1wiKTtcblxuICBmb3IgKGxldCBpID0gMTsgaSA8IHN0YXRlLnRlcnJhaW4ucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHB0ID0gdmNzLnRyYW5zbGF0ZShzdGF0ZS50ZXJyYWluLnBvaW50c1tpXSk7XG4gICAgY3R4LmxpbmVUbyhwdC54LCBwdC55KTtcbiAgfVxuICBjdHgubGluZVRvKHZjcy50cmFuc2xhdGVWYWx1ZVgoc3RhdGUuY29uZmlnLndvcmxkU2l6ZS54KSwgdmNzLnRyYW5zbGF0ZVZhbHVlWShzdGF0ZS5jb25maWcud29ybGRTaXplLnkpKTtcbiAgY3R4LmZpbGxTdHlsZSA9IGdyZDtcbiAgY3R4LmZpbGwoKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLnNhZmVab25lcy5sZW5ndGg7IGkrKykge1xuICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiI2Y2OTIwNVwiXG4gICAgY3R4LmxpbmVXaWR0aCA9IHZjcy50cmFuc2xhdGVWYWx1ZVkoMC41KTtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgbGV0IFtwdDEsIHB0Ml0gPSBzdGF0ZS5zYWZlWm9uZXNbaV0ubWFwKHZjcy50cmFuc2xhdGUpO1xuICAgIGN0eC5saW5lVG8ocHQxLngsIHB0MS55KTtcbiAgICBjdHgubGluZVRvKHB0Mi54LCBwdDIueSk7XG4gICAgY3R4LnN0cm9rZSgpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUZXJyYWluIHtcbiAgcG9pbnRzOiBBcnJheTxWZWN0b3IyPjtcbiAgY29uc3RydWN0b3IoaXRlcmF0aW9uczogbnVtYmVyLCByb3VnaG5lc3M6IG51bWJlciwgcDE6IFZlY3RvcjIsIHAyOiBWZWN0b3IyKSB7XG4gICAgdGhpcy5wb2ludHMgPSBbcDEsIHAyXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgbGV0IHNhdmVkTGVuZ3RoID0gdGhpcy5wb2ludHMubGVuZ3RoO1xuICAgICAgcm91Z2huZXNzIC89IDI7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNhdmVkTGVuZ3RoIC0gMTsgaisrKSB7XG4gICAgICAgIGxldCBtaWQgPSBuZXcgVmVjdG9yMihcbiAgICAgICAgICAodGhpcy5wb2ludHNbaiAqIDJdLnggKyB0aGlzLnBvaW50c1tqICogMiArIDFdLngpIC8gMixcbiAgICAgICAgICAodGhpcy5wb2ludHNbaiAqIDJdLnkgKyB0aGlzLnBvaW50c1tqICogMiArIDFdLnkpIC8gMlxuICAgICAgICApO1xuICAgICAgICBtaWQgPSBtaWQuYWRkKG5ldyBWZWN0b3IyKDAsIHJhbmRvbS5nYXVzc2lhbigxMikgKiByb3VnaG5lc3MpKTtcbiAgICAgICAgdGhpcy5wb2ludHMuc3BsaWNlKGogKiAyICsgMSwgMCwgbWlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpbnNlcnRTYWZlWm9uZShtaW5YOiBudW1iZXIsIG1heFg6IG51bWJlciwgd2lkdGg6IG51bWJlcikge1xuICAgIGxldCB0YXJnZXRYTWluID0gbWluWCArIHdpZHRoIC8gMjtcbiAgICBsZXQgdGFyZ2V0WE1heCA9IG1heFggLSB3aWR0aCAvIDI7XG4gICAgbGV0IGRpZmYgPSB0YXJnZXRYTWF4IC0gdGFyZ2V0WE1pbjtcbiAgICBsZXQgb2Zmc2V0ID0gdGFyZ2V0WE1pbiArIGRpZmYgKiBNYXRoLnJhbmRvbSgpO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgcG9pbnQgPSB0aGlzLnBvaW50c1swXTtcbiAgICB3aGlsZSAocG9pbnQueCA8IG9mZnNldCkge1xuICAgICAgcG9pbnQgPSB0aGlzLnBvaW50c1srK2ldO1xuICAgIH1cbiAgICBsZXQgc2F2ZWQgPSBwb2ludDtcbiAgICBpKys7XG4gICAgcG9pbnQgPSB0aGlzLnBvaW50c1tpXTtcbiAgICBsZXQgeCA9IDA7XG4gICAgd2hpbGUgKHBvaW50LnggPCBvZmZzZXQgKyB3aWR0aCkge1xuICAgICAgeCA9IHBvaW50Lng7XG4gICAgICB0aGlzLnBvaW50cy5zcGxpY2UoaSwgMSk7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuICAgIH1cbiAgICB0aGlzLnBvaW50c1tpXSA9IG5ldyBWZWN0b3IyKHgsIHNhdmVkLnkpO1xuICAgIHJldHVybiBbc2F2ZWQsIHRoaXMucG9pbnRzW2ldXTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNvdW5kRWZmZWN0IHtcbiAgICBwcml2YXRlIGVsOiBIVE1MQXVkaW9FbGVtZW50O1xuICAgIHByaXZhdGUgcmVhZHkgPSBmYWxzZTtcbiAgICBwcml2YXRlIGNvbnRpbnVlID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBsb29wID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfcGxheWluZyA9IGZhbHNlO1xuICAgIHByaXZhdGUgY3V0b2ZmID0gMDtcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2U6IHN0cmluZywgY3V0b2ZmPzogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZWwgPSBuZXcgQXVkaW8oc291cmNlKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWFkeSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3V0b2ZmKSB7XG4gICAgICAgICAgICB0aGlzLmxvb3AgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jdXRvZmYgPSBjdXRvZmY7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwbGF5KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsLnBsYXkoKTtcbiAgICAgICAgdGhpcy5jb250aW51ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuX3BsYXlpbmcgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5sb29wKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtpZighdGhpcy5jb250aW51ZSkgcmV0dXJuOyB0aGlzLmVsLmN1cnJlbnRUaW1lID0gMDsgdGhpcy5wbGF5UmVjKCl9LCB0aGlzLmN1dG9mZiAqIDEwMDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLl9wbGF5aW5nID0gZmFsc2UsIHRoaXMuZWwuZHVyYXRpb24gKiAxMDAwKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGxheVJlYygpOiB2b2lkIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7aWYoIXRoaXMuY29udGludWUpIHJldHVybjsgdGhpcy5lbC5jdXJyZW50VGltZSA9IDA7IHRoaXMucGxheVJlYygpfSwgdGhpcy5jdXRvZmYgKiAxMDAwKTtcbiAgICB9XG5cbiAgICBzdG9wKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsLnBhdXNlKCk7XG4gICAgICAgIHRoaXMuY29udGludWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVsLmN1cnJlbnRUaW1lID0gMDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHBsYXlpbmcoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wbGF5aW5nO1xuICAgIH1cbn0iLCJpbXBvcnQgVmVjdG9yMiBmcm9tICcuL3ZlY3RvcjInXG5pbXBvcnQgeyBkcmF3VGV4dHVyZSwgVGV4dHVyZSB9IGZyb20gJy4vdGV4dHVyZSdcbmltcG9ydCBEcmF3YWJsZSBmcm9tICcuL2RyYXdhYmxlJ1xuaW1wb3J0IFRpY2tpbmcgZnJvbSAnLi90aWNraW5nJ1xuaW1wb3J0IHsgVmlydHVhbENvb3JkaW5hdGVTeXN0ZW0gfSBmcm9tICcuL2Nvb3JkaW5hdGUnXG5pbXBvcnQgeyBHbG9iYWxTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgeyBMYW5kZXIgfSBmcm9tICcuL2xhbmRlcidcbmltcG9ydCB7IEtleU1hbmFnZXIsIG1hcFRvQ29tbWFuZHMgfSBmcm9tICcuL2tleSdcbmltcG9ydCB7IENvbW1hbmRTZXJ2aWNlIH0gZnJvbSAnLi9jb21tYW5kJ1xuaW1wb3J0IHsgZHJhd1RlcnJhaW4sIFRlcnJhaW4gfSBmcm9tICcuL3RlcnJhaW4nXG5pbXBvcnQgeyBDb25kaXRpb25hbERyYXdhYmxlIH0gZnJvbSAnLi9jb25kaXRpb25hbERyYXdhYmxlJ1xuaW1wb3J0IHsgU291bmRFZmZlY3QgfSBmcm9tICcuL3NvdW5kJ1xuXG4vLyBHZW5lcmFsIFNldHVwXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnRcbmNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuY29uc3QgcmF0aW8gPSBuZXcgVmVjdG9yMig0LzMsIDEpO1xuY29uc3Qgd29ybGRTaXplID0gcmF0aW8uc2NhbGUoMTAwKTtcblxuY29uc3QgbGFuZGVyVGV4dHVyZSA9IG5ldyBUZXh0dXJlKCdhc3NldHMvTGFuZGVyLnBuZycsIG5ldyBWZWN0b3IyKDUwMCwgNTAwKSlcblxuLy8gVmlydHVhbCBTaXppbmdcbiAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIC8gcmF0aW8ueCA8IHdpbmRvdy5pbm5lckhlaWdodCAvIHJhdGlvLnkpIHtcbiAgICBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxuICAgIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJXaWR0aCAqIHJhdGlvLnkgLyByYXRpby54XG4gIH1cbiAgZWxzZSB7XG4gICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVySGVpZ2h0ICogcmF0aW8ueCAvIHJhdGlvLnlcbiAgICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0XG4gIH1cblxuICBsZXQgdmNzID0gbmV3IFZpcnR1YWxDb29yZGluYXRlU3lzdGVtKFxuICAgIGNhbnZhcy53aWR0aCAvIHdvcmxkU2l6ZS54LFxuICAgIGNhbnZhcy5oZWlnaHQgLyB3b3JsZFNpemUueVxuICApXG5cbi8vIFJlc2l6ZVxuZnVuY3Rpb24gcmVzaXplICgpIHtcbiAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIC8gcmF0aW8ueCA8IHdpbmRvdy5pbm5lckhlaWdodCAvIHJhdGlvLnkpIHtcbiAgICBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxuICAgIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJXaWR0aCAqIHJhdGlvLnkgLyByYXRpby54XG4gIH1cbiAgZWxzZSB7XG4gICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVySGVpZ2h0ICogcmF0aW8ueCAvIHJhdGlvLnlcbiAgICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0XG4gIH1cblxuICB2Y3MgPSBuZXcgVmlydHVhbENvb3JkaW5hdGVTeXN0ZW0oXG4gICAgY2FudmFzLndpZHRoIC8gd29ybGRTaXplLngsXG4gICAgY2FudmFzLmhlaWdodCAvIHdvcmxkU2l6ZS55XG4gIClcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZSk7XG5cbmxldCBkcmF3YWJsZXMgPSBuZXcgQXJyYXk8RHJhd2FibGU8R2xvYmFsU3RhdGU+PigpXG5sZXQgdGlja2luZyA9IG5ldyBBcnJheTxUaWNraW5nPEdsb2JhbFN0YXRlPj4oKVxuXG5sZXQgZnVlbFBvc2l0aW9uID0gbmV3IFZlY3RvcjIoNSwgNSlcbmxldCBhbmdsZVBvc2l0aW9uID0gbmV3IFZlY3RvcjIoNSwgNy41KVxubGV0IHZlbG9jaXR5UG9zaXRpb24gPSBuZXcgVmVjdG9yMig1LCAxMClcblxuLy8gR2FtZSBsb29wXG5sZXQgbGFzdFRpbWU6IG51bWJlciA9IDBcbmZ1bmN0aW9uIGxvb3AgKGdsb2JhbFN0YXRlOiBHbG9iYWxTdGF0ZSkgOiBGcmFtZVJlcXVlc3RDYWxsYmFjayB7XG4gICAgbGV0IGZuID0gZnVuY3Rpb24oY3VycmVudFRpbWU6IG51bWJlcikge1xuICAgICAgICBjb25zdCBkZWx0YSA9IGN1cnJlbnRUaW1lIC0gbGFzdFRpbWVcbiAgICAgICAgbGFzdFRpbWUgPSBjdXJyZW50VGltZVxuXG4gICAgICAgIHVwZGF0ZShkZWx0YSAvIDEwMDAsIGdsb2JhbFN0YXRlKVxuICAgICAgICBkcmF3KGdsb2JhbFN0YXRlKVxuXG4gICAgICAgIGlmIChnbG9iYWxTdGF0ZS5ydW5uaW5nKSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZm4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmblxufVxuXG5mdW5jdGlvbiB1cGRhdGUgKGRlbHRhOiBudW1iZXIsIGdsb2JhbFN0YXRlOiBHbG9iYWxTdGF0ZSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHRpY2tpbmcubGVuZ3RoOyBpKyspIHtcbiAgICB0aWNraW5nW2ldLnVwZGF0ZShkZWx0YSwgZ2xvYmFsU3RhdGUpXG4gIH1cbn1cbmZ1bmN0aW9uIGRyYXcgKGdsb2JhbFN0YXRlOiBHbG9iYWxTdGF0ZSkge1xuICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICBkcmF3VGVycmFpbihjb250ZXh0LCBnbG9iYWxTdGF0ZSwgdmNzKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkcmF3YWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICBkcmF3YWJsZXNbaV0uZHJhdyhjb250ZXh0LCBnbG9iYWxTdGF0ZSwgdmNzKTtcbiAgfVxuICBkcmF3VGV4dChjb250ZXh0LCBnbG9iYWxTdGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGRyYXdUZXh0IChjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGdsb2JhbFN0YXRlOiBHbG9iYWxTdGF0ZSkge1xuICBsZXQgZm9udFNpemUgPSB2Y3MudHJhbnNsYXRlVmFsdWVYKDIpXG4gIGNvbnRleHQuZm9udCA9IGAke2ZvbnRTaXplfXB4IEFyaWFsYFxuXG4gIC8vIEZ1ZWxcbiAgbGV0IGZ1ZWwgPSBnbG9iYWxTdGF0ZS5sYW5kZXIuZnVlbFxuICBpZiAoZnVlbCA+IDApIHtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICcjMDBmZjAwJ1xuICB9IGVsc2Uge1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJyNmZmZmZmYnXG4gIH1cbiAgbGV0IGFkanVzdGVkRnVlbFBvc2l0aW9uID0gdmNzLnRyYW5zbGF0ZShmdWVsUG9zaXRpb24pXG4gIGNvbnRleHQuZmlsbFRleHQoXG4gICAgYEZ1ZWw6ICR7ZnVlbC50b0ZpeGVkKDIpfUxgLFxuICAgIGFkanVzdGVkRnVlbFBvc2l0aW9uLngsXG4gICAgYWRqdXN0ZWRGdWVsUG9zaXRpb24ueVxuICApXG5cbiAgLy8gQW5nbGVcbiAgbGV0IGFuZ2xlID0gZ2xvYmFsU3RhdGUubGFuZGVyLnJvdGF0aW9uXG4gIGlmIChhbmdsZSA8IDUgfHwgYW5nbGUgPiAzNTUpIHtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICcjMDBmZjAwJ1xuICB9IGVsc2Uge1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJyNmZmZmZmYnXG4gIH1cbiAgbGV0IGFkanVzdGVkQW5nbGVQb3NpdGlvbiA9IHZjcy50cmFuc2xhdGUoYW5nbGVQb3NpdGlvbilcbiAgY29udGV4dC5maWxsVGV4dChcbiAgICBgQW5nbGU6ICR7YW5nbGUudG9GaXhlZCgyKX3CsGAsXG4gICAgYWRqdXN0ZWRBbmdsZVBvc2l0aW9uLngsXG4gICAgYWRqdXN0ZWRBbmdsZVBvc2l0aW9uLnlcbiAgKVxuXG4gIC8vIFZlbG9jaXR5XG4gIGxldCBtYWduID0gZ2xvYmFsU3RhdGUubGFuZGVyLnZlbG9jaXR5Lm1hZ25pdHVkZSgpXG4gIGlmIChtYWduIDwgMikge1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJyMwMGZmMDAnXG4gIH0gZWxzZSB7XG4gICAgY29udGV4dC5maWxsU3R5bGUgPSAnI2ZmZmZmZidcbiAgfVxuICBsZXQgYWRqdXN0ZWRWZWxvY2l0eVBvc2l0aW9uID0gdmNzLnRyYW5zbGF0ZSh2ZWxvY2l0eVBvc2l0aW9uKVxuICBjb250ZXh0LmZpbGxUZXh0KFxuICAgIGBWZWxvY2l0eTogJHttYWduLnRvRml4ZWQoMil9IG0vc2AsXG4gICAgYWRqdXN0ZWRWZWxvY2l0eVBvc2l0aW9uLngsXG4gICAgYWRqdXN0ZWRWZWxvY2l0eVBvc2l0aW9uLnlcbiAgKVxuICBjb250ZXh0LmZpbGxTdHlsZSA9ICcjZmZmZmZmJ1xufVxuXG5mdW5jdGlvbiBidWlsZENvbW1hbmRzIChzdGF0ZTogR2xvYmFsU3RhdGUpOiBDb21tYW5kU2VydmljZTxHbG9iYWxTdGF0ZT4ge1xuICBjb25zdCBjb21tYW5kcyA9IG5ldyBDb21tYW5kU2VydmljZTxHbG9iYWxTdGF0ZT4oKVxuICAvLyBDb21tYW5kIENyZWF0aW9uXG4gIGNvbW1hbmRzLmNyZWF0ZUNvbW1hbmQoJ2JlZ2luVGhydXN0JywgZ2xvYmFsU3RhdGUgPT4ge1xuICAgIGlmIChnbG9iYWxTdGF0ZS5sYW5kZXIuZnJvemVuKSByZXR1cm47XG4gICAgZ2xvYmFsU3RhdGUubGFuZGVyLnRocnVzdGluZyA9IHRydWVcbiAgICBpZiAoZ2xvYmFsU3RhdGUubGFuZGVyLmZ1ZWwgPiAwKSB7XG4gICAgICBnbG9iYWxTdGF0ZS5zb3VuZHMubWFpblRocnVzdGVyLnBsYXkoKVxuICAgIH0gZWxzZSB7XG4gICAgICBnbG9iYWxTdGF0ZS5zb3VuZHMubm9GdWVsLnBsYXkoKVxuICAgIH1cbiAgfSlcblxuICBjb21tYW5kcy5jcmVhdGVDb21tYW5kKCdlbmRUaHJ1c3QnLCBnbG9iYWxTdGF0ZSA9PiB7XG4gICAgZ2xvYmFsU3RhdGUubGFuZGVyLnRocnVzdGluZyA9IGZhbHNlXG4gICAgZ2xvYmFsU3RhdGUuc291bmRzLm1haW5UaHJ1c3Rlci5zdG9wKClcbiAgICBnbG9iYWxTdGF0ZS5zb3VuZHMubm9GdWVsLnN0b3AoKVxuICB9KVxuXG4gIGNvbW1hbmRzLmNyZWF0ZUNvbW1hbmQoJ2Z1ZWxFeHBpcmVkJywgZ2xvYmFsU3RhdGUgPT4ge1xuICAgIGlmIChnbG9iYWxTdGF0ZS5sYW5kZXIuZnJvemVuKSByZXR1cm47XG4gICAgaWYgKGdsb2JhbFN0YXRlLnNvdW5kcy5tYWluVGhydXN0ZXIucGxheWluZykge1xuICAgICAgZ2xvYmFsU3RhdGUuc291bmRzLm1haW5UaHJ1c3Rlci5zdG9wKClcbiAgICAgIGdsb2JhbFN0YXRlLnNvdW5kcy5ub0Z1ZWwucGxheSgpXG4gICAgfVxuICAgIGlmIChnbG9iYWxTdGF0ZS5zb3VuZHMuc3ViVGhydXN0ZXIucGxheWluZykge1xuICAgICAgZ2xvYmFsU3RhdGUuc291bmRzLnN1YlRocnVzdGVyLnN0b3AoKVxuICAgICAgZ2xvYmFsU3RhdGUuc291bmRzLm5vRnVlbC5wbGF5KClcbiAgICB9XG4gIH0pXG5cbiAgY29tbWFuZHMuY3JlYXRlQ29tbWFuZCgnYmVnaW5UdXJuTGVmdCcsIGdsb2JhbFN0YXRlID0+IHtcbiAgICBpZiAoZ2xvYmFsU3RhdGUubGFuZGVyLmZyb3plbikgcmV0dXJuO1xuICAgIGdsb2JhbFN0YXRlLmxhbmRlci50dXJuaW5nTGVmdCA9IHRydWVcbiAgICBpZiAoZ2xvYmFsU3RhdGUubGFuZGVyLmZ1ZWwgPiAwKSB7XG4gICAgICBnbG9iYWxTdGF0ZS5zb3VuZHMuc3ViVGhydXN0ZXIucGxheSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGdsb2JhbFN0YXRlLnNvdW5kcy5ub0Z1ZWwucGxheSgpXG4gICAgfVxuICB9KVxuXG4gIGNvbW1hbmRzLmNyZWF0ZUNvbW1hbmQoJ2VuZFR1cm5MZWZ0JywgZ2xvYmFsU3RhdGUgPT4ge1xuICAgIGlmIChnbG9iYWxTdGF0ZS5sYW5kZXIuZnJvemVuKSByZXR1cm47XG4gICAgZ2xvYmFsU3RhdGUuc291bmRzLnN1YlRocnVzdGVyLnN0b3AoKVxuICAgIGdsb2JhbFN0YXRlLnNvdW5kcy5ub0Z1ZWwuc3RvcCgpXG4gICAgZ2xvYmFsU3RhdGUubGFuZGVyLnR1cm5pbmdMZWZ0ID0gZmFsc2VcbiAgfSlcblxuICBjb21tYW5kcy5jcmVhdGVDb21tYW5kKCdiZWdpblR1cm5SaWdodCcsIGdsb2JhbFN0YXRlID0+IHtcbiAgICBpZiAoZ2xvYmFsU3RhdGUubGFuZGVyLmZyb3plbikgcmV0dXJuO1xuICAgIGlmIChnbG9iYWxTdGF0ZS5sYW5kZXIuZnVlbCA+IDApIHtcbiAgICAgIGdsb2JhbFN0YXRlLnNvdW5kcy5zdWJUaHJ1c3Rlci5wbGF5KClcbiAgICB9IGVsc2Uge1xuICAgICAgZ2xvYmFsU3RhdGUuc291bmRzLm5vRnVlbC5wbGF5KClcbiAgICB9XG4gICAgZ2xvYmFsU3RhdGUubGFuZGVyLnR1cm5pbmdSaWdodCA9IHRydWVcbiAgfSlcblxuICBjb21tYW5kcy5jcmVhdGVDb21tYW5kKCdlbmRUdXJuUmlnaHQnLCBnbG9iYWxTdGF0ZSA9PiB7XG4gICAgaWYgKGdsb2JhbFN0YXRlLmxhbmRlci5mcm96ZW4pIHJldHVybjtcbiAgICBnbG9iYWxTdGF0ZS5zb3VuZHMuc3ViVGhydXN0ZXIuc3RvcCgpXG4gICAgZ2xvYmFsU3RhdGUuc291bmRzLm5vRnVlbC5zdG9wKClcbiAgICBnbG9iYWxTdGF0ZS5sYW5kZXIudHVybmluZ1JpZ2h0ID0gZmFsc2VcbiAgfSlcblxuICBjb21tYW5kcy5jcmVhdGVDb21tYW5kKCdzYWZlTGFuZGluZycsIGdsb2JhbFN0YXRlID0+IHtcbiAgICBnbG9iYWxTdGF0ZS5zb3VuZHMubGFuZGluZy5wbGF5KClcbiAgICBnbG9iYWxTdGF0ZS5sYW5kZXIuZnJlZXplKClcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZ2xvYmFsU3RhdGUucnVubmluZyA9IGZhbHNlXG4gICAgICAgIHN0YXJ0KGJ1aWxkU3RhdGUoKSwgMik7XG4gICAgfSwgMzAwMCk7XG4gIH0pXG5cbiAgY29tbWFuZHMuY3JlYXRlQ29tbWFuZCgnY3Jhc2hMYW5kaW5nJywgZ2xvYmFsU3RhdGUgPT4ge1xuICAgIGdsb2JhbFN0YXRlLnNvdW5kcy5tYWluVGhydXN0ZXIuc3RvcCgpO1xuICAgIGdsb2JhbFN0YXRlLnNvdW5kcy5zdWJUaHJ1c3Rlci5zdG9wKCk7XG4gICAgZ2xvYmFsU3RhdGUuc291bmRzLm5vRnVlbC5zdG9wKCk7XG4gICAgZ2xvYmFsU3RhdGUuc291bmRzLmV4cGxvc2lvbi5wbGF5KClcbiAgICBnbG9iYWxTdGF0ZS5sYW5kZXIuY3Jhc2hlZCA9IHRydWVcbiAgICBnbG9iYWxTdGF0ZS5sYW5kZXIuZnJlZXplKClcbiAgfSlcblxuICByZXR1cm4gY29tbWFuZHM7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkS2V5cyAoc3RhdGU6IEdsb2JhbFN0YXRlKTogS2V5TWFuYWdlciB7XG4gIC8vIERlZmF1bHQgS2V5YmluZGluZ3NcbiAgY29uc3Qga2V5cyA9IG5ldyBLZXlNYW5hZ2VyKClcbiAgbWFwVG9Db21tYW5kcyhrZXlzLCBzdGF0ZS5jb21tYW5kcywgJ1RocnVzdCcsICdBcnJvd1VwJywgc3RhdGUpO1xuICBtYXBUb0NvbW1hbmRzKGtleXMsIHN0YXRlLmNvbW1hbmRzLCAnVHVybkxlZnQnLCAnQXJyb3dMZWZ0Jywgc3RhdGUpO1xuICBtYXBUb0NvbW1hbmRzKGtleXMsIHN0YXRlLmNvbW1hbmRzLCAnVHVyblJpZ2h0JywgJ0Fycm93UmlnaHQnLCBzdGF0ZSk7XG4gIHJldHVybiBrZXlzXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFN0YXRlICgpOiBHbG9iYWxTdGF0ZSB7XG4gIGxldCBnbG9iYWxTdGF0ZTogR2xvYmFsU3RhdGUgPSB7XG4gICAgdGVycmFpbjogdW5kZWZpbmVkLFxuICAgIHJ1bm5pbmc6IHRydWUsXG4gICAgbGFuZGVyOiB1bmRlZmluZWQsXG4gICAgc2FmZVpvbmVzOiB1bmRlZmluZWQsXG4gICAgY29tbWFuZHM6IHVuZGVmaW5lZCxcbiAgICBrZXlzOiB1bmRlZmluZWQsXG4gICAgY29uZmlnOiB7XG4gICAgICBmdWVsQ29uc3VtcHRpb246IDIwLFxuICAgICAgdGhydXN0Q29lZmZpY2llbnQ6IDEwLFxuICAgICAgdGhldGE6IDkwLFxuICAgICAgZ3Jhdml0eTogbmV3IFZlY3RvcjIoMCwgMSksXG4gICAgICB3b3JsZFNpemVcbiAgICB9LFxuICAgIHNvdW5kczoge1xuICAgICAgbWFpblRocnVzdGVyOiBuZXcgU291bmRFZmZlY3QoJ2Fzc2V0cy9tYWludGhydXN0ZXIud2F2JywgNCksXG4gICAgICBzdWJUaHJ1c3RlcjogbmV3IFNvdW5kRWZmZWN0KCdhc3NldHMvc3VidGhydXN0ZXIud2F2JywgNCksXG4gICAgICBleHBsb3Npb246IG5ldyBTb3VuZEVmZmVjdCgnYXNzZXRzL2V4cGxvc2lvbi53YXYnKSxcbiAgICAgIGxhbmRpbmc6IG5ldyBTb3VuZEVmZmVjdCgnYXNzZXRzL2xhbmRpbmcud2F2JyksXG4gICAgICBub0Z1ZWw6IG5ldyBTb3VuZEVmZmVjdCgnYXNzZXRzL25vZnVlbC53YXYnLCAxKVxuICAgIH1cbiAgfVxuICBnbG9iYWxTdGF0ZS5jb21tYW5kcyA9IGJ1aWxkQ29tbWFuZHMoZ2xvYmFsU3RhdGUpXG4gIGdsb2JhbFN0YXRlLmtleXMgPSBidWlsZEtleXMoZ2xvYmFsU3RhdGUpXG4gIHJldHVybiBnbG9iYWxTdGF0ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnQgKGdsb2JhbFN0YXRlOiBHbG9iYWxTdGF0ZSwgZGlmZmljdWx0eTogbnVtYmVyID0gMSkge1xuICBjb25zdCBsYW5kZXIgPSBuZXcgTGFuZGVyKFxuICAgIG5ldyBWZWN0b3IyKHdvcmxkU2l6ZS54IC8gMiwgMCksXG4gICAgbGFuZGVyVGV4dHVyZSxcbiAgICBuZXcgVmVjdG9yMig1LCA1KVxuICApXG4gIGdsb2JhbFN0YXRlLmxhbmRlciA9IGxhbmRlclxuICBkcmF3YWJsZXMgPSBbXTtcbiAgdGlja2luZyA9IFtdO1xuICBkcmF3YWJsZXMucHVzaChsYW5kZXIpXG4gIHRpY2tpbmcucHVzaChsYW5kZXIpXG4gIGNvbnN0IHRlcnJhaW4gPSBuZXcgVGVycmFpbig4LCA1MDAsIG5ldyBWZWN0b3IyKDAsIHdvcmxkU2l6ZS55ICogMiAvIDMpLCBuZXcgVmVjdG9yMih3b3JsZFNpemUueCwgd29ybGRTaXplLnkgKiAyIC8gMykpXG4gIGNvbnN0IHNhZmVab25lczogQXJyYXk8QXJyYXk8VmVjdG9yMj4+ID0gW11cbiAgY29uc3QgY291bnQgPSAzIC0gZGlmZmljdWx0eTtcbiAgY29uc3QgbWluID0gMTA7XG4gIGNvbnN0IG1heCA9IHdvcmxkU2l6ZS54IC0gMTA7XG4gIGNvbnN0IHZhbGlkUG9ydGlvbnMgPSAobWF4IC0gbWluKSAvIGNvdW50O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICBzYWZlWm9uZXMucHVzaCh0ZXJyYWluLmluc2VydFNhZmVab25lKG1pbiArIHZhbGlkUG9ydGlvbnMgKiBpLCBtaW4gKyB2YWxpZFBvcnRpb25zICogKGkgKyAxKSwgY291bnQgKiA3LjUpKTtcbiAgfVxuXG4gIGdsb2JhbFN0YXRlLnRlcnJhaW4gPSB0ZXJyYWluO1xuICBnbG9iYWxTdGF0ZS5zYWZlWm9uZXMgPSBzYWZlWm9uZXM7XG5cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3AoZ2xvYmFsU3RhdGUpKVxufVxuIiwiaW1wb3J0IHsgYnVpbGRTdGF0ZSwgc3RhcnQgfSBmcm9tICcuL2dhbWUnO1xuXG52YXIgZ2xvYmFsU3RhdGUgPSBidWlsZFN0YXRlKCk7XG5zdGFydChnbG9iYWxTdGF0ZSwgMSk7XG4iXSwic291cmNlUm9vdCI6IiJ9