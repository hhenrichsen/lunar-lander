(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=function(){function n(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e(this,"_x",0),e(this,"_y",0),this._x=t,this._y=i}var i,r,o;return i=n,o=[{key:"random",value:function(){return new n(Math.random(),Math.random()).normalize()}},{key:"distance",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}}],(r=[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"sqrMagnitude",value:function(){return Math.pow(this.x,2)+Math.pow(this.y,2)}},{key:"magnitude",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"normalize",value:function(){var t=this.magnitude();return new n(this.x/t,this.y/t)}},{key:"scale",value:function(t){return new n(this.x*t,this.y*t)}},{key:"add",value:function(t){return new n(this.x+t.x,this.y+t.y)}},{key:"rotate",value:function(t){var e=t*Math.PI/180;return new n(this.x*Math.cos(e)-Math.sin(e)*this.y,this.x*Math.sin(e)+this.y*Math.cos(e))}},{key:"toString",value:function(){return"Vector2(x: ".concat(this.x,", y: ").concat(this.y,")")}}])&&t(i.prototype,r),o&&t(i,o),n}();e(n,"ZERO",new n(0,0));const i=n;function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;e.ready&&(t.save(),t.translate(n.x,n.y),t.rotate(r*Math.PI/180),t.translate(-n.x,-n.y),t.drawImage(e.texture,n.x-i.x/2,n.y-i.y/2,i.x,i.y),t.restore())}var s=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"size",void 0),o(this,"el",void 0),o(this,"ready",!1),this.el=new Image,this.el.src=e,this.el.addEventListener("load",(function(){i.ready=!0}))}var e,n;return e=t,(n=[{key:"texture",get:function(){return this.el}}])&&r(e.prototype,n),t}();function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"scaleX",void 0),l(this,"scaleY",void 0),this.scaleX=e,this.scaleY=n}var e,n;return e=t,(n=[{key:"translate",value:function(t){return new i(t.x*this.scaleX,t.y*this.scaleY)}},{key:"translateValueX",value:function(t){return t*this.scaleX}},{key:"translateValueY",value:function(t){return t*this.scaleY}}])&&u(e.prototype,n),t}();function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(){function t(){c(this,t),y(this,"particles",void 0),this.particles=[]}return d(t,[{key:"update",value:function(t,e){this.particles=this.particles.filter((function(n){return n.update(t,e),n.remainingTime>0}))}},{key:"add",value:function(t){this.particles.push(t)}}]),t}(),p=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;c(this,t),y(this,"position",void 0),y(this,"_rate",.1),y(this,"_elapsed",0),y(this,"_count",10),y(this,"_container",void 0),y(this,"_particleGenerator",void 0),y(this,"_predicate",void 0),this._container=new v,this._particleGenerator=e,this._predicate=n,this._count=r,this._rate=i}return d(t,[{key:"draw",value:function(t,e,n){this._container.particles.forEach((function(i){i.draw(t,e,n)}))}},{key:"update",value:function(t,e){if(this._predicate(e)&&(this._elapsed+=t,this._elapsed>this._rate)){this._elapsed-=this._rate;for(var n=0;n<this._count;n++)this._container.add(new g(this.position,this._particleGenerator.velocity(e),this._particleGenerator.lifetime(e),this._particleGenerator.rotation(e),this._particleGenerator.texture(e),this._particleGenerator.size(e)))}this._container.update(t,e)}}]),t}(),g=function(){function t(e,n,i,r,o,a){c(this,t),y(this,"_center",void 0),y(this,"_direction",void 0),y(this,"_velocity",void 0),y(this,"_lifetime",void 0),y(this,"_rotation",void 0),y(this,"_elapsedLifetime",void 0),y(this,"_texture",void 0),y(this,"_size",void 0),this._center=e,this._velocity=n,this._lifetime=i,this._rotation=r,this._texture=o,this._size=a,this._elapsedLifetime=0}return d(t,[{key:"draw",value:function(t,e,n){t.globalAlpha=1-this._elapsedLifetime/this._lifetime,a(t,this._texture,n.translate(this._center),n.translate(this._size),this._rotation),t.globalAlpha=1}},{key:"velocity",get:function(){return this._velocity}},{key:"direction",get:function(){return this._direction}},{key:"center",get:function(){return this._center}},{key:"remainingTime",get:function(){return this._lifetime-this._elapsedLifetime}},{key:"update",value:function(t,e){this._elapsedLifetime+=t,this._center=this._center.add(this._velocity.scale(t))}}]),t}();function w(t,e,n){var r=new i(n.x-e.x,n.y-e.y),o=new i(e.x-t.center.x,e.y-t.center.y),a=-2*(r.x*o.x+r.y*o.y),s=2*(r.x*r.x+r.y*r.y),u=Math.sqrt(a*a-2*s*(o.x*o.x+o.y*o.y-t.radius*t.radius));if(isNaN(u))return!1;var l=(a-u)/s,h=(a+u)/s;return l<=1&&l>=0||h<=1&&h>=0}function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var _=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"gaussian",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e=0,n=0;n<t;n++)e+=Math.random();return e/t}}])&&m(e.prototype,n),t}());function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var k=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,"_center",void 0),x(this,"_radius",void 0),this._center=e,this._radius=n}var e,n;return e=t,(n=[{key:"center",get:function(){return this._center}},{key:"radius",get:function(){return this._radius}}])&&b(e.prototype,n),t}();function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t,e,n){return e&&T(t.prototype,e),n&&T(t,n),t}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;E(this,t),P(this,"_rotationOffset",void 0),P(this,"tex",new s("assets/Smoke.png",new i(32,32))),P(this,"_size",new i(.425,.425)),this._rotationOffset=e}return C(t,[{key:"texture",value:function(t){return this.tex}},{key:"size",value:function(t){return this._size}},{key:"velocity",value:function(t){var e=t.lander.rotationVector,n=100*_.gaussian(12)-50;return(e=e.rotate(n+this._rotationOffset)).scale(-5*_.gaussian(12))}},{key:"lifetime",value:function(t){return 5+_.gaussian(12)}},{key:"rotation",value:function(t){return 0}}]),t}(),M=function(){function t(){E(this,t),P(this,"tex",new s("assets/Fire.png",new i(32,32))),P(this,"_size",new i(.425,.425))}return C(t,[{key:"texture",value:function(t){return this.tex}},{key:"size",value:function(t){return this._size}},{key:"velocity",value:function(t){var e=t.lander.rotationVector,n=360*Math.random();return(e=e.rotate(n)).scale(-20*_.gaussian(12))}},{key:"lifetime",value:function(t){return 5+_.gaussian(12)}},{key:"rotation",value:function(t){return 0}}]),t}(),z=function(){function t(e,n,r){var o=this;E(this,t),P(this,"size",void 0),P(this,"texture",void 0),P(this,"frozen",void 0),P(this,"thrustEmitter",void 0),P(this,"leftRotationEmitter",void 0),P(this,"rightRotationEmitter",void 0),P(this,"explosionEmitter",void 0),P(this,"_position",void 0),P(this,"_velocity",void 0),P(this,"_rotationVector",void 0),P(this,"_rotation",void 0),P(this,"_explosionCount",0),P(this,"_isExploding",!1),P(this,"fuel",100),P(this,"crashed",!1),P(this,"thrusting",!1),P(this,"turningLeft",!1),P(this,"turningRight",!1),this.texture=n,this.size=r,this.frozen=!1,this._position=e,this._velocity=new i(0,0),this._rotationVector=new i(0,-1),this._rotation=0,this.thrustEmitter=new p(new S,(function(t){return t.lander.thrusting&&t.lander.fuel>0}),.03,5),this.leftRotationEmitter=new p(new S(90),(function(t){return t.lander.turningLeft&&t.lander.fuel>0}),.03,3),this.rightRotationEmitter=new p(new S(-90),(function(t){return t.lander.turningRight&&t.lander.fuel>0}),.03,3),this.explosionEmitter=new p(new M,(function(t){return o._isExploding}),.03,200),this.positionEmitters()}return C(t,[{key:"draw",value:function(t,e,n){e.lander.crashed||a(t,this.texture,n.translate(this._position),n.translate(this.size),this._rotation),this.thrustEmitter.draw(t,e,n),this.leftRotationEmitter.draw(t,e,n),this.rightRotationEmitter.draw(t,e,n),this.explosionEmitter.draw(t,e,n)}},{key:"debugDraw",value:function(t,e,n){t.beginPath(),t.strokeStyle="#ffffff";var r=n.translate(this._position);t.arc(r.x,r.y,n.translate(new i(4,0)).x,0,2*Math.PI),t.stroke();var o=n.translate(this._position),a=n.translate(this._rotationVector.scale(5));t.beginPath(),this._rotation%360<5&&this._rotation%360>-5?t.strokeStyle="#00ff00":t.strokeStyle="#ff0000",t.lineTo(o.x,o.y),t.lineTo(o.x+a.x,o.y+a.y),t.stroke();var s=n.translate(this._velocity.normalize().scale(5));t.beginPath(),this._velocity.sqrMagnitude()<4?t.strokeStyle="#0000ff":t.strokeStyle="#ff0000",t.lineTo(o.x,o.y),t.lineTo(o.x+s.x,o.y+s.y),t.stroke()}},{key:"positionEmitters",value:function(){this.thrustEmitter.position=this._position.add(this._rotationVector.scale(-1.5)),this.leftRotationEmitter.position=this._position.add(this._rotationVector.rotate(70).scale(-1.75)),this.rightRotationEmitter.position=this._position.add(this._rotationVector.rotate(-70).scale(-1.75)),this.explosionEmitter.position=this._position}},{key:"update",value:function(t,e){if(this._isExploding&&(console.log("Explosion"),this._explosionCount++),this._explosionCount>5&&(this._isExploding=!1,this._explosionCount=0),this.thrustEmitter.update(t,e),this.leftRotationEmitter.update(t,e),this.rightRotationEmitter.update(t,e),this.explosionEmitter.update(t,e),!this.frozen){this.turningLeft&&this.fuel>0&&this.rotate(t,e,-1),this.turningRight&&this.fuel>0&&this.rotate(t,e,1),this._velocity=this._velocity.add(e.config.gravity.scale(t)),this.thrusting&&this.fuel>0&&(this._velocity=this._velocity.add(this._rotationVector.scale(t*e.config.thrustCoefficient)),this.fuel-=e.config.fuelConsumption*t),this.fuel<0&&(this.fuel=0,e.commands.execute("fuelExpired",e)),this._position=this._position.add(this._velocity.scale(t)),this.positionEmitters();for(var n=0;n<e.terrain.points.length-1;n++)if(w(new k(this._position,2),e.terrain.points[n],e.terrain.points[n+1])){if(this.velocity.sqrMagnitude()<=4&&(this.rotation<5||this.rotation>355))for(var i=0;i<e.safeZones.length;i++)if(e.terrain.points[n]==e.safeZones[i][0]&&e.terrain.points[n+1]==e.safeZones[i][1])return void e.commands.execute("safeLanding",e);e.commands.execute("crashLanding",e),this._isExploding=!0}(this.position.x>e.config.worldSize.x+10||this.position.x<-10||this.position.y>e.config.worldSize.y+10)&&(e.commands.execute("crashLanding",e),this._isExploding=!0)}}},{key:"rotate",value:function(t,e,n){this.fuel-=e.config.fuelConsumption*t*.5,this._rotation+=n*e.config.theta*t,this._rotationVector=this._rotationVector.rotate(n*e.config.theta*t)}},{key:"velocity",get:function(){return this._velocity}},{key:"rotation",get:function(){return(this._rotation%360+360)%360}},{key:"rotationVector",get:function(){return this._rotationVector}},{key:"position",get:function(){return this._position}},{key:"freeze",value:function(){this.frozen=!0,this._velocity=i.ZERO}}]),t}();function O(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function V(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),t}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F=function(){function t(){R(this,t),A(this,"_wasPressed",!1),A(this,"_lastPressed",Date.now()),A(this,"_onStateChanged",new Set),A(this,"_onKeyUp",new Set),A(this,"_onKeyDown",new Set)}return V(t,[{key:"update",value:function(t,e){if(this._wasPressed!=t){var n;n=t?this._onKeyDown:this._onKeyUp;var i,r=Date.now(),o=O(n);try{for(o.s();!(i=o.n()).done;)(0,i.value)(t,r-this._lastPressed,e)}catch(t){o.e(t)}finally{o.f()}var a,s=O(this._onStateChanged);try{for(s.s();!(a=s.n()).done;)(0,a.value)(t,r-this._lastPressed,e)}catch(t){s.e(t)}finally{s.f()}this._lastPressed=r,this._wasPressed=!this._wasPressed}}},{key:"addUp",value:function(t){this._onKeyUp.add(t)}},{key:"addDown",value:function(t){this._onKeyDown.add(t)}},{key:"addChanged",value:function(t){this._onStateChanged.add(t)}}]),t}(),D=function(){function t(){R(this,t),A(this,"handlers",void 0),A(this,"descriptions",void 0),window.addEventListener("keydown",this.updateDown.bind(this)),window.addEventListener("keyup",this.updateUp.bind(this)),this.handlers=new Map}return V(t,[{key:"registerHandler",value:function(t,e){var n;this.handlers.has(t)?console.warn("Key handler registered twice for keyCode ".concat(t)):(this.handlers.set(t,new F),null===(n=this.descriptions)||void 0===n||n.set(t,e))}},{key:"bindUp",value:function(t,e){this.handlers.get(t).addUp(e)}},{key:"bindDown",value:function(t,e){this.handlers.get(t).addDown(e)}},{key:"bindChanged",value:function(t,e){this.handlers.get(t).addChanged(e)}},{key:"updateDown",value:function(t){this.handlers.has(t.key)&&(t.preventDefault(),this.handlers.get(t.key).update(!0,{alt:t.altKey,shift:t.shiftKey,ctrl:t.ctrlKey}))}},{key:"updateUp",value:function(t){this.handlers.has(t.key)&&(t.preventDefault(),this.handlers.get(t.key).update(!1,{alt:t.altKey,shift:t.shiftKey,ctrl:t.ctrlKey}))}},{key:"clear",value:function(){this.handlers=new Map}},{key:"remove",value:function(t){this.handlers.delete(t)}}]),t}();function K(t,e,n,i,r){t.registerHandler(i,n),e.has("begin".concat(n))&&t.bindDown(i,(function(){return e.execute("begin".concat(n),r)})),e.has("end".concat(n))&&t.bindUp(i,(function(){return e.execute("end".concat(n),r)})),e.has("toggle".concat(n))&&t.bindChanged(i,(function(){return e.execute("toggle".concat(n),r)}))}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Z(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),t}function q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var G=function(){function t(e,n){U(this,t),q(this,"_name",void 0),q(this,"_action",void 0),this._name=e,this._action=n}return Z(t,[{key:"name",get:function(){return this._name}},{key:"invoke",value:function(t){this._action(t)}}]),t}(),X=function(){function t(){U(this,t),q(this,"commands",void 0),this.commands=new Map}return Z(t,[{key:"createCommand",value:function(t,e){this.commands.set(t,new G(t,e))}},{key:"has",value:function(t){return this.commands.has(t)}},{key:"execute",value:function(t,e){this.commands.has(t)?this.commands.get(t).invoke(e):console.warn("Attempting to invoke non-existent command ".concat(t))}}]),t}();function Y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var H=function(){function t(e,n,r,o){var a,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s=void 0,(a="points")in this?Object.defineProperty(this,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[a]=s,this.points=[r,o];for(var u=0;u<e;u++){var l=this.points.length;n/=2;for(var h=0;h<l-1;h++){var c=new i((this.points[2*h].x+this.points[2*h+1].x)/2,(this.points[2*h].y+this.points[2*h+1].y)/2);c=c.add(new i(0,_.gaussian(12)*n)),this.points.splice(2*h+1,0,c)}}}var e,n;return e=t,(n=[{key:"insertSafeZone",value:function(t,e,n){for(var r=t+n/2,o=r+(e-n/2-r)*Math.random(),a=0,s=this.points[0];s.x<o;)s=this.points[++a];var u=s;a++,s=this.points[a];for(var l=0;s.x<o+n;)l=s.x,this.points.splice(a,1),s=this.points[a];return this.points[a]=new i(l,u.y),[u,this.points[a]]}}])&&Y(e.prototype,n),t}();function W(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var B=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,"el",void 0),N(this,"ready",!1),N(this,"continue",!1),N(this,"loop",!1),N(this,"_playing",!1),N(this,"cutoff",0),this.el=new Audio(e),this.el.addEventListener("load",(function(){i.ready=!0})),n&&(this.loop=!0,this.cutoff=n)}var e,n;return e=t,(n=[{key:"play",value:function(){var t=this;this.el.play(),this.continue=!0,this._playing=!0,this.loop?setTimeout((function(){t.continue&&(t.el.currentTime=0,t.playRec())}),1e3*this.cutoff):setTimeout((function(){return t._playing=!1}),1e3*this.el.duration)}},{key:"playRec",value:function(){var t=this;setTimeout((function(){t.continue&&(t.el.currentTime=0,t.playRec())}),1e3*this.cutoff)}},{key:"stop",value:function(){this.el.pause(),this.continue=!1,this._playing=!1,this.el.currentTime=0}},{key:"playing",get:function(){return this._playing}}])&&W(e.prototype,n),t}(),$=document.getElementById("canvas"),J=$.getContext("2d"),Q=new i(130,100),tt=new s("assets/Lander.png",new i(500,500)),et=Math.min(window.innerWidth,window.innerHeight);et==window.innerWidth?($.width=et,$.height=et*(3/4)):($.width=4*et/3,$.height=et);var nt=new h($.width/Q.x,$.height/Q.y);window.addEventListener("resize",(function(){(et=Math.min(window.innerWidth,window.innerHeight))==window.innerWidth?($.width=et,$.height=et*(3/4)):($.width=4*et/3,$.height=et),nt=new h($.width/Q.x,$.height/Q.y),console.log("Resizing to ".concat(et,"px."))}));var it,rt,ot,at,st=new Array,ut=new Array,lt=new i(5,5),ht=new i(5,7.5),ct=new i(5,10),ft=0;function dt(t){return function e(n){var i=n-ft;ft=n,function(t,e){for(var n=0;n<ut.length;n++)ut[n].update(t,e)}(i/1e3,t),function(t){J.clearRect(0,0,$.width,$.height),function(t,e,n,i){t.beginPath(),t.lineTo(n.translateValueX(0),n.translateValueY(i.y));var r=t.createLinearGradient(0,0,0,1e3);r.addColorStop(0,"#999999"),r.addColorStop(1,"#cccccc"),t.fillStyle=r;for(var o=1;o<e.points.length;o++){var a=n.translate(e.points[o]);t.lineTo(a.x,a.y)}t.lineTo(n.translateValueX(i.x),n.translateValueY(i.y)),t.fillStyle="#ffffff",t.fill()}(J,t.terrain,nt,Q);for(var e=0;e<st.length;e++)st[e].draw(J,t,nt);!function(t,e){var n=nt.translateValueX(2);t.font="".concat(n,"px Arial");var i=e.lander.fuel;t.fillStyle=i>0?"#00ff00":"#ffffff";var r=nt.translate(lt);t.fillText("Fuel: ".concat(i.toFixed(2),"L"),r.x,r.y);var o=e.lander.rotation;t.fillStyle=o<5||o>355?"#00ff00":"#ffffff";var a=nt.translate(ht);t.fillText("Angle: ".concat(o.toFixed(2),"Â°"),a.x,a.y);var s=e.lander.velocity.magnitude();t.fillStyle=s<2?"#00ff00":"#ffffff";var u=nt.translate(ct);t.fillText("Velocity: ".concat(s.toFixed(2)," m/s"),u.x,u.y),t.fillStyle="#ffffff"}(J,t)}(t),t.running&&requestAnimationFrame(e)}}!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new z(new i(Q.x/2,0),tt,new i(5,5));t.lander=n,st.push(n),ut.push(n);for(var r=new H(8,100,new i(0,Q.y/2),new i(Q.x,Q.y/2)),o=[],a=3-e,s=10,u=Q.x-10,l=(u-s)/a,h=0;h<a;h++)o.push(r.insertSafeZone(s+l*h,s+l*(h+1),7.5*a));t.terrain=r,t.safeZones=o,requestAnimationFrame(dt(t))}((at={terrain:void 0,running:!0,lander:void 0,safeZones:void 0,commands:void 0,keys:void 0,config:{fuelConsumption:20,thrustCoefficient:10,theta:90,gravity:new i(0,1),worldSize:Q},sounds:{mainThruster:new B("assets/mainthruster.wav",4),subThruster:new B("assets/subthruster.wav",4),explosion:new B("assets/explosion.wav"),landing:new B("assets/landing.wav"),noFuel:new B("assets/nofuel.wav",1)}},at.commands=((it=new X).createCommand("beginThrust",(function(t){t.lander.thrusting=!0,t.lander.fuel>0?t.sounds.mainThruster.play():t.sounds.noFuel.play()})),it.createCommand("endThrust",(function(t){t.lander.thrusting=!1,t.sounds.mainThruster.stop(),t.sounds.noFuel.stop()})),it.createCommand("fuelExpired",(function(t){t.sounds.mainThruster.playing&&(t.sounds.mainThruster.stop(),t.sounds.noFuel.play()),t.sounds.subThruster.playing&&(t.sounds.subThruster.stop(),t.sounds.noFuel.play())})),it.createCommand("beginTurnLeft",(function(t){t.lander.turningLeft=!0,t.lander.fuel>0?t.sounds.subThruster.play():t.sounds.noFuel.play()})),it.createCommand("endTurnLeft",(function(t){t.sounds.subThruster.stop(),t.sounds.noFuel.stop(),t.lander.turningLeft=!1})),it.createCommand("beginTurnRight",(function(t){t.lander.fuel>0?t.sounds.subThruster.play():t.sounds.noFuel.play(),t.lander.turningRight=!0})),it.createCommand("endTurnRight",(function(t){t.sounds.subThruster.stop(),t.sounds.noFuel.stop(),t.lander.turningRight=!1})),it.createCommand("safeLanding",(function(t){t.sounds.landing.play(),t.lander.freeze()})),it.createCommand("crashLanding",(function(t){t.sounds.explosion.play(),t.lander.crashed=!0,t.lander.freeze()})),it),at.keys=(rt=at,K(ot=new D,rt.commands,"Thrust","ArrowUp",rt),K(ot,rt.commands,"TurnLeft","ArrowLeft",rt),K(ot,rt.commands,"TurnRight","ArrowRight",rt),ot),at),1)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy92ZWN0b3IyLnRzIiwid2VicGFjazovL2x1bmFybGFuZGVyLy4vc3JjL3RleHR1cmUudHMiLCJ3ZWJwYWNrOi8vbHVuYXJsYW5kZXIvLi9zcmMvY29vcmRpbmF0ZS50cyIsIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy9wYXJ0aWNsZS50cyIsIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy9jb2xsaXNpb24udHMiLCJ3ZWJwYWNrOi8vbHVuYXJsYW5kZXIvLi9zcmMvcmFuZG9tLnRzIiwid2VicGFjazovL2x1bmFybGFuZGVyLy4vc3JjL2NpcmNsZS50cyIsIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy9sYW5kZXIudHMiLCJ3ZWJwYWNrOi8vbHVuYXJsYW5kZXIvLi9zcmMva2V5LnRzIiwid2VicGFjazovL2x1bmFybGFuZGVyLy4vc3JjL2NvbW1hbmQudHMiLCJ3ZWJwYWNrOi8vbHVuYXJsYW5kZXIvLi9zcmMvdGVycmFpbi50cyIsIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy9zb3VuZC50cyIsIndlYnBhY2s6Ly9sdW5hcmxhbmRlci8uL3NyYy9nYW1lLnRzIiwid2VicGFjazovL2x1bmFybGFuZGVyLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbIlZlY3RvcjIiLCJ4IiwieSIsInRoaXMiLCJfeCIsIl95IiwiTWF0aCIsInJhbmRvbSIsIm5vcm1hbGl6ZSIsInBvczEiLCJwb3MyIiwic3FydCIsInBvdyIsIm1hZ25pdHVkZSIsInNjYWxhciIsIm90aGVyIiwiZGVncmVlcyIsInJhZCIsIlBJIiwiY29zIiwic2luIiwiZHJhd1RleHR1cmUiLCJjb250ZXh0IiwidGV4dHVyZSIsInBvc2l0aW9uIiwic2l6ZSIsInJvdGF0aW9uIiwicmVhZHkiLCJzYXZlIiwidHJhbnNsYXRlIiwicm90YXRlIiwiZHJhd0ltYWdlIiwicmVzdG9yZSIsIlRleHR1cmUiLCJlbCIsIkltYWdlIiwic3JjIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlZpcnR1YWxDb29yZGluYXRlU3lzdGVtIiwic2NhbGVYIiwic2NhbGVZIiwidjEiLCJwIiwiUGFydGljbGVDb250YWluZXIiLCJwYXJ0aWNsZXMiLCJkZWx0YSIsInN0YXRlIiwiZmlsdGVyIiwidXBkYXRlIiwicmVtYWluaW5nVGltZSIsInBhcnRpY2xlIiwicHVzaCIsIlBhcnRpY2xlRW1pdHRlciIsImdlbmVyYXRvciIsInByZWRpY2F0ZSIsInJhdGUiLCJjb3VudCIsIl9jb250YWluZXIiLCJfcGFydGljbGVHZW5lcmF0b3IiLCJfcHJlZGljYXRlIiwiX2NvdW50IiwiX3JhdGUiLCJjb29yZGluYXRlcyIsImZvckVhY2giLCJkcmF3IiwiX2VsYXBzZWQiLCJpIiwiYWRkIiwiUGFydGljbGVFZmZlY3QiLCJ2ZWxvY2l0eSIsImxpZmV0aW1lIiwiY2VudGVyIiwiX2NlbnRlciIsIl92ZWxvY2l0eSIsIl9saWZldGltZSIsIl9yb3RhdGlvbiIsIl90ZXh0dXJlIiwiX3NpemUiLCJfZWxhcHNlZExpZmV0aW1lIiwiZ2xvYmFsQWxwaGEiLCJfZGlyZWN0aW9uIiwiXyIsInNjYWxlIiwiaXNDb2xsaWRpbmciLCJjaXJjbGUiLCJwdDEiLCJwdDIiLCJ2MiIsImIiLCJjIiwiZCIsInJhZGl1cyIsImlzTmFOIiwidTEiLCJ1MiIsInJhbmQiLCJDaXJjbGUiLCJfcmFkaXVzIiwiVGhydXN0R2VuZXJhdG9yIiwicm90YXRpb25PZmZzZXQiLCJfcm90YXRpb25PZmZzZXQiLCJ0ZXgiLCJ2IiwibGFuZGVyIiwicm90YXRpb25WZWN0b3IiLCJnYXVzc2lhbiIsIkV4cGxvc2lvbkdlbmVyYXRvciIsIkxhbmRlciIsImZyb3plbiIsIl9wb3NpdGlvbiIsIl9yb3RhdGlvblZlY3RvciIsInRocnVzdEVtaXR0ZXIiLCJ0aHJ1c3RpbmciLCJmdWVsIiwibGVmdFJvdGF0aW9uRW1pdHRlciIsInR1cm5pbmdMZWZ0IiwicmlnaHRSb3RhdGlvbkVtaXR0ZXIiLCJ0dXJuaW5nUmlnaHQiLCJleHBsb3Npb25FbWl0dGVyIiwiX2lzRXhwbG9kaW5nIiwicG9zaXRpb25FbWl0dGVycyIsImNyYXNoZWQiLCJiZWdpblBhdGgiLCJzdHJva2VTdHlsZSIsImNpcmNsZXBvcyIsImFyYyIsInN0cm9rZSIsImFkalBvcyIsImFkalZlYyIsImxpbmVUbyIsInNxck1hZ25pdHVkZSIsImNvbnNvbGUiLCJsb2ciLCJfZXhwbG9zaW9uQ291bnQiLCJjb25maWciLCJncmF2aXR5IiwidGhydXN0Q29lZmZpY2llbnQiLCJmdWVsQ29uc3VtcHRpb24iLCJjb21tYW5kcyIsImV4ZWN1dGUiLCJ0ZXJyYWluIiwicG9pbnRzIiwibGVuZ3RoIiwiaiIsInNhZmVab25lcyIsIndvcmxkU2l6ZSIsImRpcmVjdGlvbiIsInRoZXRhIiwiS2V5SGFuZGxlciIsIkRhdGUiLCJub3ciLCJTZXQiLCJwcmVzc2VkIiwibW9kaWZpZXJzIiwiX3dhc1ByZXNzZWQiLCJzZXQiLCJfb25LZXlEb3duIiwiX29uS2V5VXAiLCJyZXMiLCJfbGFzdFByZXNzZWQiLCJfb25TdGF0ZUNoYW5nZWQiLCJhY3Rpb24iLCJLZXlNYW5hZ2VyIiwid2luZG93IiwidXBkYXRlRG93biIsImJpbmQiLCJ1cGRhdGVVcCIsImhhbmRsZXJzIiwiTWFwIiwia2V5Q29kZSIsImRlc2NyaXB0aW9uIiwiaGFzIiwid2FybiIsImRlc2NyaXB0aW9ucyIsInVwZGF0ZUZuIiwiZ2V0IiwiYWRkVXAiLCJhZGREb3duIiwiYWRkQ2hhbmdlZCIsImV2ZW50Iiwia2V5IiwicHJldmVudERlZmF1bHQiLCJhbHQiLCJhbHRLZXkiLCJzaGlmdCIsInNoaWZ0S2V5IiwiY3RybCIsImN0cmxLZXkiLCJrZXljb2RlIiwibWFwVG9Db21tYW5kcyIsImtleU1hbmFnZXIiLCJjb21tYW5kTmFtZSIsImtleU5hbWUiLCJyZWdpc3RlckhhbmRsZXIiLCJiaW5kRG93biIsImJpbmRVcCIsImJpbmRDaGFuZ2VkIiwiQ29tbWFuZCIsIm5hbWUiLCJfbmFtZSIsIl9hY3Rpb24iLCJDb21tYW5kU2VydmljZSIsImludm9rZSIsIlRlcnJhaW4iLCJpdGVyYXRpb25zIiwicm91Z2huZXNzIiwicDEiLCJwMiIsInNhdmVkTGVuZ3RoIiwibWlkIiwic3BsaWNlIiwibWluWCIsIm1heFgiLCJ3aWR0aCIsInRhcmdldFhNaW4iLCJvZmZzZXQiLCJwb2ludCIsInNhdmVkIiwiU291bmRFZmZlY3QiLCJzb3VyY2UiLCJjdXRvZmYiLCJBdWRpbyIsImxvb3AiLCJwbGF5IiwiX3BsYXlpbmciLCJzZXRUaW1lb3V0IiwiY3VycmVudFRpbWUiLCJwbGF5UmVjIiwiZHVyYXRpb24iLCJwYXVzZSIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwibGFuZGVyVGV4dHVyZSIsIm1heENvb3JkIiwibWluIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiaGVpZ2h0IiwidmNzIiwia2V5cyIsImdsb2JhbFN0YXRlIiwiZHJhd2FibGVzIiwiQXJyYXkiLCJ0aWNraW5nIiwiZnVlbFBvc2l0aW9uIiwiYW5nbGVQb3NpdGlvbiIsInZlbG9jaXR5UG9zaXRpb24iLCJsYXN0VGltZSIsImZuIiwiY2xlYXJSZWN0IiwiY3R4IiwiY29uc3RyYWludCIsInRyYW5zbGF0ZVZhbHVlWCIsInRyYW5zbGF0ZVZhbHVlWSIsImdyZCIsImNyZWF0ZUxpbmVhckdyYWRpZW50IiwiYWRkQ29sb3JTdG9wIiwiZmlsbFN0eWxlIiwicHQiLCJmaWxsIiwiZHJhd1RlcnJhaW4iLCJmb250U2l6ZSIsImZvbnQiLCJhZGp1c3RlZEZ1ZWxQb3NpdGlvbiIsImZpbGxUZXh0IiwidG9GaXhlZCIsImFuZ2xlIiwiYWRqdXN0ZWRBbmdsZVBvc2l0aW9uIiwibWFnbiIsImFkanVzdGVkVmVsb2NpdHlQb3NpdGlvbiIsImRyYXdUZXh0IiwicnVubmluZyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRpZmZpY3VsdHkiLCJtYXgiLCJ2YWxpZFBvcnRpb25zIiwiaW5zZXJ0U2FmZVpvbmUiLCJzdGFydCIsInVuZGVmaW5lZCIsInNvdW5kcyIsIm1haW5UaHJ1c3RlciIsInN1YlRocnVzdGVyIiwiZXhwbG9zaW9uIiwibGFuZGluZyIsIm5vRnVlbCIsImNyZWF0ZUNvbW1hbmQiLCJzdG9wIiwicGxheWluZyIsImZyZWV6ZSJdLCJtYXBwaW5ncyI6ImlUQUFPLElBQU1BLEVBQWIsV0FVRSxXQUFZQyxFQUFXQyxJLDRGQUFXLHFCQVBiLEdBT2EsWUFOYixHQU9uQkMsS0FBS0MsR0FBS0gsRUFDVkUsS0FBS0UsR0FBS0gsRSxVQVpkLE8sRUFBQSxFLEVBQUEscUJBTUUsV0FDRSxPQUFPLElBQUlGLEVBQVFNLEtBQUtDLFNBQVVELEtBQUtDLFVBQVVDLGNBUHJELHNCQWVFLFNBQXVCQyxFQUFlQyxHQUNwQyxPQUFPSixLQUFLSyxLQUNWTCxLQUFLTSxJQUFJSCxFQUFLUixFQUFJUyxFQUFLVCxFQUFHLEdBQUtLLEtBQUtNLElBQUlILEVBQUtQLEVBQUlRLEVBQUtSLEVBQUcsUSxFQWpCL0QsY0FxQkUsV0FDRSxPQUFPQyxLQUFLQyxLQXRCaEIsYUF5QkUsV0FDRSxPQUFPRCxLQUFLRSxLQTFCaEIsMEJBNkJFLFdBQ0UsT0FBT0MsS0FBS00sSUFBSVQsS0FBS0YsRUFBRyxHQUFLSyxLQUFLTSxJQUFJVCxLQUFLRCxFQUFHLEtBOUJsRCx1QkFpQ0UsV0FDRSxPQUFPSSxLQUFLSyxLQUFLTCxLQUFLTSxJQUFJVCxLQUFLRixFQUFHLEdBQUtLLEtBQUtNLElBQUlULEtBQUtELEVBQUcsTUFsQzVELHVCQXFDRSxXQUNFLElBQU1XLEVBQVlWLEtBQUtVLFlBQ3ZCLE9BQU8sSUFBSWIsRUFBUUcsS0FBS0YsRUFBSVksRUFBV1YsS0FBS0QsRUFBSVcsS0F2Q3BELG1CQTBDRSxTQUFNQyxHQUNKLE9BQU8sSUFBSWQsRUFBUUcsS0FBS0YsRUFBSWEsRUFBUVgsS0FBS0QsRUFBSVksS0EzQ2pELGlCQThDRSxTQUFJQyxHQUNGLE9BQU8sSUFBSWYsRUFBUUcsS0FBS0YsRUFBSWMsRUFBTWQsRUFBR0UsS0FBS0QsRUFBSWEsRUFB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QVl1QyxPQUFPSSxRQUFROUQsT0FDM0JtQixFQUFZM0ksT0FBTzJMLFlBR3JCeEosR0FBU3FKLGNBQWMsZ0JBQWdCLFNBQUE3QyxHQUNyQ0EsRUFBWXVDLE9BQU9HLFVBQVU3RCxPQUM3Qm1CLEVBQVkzSSxPQUFPa0IsU0FBVSxFQUM3QnlILEVBQVkzSSxPQUFPMkwsWUFHZHhKLElBb0NQd0csR0FBWUQsTUFqQ01uTSxHQWlDV29NLEdBOUI3QnJELEVBRE1vRCxHQUFPLElBQUkvRSxFQUNHcEgsR0FBTTRGLFNBQVUsU0FBVSxVQUFXNUYsSUFDekQrSSxFQUFjb0QsR0FBTW5NLEdBQU00RixTQUFVLFdBQVksWUFBYTVGLElBQzdEK0ksRUFBY29ELEdBQU1uTSxHQUFNNEYsU0FBVSxZQUFhLGFBQWM1RixJQUN4RG1NLElBNEJBQyxJQ3ZQVSxJIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBWZWN0b3IyIHtcbiAgc3RhdGljIFpFUk86IFZlY3RvcjIgPSBuZXcgVmVjdG9yMigwLCAwKTtcblxuICBwcml2YXRlIF94OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF95OiBudW1iZXIgPSAwO1xuXG4gIHN0YXRpYyByYW5kb20oKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKE1hdGgucmFuZG9tKCksIE1hdGgucmFuZG9tKCkpLm5vcm1hbGl6ZSgpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICB0aGlzLl94ID0geDtcbiAgICB0aGlzLl95ID0geTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZGlzdGFuY2UocG9zMTogVmVjdG9yMiwgcG9zMjogVmVjdG9yMikge1xuICAgIHJldHVybiBNYXRoLnNxcnQoXG4gICAgICBNYXRoLnBvdyhwb3MxLnggLSBwb3MyLngsIDIpICsgTWF0aC5wb3cocG9zMS55IC0gcG9zMi55LCAyKVxuICAgICk7XG4gIH1cblxuICBnZXQgeCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl94O1xuICB9XG5cbiAgZ2V0IHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5feTtcbiAgfVxuXG4gIHNxck1hZ25pdHVkZSgpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnBvdyh0aGlzLngsIDIpICsgTWF0aC5wb3codGhpcy55LCAyKTtcbiAgfVxuXG4gIG1hZ25pdHVkZSgpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LCAyKSArIE1hdGgucG93KHRoaXMueSwgMikpO1xuICB9XG5cbiAgbm9ybWFsaXplKCk6IFZlY3RvcjIge1xuICAgIGNvbnN0IG1hZ25pdHVkZSA9IHRoaXMubWFnbml0dWRlKCk7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCAvIG1hZ25pdHVkZSwgdGhpcy55IC8gbWFnbml0dWRlKTtcbiAgfVxuXG4gIHNjYWxlKHNjYWxhcjogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCAqIHNjYWxhciwgdGhpcy55ICogc2NhbGFyKTtcbiAgfVxuXG4gIGFkZChvdGhlcjogVmVjdG9yMik6IFZlY3RvcjIge1xuICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLnggKyBvdGhlci54LCB0aGlzLnkgKyBvdGhlci55KTtcbiAgfVxuXG4gIHJvdGF0ZShkZWdyZWVzOiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICBjb25zdCByYWQgPSAoZGVncmVlcyAqIE1hdGguUEkpIC8gMTgwO1xuICAgIGxldCB2YWwgPSBuZXcgVmVjdG9yMihcbiAgICAgIHRoaXMueCAqIE1hdGguY29zKHJhZCkgLSBNYXRoLnNpbihyYWQpICogdGhpcy55LFxuICAgICAgdGhpcy54ICogTWF0aC5zaW4ocmFkKSArIHRoaXMueSAqIE1hdGguY29zKHJhZClcbiAgICApO1xuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgVmVjdG9yMih4OiAke3RoaXMueH0sIHk6ICR7dGhpcy55fSlgO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZlY3RvcjI7XG4iLCJpbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3VGV4dHVyZShcbiAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICB0ZXh0dXJlOiBUZXh0dXJlLFxuICBwb3NpdGlvbjogVmVjdG9yMixcbiAgc2l6ZTogVmVjdG9yMixcbiAgcm90YXRpb246IG51bWJlciA9IDBcbikge1xuICBpZiAoIXRleHR1cmUucmVhZHkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29udGV4dC5zYXZlKCk7XG4gIGNvbnRleHQudHJhbnNsYXRlKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xuICBjb250ZXh0LnJvdGF0ZSgocm90YXRpb24gKiBNYXRoLlBJKSAvIDE4MCk7XG4gIGNvbnRleHQudHJhbnNsYXRlKC1wb3NpdGlvbi54LCAtcG9zaXRpb24ueSk7XG4gIGNvbnRleHQuZHJhd0ltYWdlKFxuICAgIHRleHR1cmUudGV4dHVyZSxcbiAgICBwb3NpdGlvbi54IC0gc2l6ZS54IC8gMixcbiAgICBwb3NpdGlvbi55IC0gc2l6ZS55IC8gMixcbiAgICBzaXplLngsXG4gICAgc2l6ZS55XG4gICk7XG4gIGNvbnRleHQucmVzdG9yZSgpO1xufVxuXG5leHBvcnQgY2xhc3MgVGV4dHVyZSB7XG4gIHNpemU6IFZlY3RvcjI7XG4gIGVsOiBIVE1MSW1hZ2VFbGVtZW50O1xuICByZWFkeTogYm9vbGVhbiA9IGZhbHNlO1xuICBjb25zdHJ1Y3Rvcih0ZXh0dXJlOiBzdHJpbmcsIHNpemU6IFZlY3RvcjIpIHtcbiAgICB0aGlzLmVsID0gbmV3IEltYWdlKCk7XG4gICAgdGhpcy5lbC5zcmMgPSB0ZXh0dXJlO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5yZWFkeSA9IHRydWU7XG4gICAgfSk7XG4gIH1cblxuICBnZXQgdGV4dHVyZSgpOiBDYW52YXNJbWFnZVNvdXJjZSB7XG4gICAgcmV0dXJuIHRoaXMuZWw7XG4gIH1cbn1cbmBgO1xuIiwiaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4vdmVjdG9yMlwiO1xuXG5leHBvcnQgY2xhc3MgVmlydHVhbENvb3JkaW5hdGVTeXN0ZW0ge1xuICBwcml2YXRlIHNjYWxlWDogbnVtYmVyO1xuICBwcml2YXRlIHNjYWxlWTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHNjYWxlWDogbnVtYmVyLCBzY2FsZVk6IG51bWJlcikge1xuICAgIHRoaXMuc2NhbGVYID0gc2NhbGVYO1xuICAgIHRoaXMuc2NhbGVZID0gc2NhbGVZO1xuICB9XG5cbiAgdHJhbnNsYXRlKHYxOiBWZWN0b3IyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHYxLnggKiB0aGlzLnNjYWxlWCwgdjEueSAqIHRoaXMuc2NhbGVZKTtcbiAgfVxuXG4gIHRyYW5zbGF0ZVZhbHVlWChwOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBwICogdGhpcy5zY2FsZVg7XG4gIH1cblxuICB0cmFuc2xhdGVWYWx1ZVkocDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gcCAqIHRoaXMuc2NhbGVZO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29vcmRpbmF0ZVRyYW5zbGF0YWJsZSB7XG4gIHRyYW5zbGF0ZSh2MTogVmVjdG9yMik6IFZlY3RvcjI7XG4gIHRyYW5zbGF0ZVZhbHVlWChwOiBudW1iZXIpOiBudW1iZXI7XG4gIHRyYW5zbGF0ZVZhbHVlWShwOiBudW1iZXIpOiBudW1iZXI7XG59XG4iLCJpbXBvcnQgVGlja2luZyBmcm9tIFwiLi90aWNraW5nXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi92ZWN0b3IyXCI7XG5pbXBvcnQgRHJhd2FibGUgZnJvbSBcIi4vZHJhd2FibGVcIjtcbmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gXCIuL2Z1bmN0aW9uYWxcIjtcbmltcG9ydCB7IGRyYXdUZXh0dXJlLCBUZXh0dXJlIH0gZnJvbSBcIi4vdGV4dHVyZVwiO1xuaW1wb3J0IHsgQ29vcmRpbmF0ZVRyYW5zbGF0YWJsZSB9IGZyb20gXCIuL2Nvb3JkaW5hdGVcIjtcblxuZXhwb3J0IGNsYXNzIFBhcnRpY2xlQ29udGFpbmVyPFQ+IGltcGxlbWVudHMgVGlja2luZzxUPiB7XG4gIHBhcnRpY2xlczogQXJyYXk8UGFydGljbGVFZmZlY3Q8VD4+O1xuICB1cGRhdGUoZGVsdGE6IG51bWJlciwgc3RhdGU6IFQpIHtcbiAgICAvLyBUT0RPOiBDaGVjayBvbiB0aGUgZWZmaWNpZW5jeSBvZiB0aGlzLlxuICAgIHRoaXMucGFydGljbGVzID0gdGhpcy5wYXJ0aWNsZXMuZmlsdGVyKChwKSA9PiB7XG4gICAgICBwLnVwZGF0ZShkZWx0YSwgc3RhdGUpO1xuICAgICAgcmV0dXJuIHAucmVtYWluaW5nVGltZSA+IDA7XG4gICAgfSk7XG4gIH1cbiAgYWRkKHBhcnRpY2xlOiBQYXJ0aWNsZUVmZmVjdDxUPikge1xuICAgIHRoaXMucGFydGljbGVzLnB1c2gocGFydGljbGUpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wYXJ0aWNsZXMgPSBbXTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUGFydGljbGVFbWl0dGVyPFQ+IGltcGxlbWVudHMgVGlja2luZzxUPiwgRHJhd2FibGU8VD4ge1xuICBwb3NpdGlvbjogVmVjdG9yMjtcbiAgcHJpdmF0ZSBfcmF0ZTogbnVtYmVyID0gMC4xO1xuICBwcml2YXRlIF9lbGFwc2VkOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9jb3VudDogbnVtYmVyID0gMTA7XG4gIHByaXZhdGUgX2NvbnRhaW5lcjogUGFydGljbGVDb250YWluZXI8VD47XG4gIHByaXZhdGUgX3BhcnRpY2xlR2VuZXJhdG9yOiBQYXJ0aWNsZUdlbmVyYXRvcjxUPjtcbiAgcHJpdmF0ZSBfcHJlZGljYXRlOiBQcmVkaWNhdGU8VD47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgZ2VuZXJhdG9yOiBQYXJ0aWNsZUdlbmVyYXRvcjxUPixcbiAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZTxUPixcbiAgICByYXRlOiBudW1iZXIgPSAwLjEsXG4gICAgY291bnQ6IG51bWJlciA9IDEwXG4gICkge1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IG5ldyBQYXJ0aWNsZUNvbnRhaW5lcjxUPigpO1xuICAgIHRoaXMuX3BhcnRpY2xlR2VuZXJhdG9yID0gZ2VuZXJhdG9yO1xuICAgIHRoaXMuX3ByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICB0aGlzLl9jb3VudCA9IGNvdW50O1xuICAgIHRoaXMuX3JhdGUgPSByYXRlO1xuICB9XG4gIGRyYXcoXG4gICAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIHN0YXRlOiBULFxuICAgIGNvb3JkaW5hdGVzPzogQ29vcmRpbmF0ZVRyYW5zbGF0YWJsZVxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9jb250YWluZXIucGFydGljbGVzLmZvckVhY2goKHApID0+IHtcbiAgICAgIHAuZHJhdyhjb250ZXh0LCBzdGF0ZSwgY29vcmRpbmF0ZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlKGRlbHRhOiBudW1iZXIsIHN0YXRlOiBUKSB7XG4gICAgaWYgKHRoaXMuX3ByZWRpY2F0ZShzdGF0ZSkpIHtcbiAgICAgIHRoaXMuX2VsYXBzZWQgKz0gZGVsdGE7XG4gICAgICBpZiAodGhpcy5fZWxhcHNlZCA+IHRoaXMuX3JhdGUpIHtcbiAgICAgICAgdGhpcy5fZWxhcHNlZCAtPSB0aGlzLl9yYXRlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NvdW50OyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9jb250YWluZXIuYWRkKFxuICAgICAgICAgICAgbmV3IFBhcnRpY2xlRWZmZWN0PFQ+KFxuICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLFxuICAgICAgICAgICAgICB0aGlzLl9wYXJ0aWNsZUdlbmVyYXRvci52ZWxvY2l0eShzdGF0ZSksXG4gICAgICAgICAgICAgIHRoaXMuX3BhcnRpY2xlR2VuZXJhdG9yLmxpZmV0aW1lKHN0YXRlKSxcbiAgICAgICAgICAgICAgdGhpcy5fcGFydGljbGVHZW5lcmF0b3Iucm90YXRpb24oc3RhdGUpLFxuICAgICAgICAgICAgICB0aGlzLl9wYXJ0aWNsZUdlbmVyYXRvci50ZXh0dXJlKHN0YXRlKSxcbiAgICAgICAgICAgICAgdGhpcy5fcGFydGljbGVHZW5lcmF0b3Iuc2l6ZShzdGF0ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2NvbnRhaW5lci51cGRhdGUoZGVsdGEsIHN0YXRlKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpY2xlR2VuZXJhdG9yPFQ+IHtcbiAgdGV4dHVyZShzdGF0ZTogVCk6IFRleHR1cmU7XG4gIHNpemUoc3RhdGU6IFQpOiBWZWN0b3IyO1xuICB2ZWxvY2l0eShzdGF0ZTogVCk6IFZlY3RvcjI7XG4gIGxpZmV0aW1lKHN0YXRlOiBUKTogbnVtYmVyO1xuICByb3RhdGlvbihzdGF0ZTogVCk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFBhcnRpY2xlRWZmZWN0PFQ+IGltcGxlbWVudHMgRHJhd2FibGU8VD4sIFRpY2tpbmc8VD4ge1xuICBwcml2YXRlIF9jZW50ZXI6IFZlY3RvcjI7XG4gIHByaXZhdGUgX2RpcmVjdGlvbjogVmVjdG9yMjtcbiAgcHJpdmF0ZSBfdmVsb2NpdHk6IFZlY3RvcjI7XG4gIHByaXZhdGUgX2xpZmV0aW1lOiBudW1iZXI7XG4gIHByaXZhdGUgX3JvdGF0aW9uOiBudW1iZXI7XG4gIHByaXZhdGUgX2VsYXBzZWRMaWZldGltZTogbnVtYmVyO1xuICBwcml2YXRlIF90ZXh0dXJlOiBUZXh0dXJlO1xuICBwcml2YXRlIF9zaXplOiBWZWN0b3IyO1xuICBjb25zdHJ1Y3RvcihcbiAgICBjZW50ZXI6IFZlY3RvcjIsXG4gICAgdmVsb2NpdHk6IFZlY3RvcjIsXG4gICAgbGlmZXRpbWU6IG51bWJlcixcbiAgICByb3RhdGlvbjogbnVtYmVyLFxuICAgIHRleHR1cmU6IFRleHR1cmUsXG4gICAgc2l6ZTogVmVjdG9yMlxuICApIHtcbiAgICB0aGlzLl9jZW50ZXIgPSBjZW50ZXI7XG4gICAgdGhpcy5fdmVsb2NpdHkgPSB2ZWxvY2l0eTtcbiAgICB0aGlzLl9saWZldGltZSA9IGxpZmV0aW1lO1xuICAgIHRoaXMuX3JvdGF0aW9uID0gcm90YXRpb247XG4gICAgdGhpcy5fdGV4dHVyZSA9IHRleHR1cmU7XG4gICAgdGhpcy5fc2l6ZSA9IHNpemU7XG4gICAgdGhpcy5fZWxhcHNlZExpZmV0aW1lID0gMDtcbiAgfVxuXG4gIGRyYXcoXG4gICAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIHN0YXRlOiBULFxuICAgIGNvb3JkaW5hdGVzOiBDb29yZGluYXRlVHJhbnNsYXRhYmxlXG4gICkge1xuICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxIC0gdGhpcy5fZWxhcHNlZExpZmV0aW1lIC8gdGhpcy5fbGlmZXRpbWU7XG4gICAgZHJhd1RleHR1cmUoXG4gICAgICBjb250ZXh0LFxuICAgICAgdGhpcy5fdGV4dHVyZSxcbiAgICAgIGNvb3JkaW5hdGVzLnRyYW5zbGF0ZSh0aGlzLl9jZW50ZXIpLFxuICAgICAgY29vcmRpbmF0ZXMudHJhbnNsYXRlKHRoaXMuX3NpemUpLFxuICAgICAgdGhpcy5fcm90YXRpb25cbiAgICApO1xuICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxO1xuICB9XG5cbiAgcHVibGljIGdldCB2ZWxvY2l0eSgpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5fdmVsb2NpdHk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGRpcmVjdGlvbigpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xuICB9XG5cbiAgcHVibGljIGdldCBjZW50ZXIoKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuX2NlbnRlcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgcmVtYWluaW5nVGltZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9saWZldGltZSAtIHRoaXMuX2VsYXBzZWRMaWZldGltZTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUoZGVsdGE6IG51bWJlciwgXzogVCkge1xuICAgIHRoaXMuX2VsYXBzZWRMaWZldGltZSArPSBkZWx0YTtcbiAgICB0aGlzLl9jZW50ZXIgPSB0aGlzLl9jZW50ZXIuYWRkKHRoaXMuX3ZlbG9jaXR5LnNjYWxlKGRlbHRhKSk7XG4gIH1cbn1cbiIsImltcG9ydCBWZWN0b3IyIGZyb20gXCIuL3ZlY3RvcjJcIjtcbmltcG9ydCBDaXJjbGUgZnJvbSBcIi4vY2lyY2xlXCI7XG5cbi8qKlxuICogTGluZS1DaXJjbGUgSW50ZXJzZWN0aW9uXG4gKiBAc291cmNlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM3MjI0OTEyL2NpcmNsZS1saW5lLXNlZ21lbnQtY29sbGlzaW9uXG4gKlxuICogQHBhcmFtIGNpcmNsZSBUaGUgY2lyY2xlIHRvIHRlc3QgZm9yIGludGVyc2VjdGlvbi5cbiAqIEBwYXJhbSBwdDEgVGhlIGZpcnN0IHBvaW50IG9mIHRoZSBsaW5lLlxuICogQHBhcmFtIHB0MiBUaGUgc2Vjb25kIHBvaW50IG9mIHRoZSBsaW5lLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDb2xsaWRpbmcoXG4gIGNpcmNsZTogQ2lyY2xlLFxuICBwdDE6IFZlY3RvcjIsXG4gIHB0MjogVmVjdG9yMlxuKTogYm9vbGVhbiB7XG4gIGxldCB2MSA9IG5ldyBWZWN0b3IyKHB0Mi54IC0gcHQxLngsIHB0Mi55IC0gcHQxLnkpO1xuICBsZXQgdjIgPSBuZXcgVmVjdG9yMihwdDEueCAtIGNpcmNsZS5jZW50ZXIueCwgcHQxLnkgLSBjaXJjbGUuY2VudGVyLnkpO1xuICBsZXQgYiA9IC0yICogKHYxLnggKiB2Mi54ICsgdjEueSAqIHYyLnkpO1xuICBsZXQgYyA9IDIgKiAodjEueCAqIHYxLnggKyB2MS55ICogdjEueSk7XG4gIGxldCBkID0gTWF0aC5zcXJ0KFxuICAgIGIgKiBiIC0gMiAqIGMgKiAodjIueCAqIHYyLnggKyB2Mi55ICogdjIueSAtIGNpcmNsZS5yYWRpdXMgKiBjaXJjbGUucmFkaXVzKVxuICApO1xuICBpZiAoaXNOYU4oZCkpIHtcbiAgICAvLyBubyBpbnRlcmNlcHRcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gVGhlc2UgcmVwcmVzZW50IHRoZSB1bml0IGRpc3RhbmNlIG9mIHBvaW50IG9uZSBhbmQgdHdvIG9uIHRoZSBsaW5lXG4gIGxldCB1MSA9IChiIC0gZCkgLyBjO1xuICBsZXQgdTIgPSAoYiArIGQpIC8gYztcbiAgaWYgKHUxIDw9IDEgJiYgdTEgPj0gMCkge1xuICAgIC8vIElmIHBvaW50IG9uIHRoZSBsaW5lIHNlZ21lbnRcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodTIgPD0gMSAmJiB1MiA+PSAwKSB7XG4gICAgLy8gSWYgcG9pbnQgb24gdGhlIGxpbmUgc2VnbWVudFxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsImNsYXNzIFJhbmRvbSB7XG4gIGdhdXNzaWFuKGNvdW50OiBudW1iZXIgPSA2KSB7XG4gICAgbGV0IHJhbmQgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICByYW5kICs9IE1hdGgucmFuZG9tKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmQgLyBjb3VudDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcmFuZG9tID0gbmV3IFJhbmRvbSgpO1xuIiwiaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4vdmVjdG9yMlwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaXJjbGUge1xuICBwcml2YXRlIF9jZW50ZXI6IFZlY3RvcjI7XG4gIHByaXZhdGUgX3JhZGl1czogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNlbnRlcjogVmVjdG9yMiwgcmFkaXVzOiBudW1iZXIpIHtcbiAgICB0aGlzLl9jZW50ZXIgPSBjZW50ZXI7XG4gICAgdGhpcy5fcmFkaXVzID0gcmFkaXVzO1xuICB9XG5cbiAgcHVibGljIGdldCBjZW50ZXIoKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuX2NlbnRlcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgcmFkaXVzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3JhZGl1cztcbiAgfVxufVxuIiwiaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi92ZWN0b3IyJ1xuaW1wb3J0IERyYXdhYmxlIGZyb20gJy4vZHJhd2FibGUnXG5pbXBvcnQgVGlja2luZyBmcm9tICcuL3RpY2tpbmcnXG5pbXBvcnQgeyBDb29yZGluYXRlVHJhbnNsYXRhYmxlIH0gZnJvbSAnLi9jb29yZGluYXRlJ1xuaW1wb3J0IHsgZHJhd1RleHR1cmUsIFRleHR1cmUgfSBmcm9tICcuL3RleHR1cmUnXG5pbXBvcnQgeyBHbG9iYWxTdGF0ZSB9IGZyb20gJy4vc3RhdGUnXG5pbXBvcnQgeyBQYXJ0aWNsZUVtaXR0ZXIsIFBhcnRpY2xlR2VuZXJhdG9yIH0gZnJvbSAnLi9wYXJ0aWNsZSdcbmltcG9ydCB7IGlzQ29sbGlkaW5nIH0gZnJvbSAnLi9jb2xsaXNpb24nXG5pbXBvcnQgeyByYW5kb20gfSBmcm9tICcuL3JhbmRvbSdcbmltcG9ydCBDaXJjbGUgZnJvbSAnLi9jaXJjbGUnXG5cbmNsYXNzIFRocnVzdEdlbmVyYXRvciBpbXBsZW1lbnRzIFBhcnRpY2xlR2VuZXJhdG9yPEdsb2JhbFN0YXRlPiB7XG4gIHByaXZhdGUgX3JvdGF0aW9uT2Zmc2V0OiBudW1iZXJcblxuICBjb25zdHJ1Y3RvciAocm90YXRpb25PZmZzZXQ6IG51bWJlciA9IDApIHtcbiAgICB0aGlzLl9yb3RhdGlvbk9mZnNldCA9IHJvdGF0aW9uT2Zmc2V0XG4gIH1cblxuICBwcml2YXRlIHRleDogVGV4dHVyZSA9IG5ldyBUZXh0dXJlKCdhc3NldHMvU21va2UucG5nJywgbmV3IFZlY3RvcjIoMzIsIDMyKSlcbiAgcHJpdmF0ZSBfc2l6ZTogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKDAuNDI1LCAwLjQyNSlcbiAgdGV4dHVyZSAoXzogR2xvYmFsU3RhdGUpOiBUZXh0dXJlIHtcbiAgICByZXR1cm4gdGhpcy50ZXhcbiAgfVxuICBzaXplIChzdGF0ZTogR2xvYmFsU3RhdGUpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5fc2l6ZVxuICB9XG4gIHZlbG9jaXR5IChzdGF0ZTogR2xvYmFsU3RhdGUpOiBWZWN0b3IyIHtcbiAgICBsZXQgdiA9IHN0YXRlLmxhbmRlci5yb3RhdGlvblZlY3RvclxuICAgIGxldCByb3RhdGlvbiA9IHJhbmRvbS5nYXVzc2lhbigxMikgKiAxMDAgLSA1MFxuICAgIHYgPSB2LnJvdGF0ZShyb3RhdGlvbiArIHRoaXMuX3JvdGF0aW9uT2Zmc2V0KVxuICAgIHYgPSB2LnNjYWxlKC01ICogcmFuZG9tLmdhdXNzaWFuKDEyKSlcbiAgICByZXR1cm4gdlxuICB9XG4gIGxpZmV0aW1lIChzdGF0ZTogR2xvYmFsU3RhdGUpOiBudW1iZXIge1xuICAgIHJldHVybiA1ICsgcmFuZG9tLmdhdXNzaWFuKDEyKVxuICB9XG4gIHJvdGF0aW9uIChzdGF0ZTogR2xvYmFsU3RhdGUpOiBudW1iZXIge1xuICAgIHJldHVybiAwXG4gIH1cbn1cbmNsYXNzIEV4cGxvc2lvbkdlbmVyYXRvciBpbXBsZW1lbnRzIFBhcnRpY2xlR2VuZXJhdG9yPEdsb2JhbFN0YXRlPiB7XG4gIHByaXZhdGUgdGV4OiBUZXh0dXJlID0gbmV3IFRleHR1cmUoJ2Fzc2V0cy9GaXJlLnBuZycsIG5ldyBWZWN0b3IyKDMyLCAzMikpXG4gIHByaXZhdGUgX3NpemU6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMigwLjQyNSwgMC40MjUpXG4gIHRleHR1cmUgKF86IEdsb2JhbFN0YXRlKTogVGV4dHVyZSB7XG4gICAgcmV0dXJuIHRoaXMudGV4XG4gIH1cbiAgc2l6ZSAoc3RhdGU6IEdsb2JhbFN0YXRlKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuX3NpemVcbiAgfVxuICB2ZWxvY2l0eSAoc3RhdGU6IEdsb2JhbFN0YXRlKTogVmVjdG9yMiB7XG4gICAgbGV0IHYgPSBzdGF0ZS5sYW5kZXIucm90YXRpb25WZWN0b3JcbiAgICBsZXQgcm90YXRpb24gPSBNYXRoLnJhbmRvbSgpICogMzYwXG4gICAgdiA9IHYucm90YXRlKHJvdGF0aW9uKVxuICAgIHYgPSB2LnNjYWxlKC0yMCAqIHJhbmRvbS5nYXVzc2lhbigxMikpXG4gICAgcmV0dXJuIHZcbiAgfVxuICBsaWZldGltZSAoc3RhdGU6IEdsb2JhbFN0YXRlKTogbnVtYmVyIHtcbiAgICByZXR1cm4gNSArIHJhbmRvbS5nYXVzc2lhbigxMilcbiAgfVxuICByb3RhdGlvbiAoc3RhdGU6IEdsb2JhbFN0YXRlKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMFxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMYW5kZXIgaW1wbGVtZW50cyBEcmF3YWJsZTxHbG9iYWxTdGF0ZT4sIFRpY2tpbmc8R2xvYmFsU3RhdGU+IHtcbiAgcHJpdmF0ZSBzaXplOiBWZWN0b3IyXG4gIHByaXZhdGUgdGV4dHVyZTogVGV4dHVyZVxuICBwcml2YXRlIGZyb3plbjogYm9vbGVhblxuICBwcml2YXRlIHRocnVzdEVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcjxHbG9iYWxTdGF0ZT5cbiAgcHJpdmF0ZSBsZWZ0Um90YXRpb25FbWl0dGVyOiBQYXJ0aWNsZUVtaXR0ZXI8R2xvYmFsU3RhdGU+XG4gIHByaXZhdGUgcmlnaHRSb3RhdGlvbkVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcjxHbG9iYWxTdGF0ZT5cbiAgcHJpdmF0ZSBleHBsb3Npb25FbWl0dGVyOiBQYXJ0aWNsZUVtaXR0ZXI8R2xvYmFsU3RhdGU+XG4gIHByaXZhdGUgX3Bvc2l0aW9uOiBWZWN0b3IyXG4gIHByaXZhdGUgX3ZlbG9jaXR5OiBWZWN0b3IyXG4gIHByaXZhdGUgX3JvdGF0aW9uVmVjdG9yOiBWZWN0b3IyXG4gIHByaXZhdGUgX3JvdGF0aW9uOiBudW1iZXJcbiAgcHJpdmF0ZSBfZXhwbG9zaW9uQ291bnQ6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBfaXNFeHBsb2Rpbmc6IGJvb2xlYW4gPSBmYWxzZVxuXG4gIGZ1ZWw6IG51bWJlciA9IDEwMFxuICBjcmFzaGVkOiBib29sZWFuID0gZmFsc2VcbiAgdGhydXN0aW5nOiBib29sZWFuID0gZmFsc2VcbiAgdHVybmluZ0xlZnQ6IGJvb2xlYW4gPSBmYWxzZVxuICB0dXJuaW5nUmlnaHQ6IGJvb2xlYW4gPSBmYWxzZVxuXG4gIGNvbnN0cnVjdG9yIChwb3NpdGlvbjogVmVjdG9yMiwgdGV4dHVyZTogVGV4dHVyZSwgc2l6ZTogVmVjdG9yMikge1xuICAgIHRoaXMudGV4dHVyZSA9IHRleHR1cmVcbiAgICB0aGlzLnNpemUgPSBzaXplXG4gICAgdGhpcy5mcm96ZW4gPSBmYWxzZVxuICAgIHRoaXMuX3Bvc2l0aW9uID0gcG9zaXRpb25cbiAgICB0aGlzLl92ZWxvY2l0eSA9IG5ldyBWZWN0b3IyKDAsIDApXG4gICAgdGhpcy5fcm90YXRpb25WZWN0b3IgPSBuZXcgVmVjdG9yMigwLCAtMSlcbiAgICB0aGlzLl9yb3RhdGlvbiA9IDBcbiAgICB0aGlzLnRocnVzdEVtaXR0ZXIgPSBuZXcgUGFydGljbGVFbWl0dGVyKFxuICAgICAgbmV3IFRocnVzdEdlbmVyYXRvcigpLFxuICAgICAgc3RhdGUgPT4gc3RhdGUubGFuZGVyLnRocnVzdGluZyAmJiBzdGF0ZS5sYW5kZXIuZnVlbCA+IDAsXG4gICAgICAwLjAzLFxuICAgICAgNVxuICAgIClcbiAgICB0aGlzLmxlZnRSb3RhdGlvbkVtaXR0ZXIgPSBuZXcgUGFydGljbGVFbWl0dGVyKFxuICAgICAgbmV3IFRocnVzdEdlbmVyYXRvcig5MCksXG4gICAgICBzdGF0ZSA9PiBzdGF0ZS5sYW5kZXIudHVybmluZ0xlZnQgJiYgc3RhdGUubGFuZGVyLmZ1ZWwgPiAwLFxuICAgICAgMC4wMyxcbiAgICAgIDNcbiAgICApXG4gICAgdGhpcy5yaWdodFJvdGF0aW9uRW1pdHRlciA9IG5ldyBQYXJ0aWNsZUVtaXR0ZXIoXG4gICAgICBuZXcgVGhydXN0R2VuZXJhdG9yKC05MCksXG4gICAgICBzdGF0ZSA9PiBzdGF0ZS5sYW5kZXIudHVybmluZ1JpZ2h0ICYmIHN0YXRlLmxhbmRlci5mdWVsID4gMCxcbiAgICAgIDAuMDMsXG4gICAgICAzXG4gICAgKVxuICAgIHRoaXMuZXhwbG9zaW9uRW1pdHRlciA9IG5ldyBQYXJ0aWNsZUVtaXR0ZXIoXG4gICAgICBuZXcgRXhwbG9zaW9uR2VuZXJhdG9yKCksXG4gICAgICBzdGF0ZSA9PiB0aGlzLl9pc0V4cGxvZGluZyxcbiAgICAgIDAuMDMsXG4gICAgICAyMDBcbiAgICApXG4gICAgdGhpcy5wb3NpdGlvbkVtaXR0ZXJzKClcbiAgfVxuXG4gIGRyYXcgKFxuICAgIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICBzdGF0ZTogR2xvYmFsU3RhdGUsXG4gICAgY29vcmRpbmF0ZXM6IENvb3JkaW5hdGVUcmFuc2xhdGFibGVcbiAgKSB7XG4gICAgaWYgKCFzdGF0ZS5sYW5kZXIuY3Jhc2hlZCkge1xuICAgICAgZHJhd1RleHR1cmUoXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIHRoaXMudGV4dHVyZSxcbiAgICAgICAgY29vcmRpbmF0ZXMudHJhbnNsYXRlKHRoaXMuX3Bvc2l0aW9uKSxcbiAgICAgICAgY29vcmRpbmF0ZXMudHJhbnNsYXRlKHRoaXMuc2l6ZSksXG4gICAgICAgIHRoaXMuX3JvdGF0aW9uXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMudGhydXN0RW1pdHRlci5kcmF3KGNvbnRleHQsIHN0YXRlLCBjb29yZGluYXRlcylcbiAgICB0aGlzLmxlZnRSb3RhdGlvbkVtaXR0ZXIuZHJhdyhjb250ZXh0LCBzdGF0ZSwgY29vcmRpbmF0ZXMpXG4gICAgdGhpcy5yaWdodFJvdGF0aW9uRW1pdHRlci5kcmF3KGNvbnRleHQsIHN0YXRlLCBjb29yZGluYXRlcylcbiAgICB0aGlzLmV4cGxvc2lvbkVtaXR0ZXIuZHJhdyhjb250ZXh0LCBzdGF0ZSwgY29vcmRpbmF0ZXMpXG4gICAgLy8gdGhpcy5kZWJ1Z0RyYXcoY29udGV4dCwgc3RhdGUsIGNvb3JkaW5hdGVzKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVidWdEcmF3IChcbiAgICBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgc3RhdGU6IEdsb2JhbFN0YXRlLFxuICAgIGNvb3JkaW5hdGVzOiBDb29yZGluYXRlVHJhbnNsYXRhYmxlXG4gICkge1xuICAgIC8vIERlYnVnIGNvbGxpc2lvblxuICAgIGNvbnRleHQuYmVnaW5QYXRoKClcbiAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyNmZmZmZmYnXG4gICAgbGV0IGNpcmNsZXBvcyA9IGNvb3JkaW5hdGVzLnRyYW5zbGF0ZSh0aGlzLl9wb3NpdGlvbilcbiAgICBjb250ZXh0LmFyYyhcbiAgICAgIGNpcmNsZXBvcy54LFxuICAgICAgY2lyY2xlcG9zLnksXG4gICAgICBjb29yZGluYXRlcy50cmFuc2xhdGUobmV3IFZlY3RvcjIoNCwgMCkpLngsXG4gICAgICAwLFxuICAgICAgTWF0aC5QSSAqIDJcbiAgICApXG4gICAgY29udGV4dC5zdHJva2UoKVxuICAgIGxldCBhZGpQb3MgPSBjb29yZGluYXRlcy50cmFuc2xhdGUodGhpcy5fcG9zaXRpb24pXG5cbiAgICAvLyBEZWJ1ZyByb3RhdGlvblxuICAgIGxldCBhZGpWZWMgPSBjb29yZGluYXRlcy50cmFuc2xhdGUodGhpcy5fcm90YXRpb25WZWN0b3Iuc2NhbGUoNSkpXG4gICAgY29udGV4dC5iZWdpblBhdGgoKVxuICAgIGlmICh0aGlzLl9yb3RhdGlvbiAlIDM2MCA8IDUgJiYgdGhpcy5fcm90YXRpb24gJSAzNjAgPiAtNSkge1xuICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9ICcjMDBmZjAwJ1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyNmZjAwMDAnXG4gICAgfVxuICAgIGNvbnRleHQubGluZVRvKGFkalBvcy54LCBhZGpQb3MueSlcbiAgICBjb250ZXh0LmxpbmVUbyhhZGpQb3MueCArIGFkalZlYy54LCBhZGpQb3MueSArIGFkalZlYy55KVxuICAgIGNvbnRleHQuc3Ryb2tlKClcblxuICAgIC8vIERlYnVnIHZlbG9jaXR5XG4gICAgbGV0IHZlbG9jaXR5ID0gY29vcmRpbmF0ZXMudHJhbnNsYXRlKHRoaXMuX3ZlbG9jaXR5Lm5vcm1hbGl6ZSgpLnNjYWxlKDUpKVxuICAgIGNvbnRleHQuYmVnaW5QYXRoKClcbiAgICBpZiAodGhpcy5fdmVsb2NpdHkuc3FyTWFnbml0dWRlKCkgPCA0KSB7XG4gICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyMwMDAwZmYnXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnI2ZmMDAwMCdcbiAgICB9XG4gICAgY29udGV4dC5saW5lVG8oYWRqUG9zLngsIGFkalBvcy55KVxuICAgIGNvbnRleHQubGluZVRvKGFkalBvcy54ICsgdmVsb2NpdHkueCwgYWRqUG9zLnkgKyB2ZWxvY2l0eS55KVxuICAgIGNvbnRleHQuc3Ryb2tlKClcbiAgfVxuXG4gIHBvc2l0aW9uRW1pdHRlcnMgKCk6IHZvaWQge1xuICAgIHRoaXMudGhydXN0RW1pdHRlci5wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChcbiAgICAgIHRoaXMuX3JvdGF0aW9uVmVjdG9yLnNjYWxlKC0xLjUpXG4gICAgKVxuICAgIHRoaXMubGVmdFJvdGF0aW9uRW1pdHRlci5wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZChcbiAgICAgIHRoaXMuX3JvdGF0aW9uVmVjdG9yLnJvdGF0ZSg3MCkuc2NhbGUoLTEuNzUpXG4gICAgKVxuICAgIHRoaXMucmlnaHRSb3RhdGlvbkVtaXR0ZXIucG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbi5hZGQoXG4gICAgICB0aGlzLl9yb3RhdGlvblZlY3Rvci5yb3RhdGUoLTcwKS5zY2FsZSgtMS43NSlcbiAgICApXG4gICAgdGhpcy5leHBsb3Npb25FbWl0dGVyLnBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb25cbiAgfVxuXG4gIHVwZGF0ZSAoZGVsdGE6IG51bWJlciwgc3RhdGU6IEdsb2JhbFN0YXRlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2lzRXhwbG9kaW5nKSB7XG4gICAgICBjb25zb2xlLmxvZygnRXhwbG9zaW9uJylcbiAgICAgIHRoaXMuX2V4cGxvc2lvbkNvdW50KytcbiAgICB9XG4gICAgaWYgKHRoaXMuX2V4cGxvc2lvbkNvdW50ID4gNSkge1xuICAgICAgdGhpcy5faXNFeHBsb2RpbmcgPSBmYWxzZVxuICAgICAgdGhpcy5fZXhwbG9zaW9uQ291bnQgPSAwXG4gICAgfVxuICAgIHRoaXMudGhydXN0RW1pdHRlci51cGRhdGUoZGVsdGEsIHN0YXRlKVxuICAgIHRoaXMubGVmdFJvdGF0aW9uRW1pdHRlci51cGRhdGUoZGVsdGEsIHN0YXRlKVxuICAgIHRoaXMucmlnaHRSb3RhdGlvbkVtaXR0ZXIudXBkYXRlKGRlbHRhLCBzdGF0ZSlcbiAgICB0aGlzLmV4cGxvc2lvbkVtaXR0ZXIudXBkYXRlKGRlbHRhLCBzdGF0ZSlcbiAgICBpZiAoIXRoaXMuZnJvemVuKSB7XG4gICAgICBpZiAodGhpcy50dXJuaW5nTGVmdCAmJiB0aGlzLmZ1ZWwgPiAwKSB7XG4gICAgICAgIHRoaXMucm90YXRlKGRlbHRhLCBzdGF0ZSwgLTEpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy50dXJuaW5nUmlnaHQgJiYgdGhpcy5mdWVsID4gMCkge1xuICAgICAgICB0aGlzLnJvdGF0ZShkZWx0YSwgc3RhdGUsIDEpXG4gICAgICB9XG4gICAgICB0aGlzLl92ZWxvY2l0eSA9IHRoaXMuX3ZlbG9jaXR5LmFkZChzdGF0ZS5jb25maWcuZ3Jhdml0eS5zY2FsZShkZWx0YSkpXG4gICAgICBpZiAodGhpcy50aHJ1c3RpbmcgJiYgdGhpcy5mdWVsID4gMCkge1xuICAgICAgICB0aGlzLl92ZWxvY2l0eSA9IHRoaXMuX3ZlbG9jaXR5LmFkZChcbiAgICAgICAgICB0aGlzLl9yb3RhdGlvblZlY3Rvci5zY2FsZShkZWx0YSAqIHN0YXRlLmNvbmZpZy50aHJ1c3RDb2VmZmljaWVudClcbiAgICAgICAgKVxuICAgICAgICB0aGlzLmZ1ZWwgLT0gc3RhdGUuY29uZmlnLmZ1ZWxDb25zdW1wdGlvbiAqIGRlbHRhXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5mdWVsIDwgMCkge1xuICAgICAgICB0aGlzLmZ1ZWwgPSAwXG4gICAgICAgIHN0YXRlLmNvbW1hbmRzLmV4ZWN1dGUoJ2Z1ZWxFeHBpcmVkJywgc3RhdGUpXG4gICAgICB9XG4gICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLmFkZCh0aGlzLl92ZWxvY2l0eS5zY2FsZShkZWx0YSkpXG4gICAgICB0aGlzLnBvc2l0aW9uRW1pdHRlcnMoKVxuICAgICAgLy8gdGhpcy50aHJ1c3RFbWl0dGVyLnVwZGF0ZShkZWx0YSwgc3RhdGUpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0ZS50ZXJyYWluLnBvaW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlzQ29sbGlkaW5nKFxuICAgICAgICAgICAgbmV3IENpcmNsZSh0aGlzLl9wb3NpdGlvbiwgMiksXG4gICAgICAgICAgICBzdGF0ZS50ZXJyYWluLnBvaW50c1tpXSxcbiAgICAgICAgICAgIHN0YXRlLnRlcnJhaW4ucG9pbnRzW2kgKyAxXVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0eS5zcXJNYWduaXR1ZGUoKSA8PSA0ICYmXG4gICAgICAgICAgICAodGhpcy5yb3RhdGlvbiA8IDUgfHwgdGhpcy5yb3RhdGlvbiA+IDM1NSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3RhdGUuc2FmZVpvbmVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBzdGF0ZS50ZXJyYWluLnBvaW50c1tpXSA9PSBzdGF0ZS5zYWZlWm9uZXNbal1bMF0gJiZcbiAgICAgICAgICAgICAgICBzdGF0ZS50ZXJyYWluLnBvaW50c1tpICsgMV0gPT0gc3RhdGUuc2FmZVpvbmVzW2pdWzFdXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHN0YXRlLmNvbW1hbmRzLmV4ZWN1dGUoJ3NhZmVMYW5kaW5nJywgc3RhdGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc3RhdGUuY29tbWFuZHMuZXhlY3V0ZSgnY3Jhc2hMYW5kaW5nJywgc3RhdGUpXG4gICAgICAgICAgdGhpcy5faXNFeHBsb2RpbmcgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnBvc2l0aW9uLnggPiBzdGF0ZS5jb25maWcud29ybGRTaXplLnggKyAxMCB8fFxuICAgICAgICB0aGlzLnBvc2l0aW9uLnggPCAtMTAgfHxcbiAgICAgICAgdGhpcy5wb3NpdGlvbi55ID4gc3RhdGUuY29uZmlnLndvcmxkU2l6ZS55ICsgMTBcbiAgICAgICkge1xuICAgICAgICBzdGF0ZS5jb21tYW5kcy5leGVjdXRlKCdjcmFzaExhbmRpbmcnLCBzdGF0ZSlcbiAgICAgICAgdGhpcy5faXNFeHBsb2RpbmcgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByb3RhdGUgKGRlbHRhOiBudW1iZXIsIHN0YXRlOiBHbG9iYWxTdGF0ZSwgZGlyZWN0aW9uOiBudW1iZXIpIHtcbiAgICB0aGlzLmZ1ZWwgLT0gc3RhdGUuY29uZmlnLmZ1ZWxDb25zdW1wdGlvbiAqIGRlbHRhICogMC41XG4gICAgdGhpcy5fcm90YXRpb24gKz0gZGlyZWN0aW9uICogc3RhdGUuY29uZmlnLnRoZXRhICogZGVsdGFcbiAgICB0aGlzLl9yb3RhdGlvblZlY3RvciA9IHRoaXMuX3JvdGF0aW9uVmVjdG9yLnJvdGF0ZShcbiAgICAgIGRpcmVjdGlvbiAqIHN0YXRlLmNvbmZpZy50aGV0YSAqIGRlbHRhXG4gICAgKVxuICB9XG5cbiAgZ2V0IHZlbG9jaXR5ICgpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5fdmVsb2NpdHlcbiAgfVxuXG4gIGdldCByb3RhdGlvbiAoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKCh0aGlzLl9yb3RhdGlvbiAlIDM2MCkgKyAzNjApICUgMzYwXG4gIH1cblxuICBnZXQgcm90YXRpb25WZWN0b3IgKCk6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLl9yb3RhdGlvblZlY3RvclxuICB9XG5cbiAgZ2V0IHBvc2l0aW9uICgpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb25cbiAgfVxuXG4gIHB1YmxpYyBmcmVlemUgKCkge1xuICAgIHRoaXMuZnJvemVuID0gdHJ1ZVxuICAgIHRoaXMuX3ZlbG9jaXR5ID0gVmVjdG9yMi5aRVJPXG4gIH1cbn1cbiIsImltcG9ydCB7IENvbW1hbmRTZXJ2aWNlIH0gZnJvbSBcIi4vY29tbWFuZFwiO1xuXG5pbnRlcmZhY2UgTW9kaWZpZXJzIHtcbiAgYWx0OiBib29sZWFuO1xuICBzaGlmdDogYm9vbGVhbjtcbiAgY3RybDogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIEtleVJlc3BvbnNlIHtcbiAgKHByZXNzZWQ6IGJvb2xlYW4sIHRpbWVEZWx0YTogbnVtYmVyLCBtb2RpZmllcnM6IE1vZGlmaWVycyk6IHZvaWQ7XG59XG5cbmNsYXNzIEtleUhhbmRsZXIge1xuICBwcml2YXRlIF93YXNQcmVzc2VkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2xhc3RQcmVzc2VkOiBudW1iZXIgPSBEYXRlLm5vdygpO1xuICBwcml2YXRlIF9vblN0YXRlQ2hhbmdlZDogU2V0PEtleVJlc3BvbnNlPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBfb25LZXlVcDogU2V0PEtleVJlc3BvbnNlPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBfb25LZXlEb3duOiBTZXQ8S2V5UmVzcG9uc2U+ID0gbmV3IFNldCgpO1xuXG4gIHVwZGF0ZShwcmVzc2VkOiBib29sZWFuLCBtb2RpZmllcnM6IE1vZGlmaWVycykge1xuICAgIGlmICh0aGlzLl93YXNQcmVzc2VkICE9IHByZXNzZWQpIHtcbiAgICAgIC8vIEluaXQgc2V0XG4gICAgICBsZXQgc2V0O1xuICAgICAgaWYgKHByZXNzZWQpIHtcbiAgICAgICAgc2V0ID0gdGhpcy5fb25LZXlEb3duO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0ID0gdGhpcy5fb25LZXlVcDtcbiAgICAgIH1cblxuICAgICAgLy8gVGltZSBkZWx0YVxuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgICAgLy8gSGFuZGxlcnNcbiAgICAgIGZvciAobGV0IHJlcyBvZiBzZXQpIHtcbiAgICAgICAgcmVzKHByZXNzZWQsIG5vdyAtIHRoaXMuX2xhc3RQcmVzc2VkLCBtb2RpZmllcnMpO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgcmVzIG9mIHRoaXMuX29uU3RhdGVDaGFuZ2VkKSB7XG4gICAgICAgIHJlcyhwcmVzc2VkLCBub3cgLSB0aGlzLl9sYXN0UHJlc3NlZCwgbW9kaWZpZXJzKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlc1xuICAgICAgdGhpcy5fbGFzdFByZXNzZWQgPSBub3c7XG4gICAgICB0aGlzLl93YXNQcmVzc2VkID0gIXRoaXMuX3dhc1ByZXNzZWQ7XG4gICAgfVxuICB9XG5cbiAgYWRkVXAoYWN0aW9uOiBLZXlSZXNwb25zZSkge1xuICAgIHRoaXMuX29uS2V5VXAuYWRkKGFjdGlvbik7XG4gIH1cbiAgYWRkRG93bihhY3Rpb246IEtleVJlc3BvbnNlKSB7XG4gICAgdGhpcy5fb25LZXlEb3duLmFkZChhY3Rpb24pO1xuICB9XG4gIGFkZENoYW5nZWQoYWN0aW9uOiBLZXlSZXNwb25zZSkge1xuICAgIHRoaXMuX29uU3RhdGVDaGFuZ2VkLmFkZChhY3Rpb24pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBLZXlNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBoYW5kbGVyczogTWFwPHN0cmluZywgS2V5SGFuZGxlcj47XG4gIHByaXZhdGUgZGVzY3JpcHRpb25zOiBNYXA8c3RyaW5nLCBzdHJpbmc+O1xuICBwdWJsaWMgcmVnaXN0ZXJIYW5kbGVyKGtleUNvZGU6IHN0cmluZywgZGVzY3JpcHRpb24/OiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMuaGFuZGxlcnMuaGFzKGtleUNvZGUpKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzLnNldChrZXlDb2RlLCBuZXcgS2V5SGFuZGxlcigpKTtcbiAgICAgIHRoaXMuZGVzY3JpcHRpb25zPy5zZXQoa2V5Q29kZSwgZGVzY3JpcHRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oYEtleSBoYW5kbGVyIHJlZ2lzdGVyZWQgdHdpY2UgZm9yIGtleUNvZGUgJHtrZXlDb2RlfWApO1xuICAgIH1cbiAgfVxuICBiaW5kVXAoa2V5Q29kZTogc3RyaW5nLCB1cGRhdGVGbjogS2V5UmVzcG9uc2UpIHtcbiAgICB0aGlzLmhhbmRsZXJzLmdldChrZXlDb2RlKS5hZGRVcCh1cGRhdGVGbik7XG4gIH1cbiAgYmluZERvd24oa2V5Q29kZTogc3RyaW5nLCB1cGRhdGVGbjogS2V5UmVzcG9uc2UpIHtcbiAgICB0aGlzLmhhbmRsZXJzLmdldChrZXlDb2RlKS5hZGREb3duKHVwZGF0ZUZuKTtcbiAgfVxuICBiaW5kQ2hhbmdlZChrZXlDb2RlOiBzdHJpbmcsIHVwZGF0ZUZuOiBLZXlSZXNwb25zZSkge1xuICAgIHRoaXMuaGFuZGxlcnMuZ2V0KGtleUNvZGUpLmFkZENoYW5nZWQodXBkYXRlRm4pO1xuICB9XG4gIHVwZGF0ZURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAodGhpcy5oYW5kbGVycy5oYXMoZXZlbnQua2V5KSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudC5rZXkpO1xuICAgICAgaGFuZGxlci51cGRhdGUodHJ1ZSwge1xuICAgICAgICBhbHQ6IGV2ZW50LmFsdEtleSxcbiAgICAgICAgc2hpZnQ6IGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICBjdHJsOiBldmVudC5jdHJsS2V5LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlVXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAodGhpcy5oYW5kbGVycy5oYXMoZXZlbnQua2V5KSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudC5rZXkpO1xuICAgICAgaGFuZGxlci51cGRhdGUoZmFsc2UsIHtcbiAgICAgICAgYWx0OiBldmVudC5hbHRLZXksXG4gICAgICAgIHNoaWZ0OiBldmVudC5zaGlmdEtleSxcbiAgICAgICAgY3RybDogZXZlbnQuY3RybEtleSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBjbGVhcigpIHtcbiAgICB0aGlzLmhhbmRsZXJzID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgcmVtb3ZlKGtleWNvZGU6IHN0cmluZykge1xuICAgIHRoaXMuaGFuZGxlcnMuZGVsZXRlKGtleWNvZGUpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMudXBkYXRlRG93bi5iaW5kKHRoaXMpKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudXBkYXRlVXAuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5oYW5kbGVycyA9IG5ldyBNYXA8c3RyaW5nLCBLZXlIYW5kbGVyPigpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXBUb0NvbW1hbmRzPFQ+KGtleU1hbmFnZXI6IEtleU1hbmFnZXIsIGNvbW1hbmRzOiBDb21tYW5kU2VydmljZTxUPiwgY29tbWFuZE5hbWU6IHN0cmluZywga2V5TmFtZTogc3RyaW5nLCBzdGF0ZTogVCkge1xuICAgIGtleU1hbmFnZXIucmVnaXN0ZXJIYW5kbGVyKGtleU5hbWUsIGNvbW1hbmROYW1lKTtcbiAgICBpZiAoY29tbWFuZHMuaGFzKGBiZWdpbiR7Y29tbWFuZE5hbWV9YCkpIHtcbiAgICAgICAga2V5TWFuYWdlci5iaW5kRG93bihrZXlOYW1lLCAoKSA9PiBjb21tYW5kcy5leGVjdXRlKGBiZWdpbiR7Y29tbWFuZE5hbWV9YCwgc3RhdGUpKTtcbiAgICB9XG4gICAgaWYgKGNvbW1hbmRzLmhhcyhgZW5kJHtjb21tYW5kTmFtZX1gKSkge1xuICAgICAgICBrZXlNYW5hZ2VyLmJpbmRVcChrZXlOYW1lLCAoKSA9PiBjb21tYW5kcy5leGVjdXRlKGBlbmQke2NvbW1hbmROYW1lfWAsIHN0YXRlKSk7XG4gICAgfVxuICAgIGlmIChjb21tYW5kcy5oYXMoYHRvZ2dsZSR7Y29tbWFuZE5hbWV9YCkpIHtcbiAgICAgICAga2V5TWFuYWdlci5iaW5kQ2hhbmdlZChrZXlOYW1lLCAoKSA9PiBjb21tYW5kcy5leGVjdXRlKGB0b2dnbGUke2NvbW1hbmROYW1lfWAsIHN0YXRlKSk7XG4gICAgfVxufSIsImludGVyZmFjZSBDb21tYW5kUnVubmFibGU8VD4ge1xuICAoc3RhdGU6IFQpOiB2b2lkO1xufVxuXG5jbGFzcyBDb21tYW5kPFQ+IHtcbiAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xuICBwcml2YXRlIF9hY3Rpb246IENvbW1hbmRSdW5uYWJsZTxUPjtcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBhY3Rpb246IENvbW1hbmRSdW5uYWJsZTxUPikge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2FjdGlvbiA9IGFjdGlvbjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICB9XG5cbiAgcHVibGljIGludm9rZShzdGF0ZTogVCk6IHZvaWQge1xuICAgIHRoaXMuX2FjdGlvbihzdGF0ZSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvbW1hbmRTZXJ2aWNlPFQ+IHtcbiAgcHJpdmF0ZSBjb21tYW5kczogTWFwPHN0cmluZywgQ29tbWFuZDxUPj47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb21tYW5kcyA9IG5ldyBNYXA8c3RyaW5nLCBDb21tYW5kPFQ+PigpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZUNvbW1hbmQobmFtZTogc3RyaW5nLCBhY3Rpb246IENvbW1hbmRSdW5uYWJsZTxUPik6IHZvaWQge1xuICAgIHRoaXMuY29tbWFuZHMuc2V0KG5hbWUsIG5ldyBDb21tYW5kKG5hbWUsIGFjdGlvbikpO1xuICB9XG5cbiAgcHVibGljIGhhcyhuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbW1hbmRzLmhhcyhuYW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBleGVjdXRlKG5hbWU6IHN0cmluZywgc3RhdGU6IFQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb21tYW5kcy5oYXMobmFtZSkpIHtcbiAgICAgIHRoaXMuY29tbWFuZHMuZ2V0KG5hbWUpLmludm9rZShzdGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihgQXR0ZW1wdGluZyB0byBpbnZva2Ugbm9uLWV4aXN0ZW50IGNvbW1hbmQgJHtuYW1lfWApO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4vdmVjdG9yMlwiO1xuaW1wb3J0IHsgcmFuZG9tIH0gZnJvbSBcIi4vcmFuZG9tXCI7XG5pbXBvcnQgeyBDb29yZGluYXRlVHJhbnNsYXRhYmxlIH0gZnJvbSBcIi4vY29vcmRpbmF0ZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZHJhd1RlcnJhaW4oXG4gIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICB0ZXJyYWluOiBUZXJyYWluLFxuICB2Y3M6IENvb3JkaW5hdGVUcmFuc2xhdGFibGUsXG4gIGNvbnN0cmFpbnQ6IFZlY3RvcjJcbikge1xuICBjdHguYmVnaW5QYXRoKCk7XG4gIGN0eC5saW5lVG8odmNzLnRyYW5zbGF0ZVZhbHVlWCgwKSwgdmNzLnRyYW5zbGF0ZVZhbHVlWShjb25zdHJhaW50LnkpKTtcblxuICB2YXIgZ3JkID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDAsIDEwMDApO1xuICBncmQuYWRkQ29sb3JTdG9wKDAsIFwiIzk5OTk5OVwiKTtcbiAgZ3JkLmFkZENvbG9yU3RvcCgxLCBcIiNjY2NjY2NcIik7XG4gIGN0eC5maWxsU3R5bGUgPSBncmQ7XG5cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCB0ZXJyYWluLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBwdCA9IHZjcy50cmFuc2xhdGUodGVycmFpbi5wb2ludHNbaV0pO1xuICAgIGN0eC5saW5lVG8ocHQueCwgcHQueSk7XG4gIH1cbiAgY3R4LmxpbmVUbyh2Y3MudHJhbnNsYXRlVmFsdWVYKGNvbnN0cmFpbnQueCksIHZjcy50cmFuc2xhdGVWYWx1ZVkoY29uc3RyYWludC55KSk7XG4gIGN0eC5maWxsU3R5bGUgPSBcIiNmZmZmZmZcIjtcbiAgY3R4LmZpbGwoKTtcbn1cblxuZXhwb3J0IGNsYXNzIFRlcnJhaW4ge1xuICBwb2ludHM6IEFycmF5PFZlY3RvcjI+O1xuICBjb25zdHJ1Y3RvcihpdGVyYXRpb25zOiBudW1iZXIsIHJvdWdobmVzczogbnVtYmVyLCBwMTogVmVjdG9yMiwgcDI6IFZlY3RvcjIpIHtcbiAgICB0aGlzLnBvaW50cyA9IFtwMSwgcDJdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICBsZXQgc2F2ZWRMZW5ndGggPSB0aGlzLnBvaW50cy5sZW5ndGg7XG4gICAgICByb3VnaG5lc3MgLz0gMjtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2F2ZWRMZW5ndGggLSAxOyBqKyspIHtcbiAgICAgICAgbGV0IG1pZCA9IG5ldyBWZWN0b3IyKFxuICAgICAgICAgICh0aGlzLnBvaW50c1tqICogMl0ueCArIHRoaXMucG9pbnRzW2ogKiAyICsgMV0ueCkgLyAyLFxuICAgICAgICAgICh0aGlzLnBvaW50c1tqICogMl0ueSArIHRoaXMucG9pbnRzW2ogKiAyICsgMV0ueSkgLyAyXG4gICAgICAgICk7XG4gICAgICAgIG1pZCA9IG1pZC5hZGQobmV3IFZlY3RvcjIoMCwgcmFuZG9tLmdhdXNzaWFuKDEyKSAqIHJvdWdobmVzcykpO1xuICAgICAgICB0aGlzLnBvaW50cy5zcGxpY2UoaiAqIDIgKyAxLCAwLCBtaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGluc2VydFNhZmVab25lKG1pblg6IG51bWJlciwgbWF4WDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSB7XG4gICAgbGV0IHRhcmdldFhNaW4gPSBtaW5YICsgd2lkdGggLyAyO1xuICAgIGxldCB0YXJnZXRYTWF4ID0gbWF4WCAtIHdpZHRoIC8gMjtcbiAgICBsZXQgZGlmZiA9IHRhcmdldFhNYXggLSB0YXJnZXRYTWluO1xuICAgIGxldCBvZmZzZXQgPSB0YXJnZXRYTWluICsgZGlmZiAqIE1hdGgucmFuZG9tKCk7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBwb2ludCA9IHRoaXMucG9pbnRzWzBdO1xuICAgIHdoaWxlIChwb2ludC54IDwgb2Zmc2V0KSB7XG4gICAgICBwb2ludCA9IHRoaXMucG9pbnRzWysraV07XG4gICAgfVxuICAgIGxldCBzYXZlZCA9IHBvaW50O1xuICAgIGkrKztcbiAgICBwb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuICAgIGxldCB4ID0gMDtcbiAgICB3aGlsZSAocG9pbnQueCA8IG9mZnNldCArIHdpZHRoKSB7XG4gICAgICB4ID0gcG9pbnQueDtcbiAgICAgIHRoaXMucG9pbnRzLnNwbGljZShpLCAxKTtcbiAgICAgIHBvaW50ID0gdGhpcy5wb2ludHNbaV07XG4gICAgfVxuICAgIHRoaXMucG9pbnRzW2ldID0gbmV3IFZlY3RvcjIoeCwgc2F2ZWQueSk7XG4gICAgcmV0dXJuIFtzYXZlZCwgdGhpcy5wb2ludHNbaV1dO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgU291bmRFZmZlY3Qge1xuICAgIHByaXZhdGUgZWw6IEhUTUxBdWRpb0VsZW1lbnQ7XG4gICAgcHJpdmF0ZSByZWFkeSA9IGZhbHNlO1xuICAgIHByaXZhdGUgY29udGludWUgPSBmYWxzZTtcbiAgICBwcml2YXRlIGxvb3AgPSBmYWxzZTtcbiAgICBwcml2YXRlIF9wbGF5aW5nID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBjdXRvZmYgPSAwO1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZTogc3RyaW5nLCBjdXRvZmY/OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbCA9IG5ldyBBdWRpbyhzb3VyY2UpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjdXRvZmYpIHtcbiAgICAgICAgICAgIHRoaXMubG9vcCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmN1dG9mZiA9IGN1dG9mZjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBsYXkoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZWwucGxheSgpO1xuICAgICAgICB0aGlzLmNvbnRpbnVlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcGxheWluZyA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmxvb3ApIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge2lmKCF0aGlzLmNvbnRpbnVlKSByZXR1cm47IHRoaXMuZWwuY3VycmVudFRpbWUgPSAwOyB0aGlzLnBsYXlSZWMoKX0sIHRoaXMuY3V0b2ZmICogMTAwMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX3BsYXlpbmcgPSBmYWxzZSwgdGhpcy5lbC5kdXJhdGlvbiAqIDEwMDApXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwbGF5UmVjKCk6IHZvaWQge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtpZighdGhpcy5jb250aW51ZSkgcmV0dXJuOyB0aGlzLmVsLmN1cnJlbnRUaW1lID0gMDsgdGhpcy5wbGF5UmVjKCl9LCB0aGlzLmN1dG9mZiAqIDEwMDApO1xuICAgIH1cblxuICAgIHN0b3AoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZWwucGF1c2UoKTtcbiAgICAgICAgdGhpcy5jb250aW51ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZWwuY3VycmVudFRpbWUgPSAwO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgcGxheWluZygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXlpbmc7XG4gICAgfVxufSIsImltcG9ydCBWZWN0b3IyIGZyb20gJy4vdmVjdG9yMidcbmltcG9ydCB7IGRyYXdUZXh0dXJlLCBUZXh0dXJlIH0gZnJvbSAnLi90ZXh0dXJlJ1xuaW1wb3J0IERyYXdhYmxlIGZyb20gJy4vZHJhd2FibGUnXG5pbXBvcnQgVGlja2luZyBmcm9tICcuL3RpY2tpbmcnXG5pbXBvcnQgeyBWaXJ0dWFsQ29vcmRpbmF0ZVN5c3RlbSB9IGZyb20gJy4vY29vcmRpbmF0ZSdcbmltcG9ydCB7IEdsb2JhbFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSdcbmltcG9ydCB7IExhbmRlciB9IGZyb20gJy4vbGFuZGVyJ1xuaW1wb3J0IHsgS2V5TWFuYWdlciwgbWFwVG9Db21tYW5kcyB9IGZyb20gJy4va2V5J1xuaW1wb3J0IHsgQ29tbWFuZFNlcnZpY2UgfSBmcm9tICcuL2NvbW1hbmQnXG5pbXBvcnQgeyBkcmF3VGVycmFpbiwgVGVycmFpbiB9IGZyb20gJy4vdGVycmFpbidcbmltcG9ydCB7IENvbmRpdGlvbmFsRHJhd2FibGUgfSBmcm9tICcuL2NvbmRpdGlvbmFsRHJhd2FibGUnXG5pbXBvcnQgeyBTb3VuZEVmZmVjdCB9IGZyb20gJy4vc291bmQnXG5cbi8vIEdlbmVyYWwgU2V0dXBcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudFxuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG5jb25zdCB3b3JsZFNpemUgPSBuZXcgVmVjdG9yMigxMzAsIDEwMCk7XG5jb25zdCBsYW5kZXJUZXh0dXJlID0gbmV3IFRleHR1cmUoJ2Fzc2V0cy9MYW5kZXIucG5nJywgbmV3IFZlY3RvcjIoNTAwLCA1MDApKVxuXG4vLyBWaXJ0dWFsIFNpemluZ1xubGV0IG1heENvb3JkID0gTWF0aC5taW4od2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodClcbiAgaWYgKG1heENvb3JkID09IHdpbmRvdy5pbm5lcldpZHRoKSB7XG4gICAgY2FudmFzLndpZHRoID0gbWF4Q29vcmRcbiAgICBjYW52YXMuaGVpZ2h0ID0gbWF4Q29vcmQgKiAoMy80KVxuICB9XG4gIGVsc2Uge1xuICAgIGNhbnZhcy53aWR0aCA9IG1heENvb3JkICogNC8zXG4gICAgY2FudmFzLmhlaWdodCA9IG1heENvb3JkXG4gIH1cblxuICBsZXQgdmNzID0gbmV3IFZpcnR1YWxDb29yZGluYXRlU3lzdGVtKFxuICAgIGNhbnZhcy53aWR0aCAvIHdvcmxkU2l6ZS54LFxuICAgIGNhbnZhcy5oZWlnaHQgLyB3b3JsZFNpemUueVxuICApXG5cbi8vIFJlc2l6ZVxuZnVuY3Rpb24gcmVzaXplICgpIHtcbiAgbWF4Q29vcmQgPSBNYXRoLm1pbih3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KVxuXG4gIGlmIChtYXhDb29yZCA9PSB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgIGNhbnZhcy53aWR0aCA9IG1heENvb3JkXG4gICAgY2FudmFzLmhlaWdodCA9IG1heENvb3JkICogKDMvNClcbiAgfVxuICBlbHNlIHtcbiAgICBjYW52YXMud2lkdGggPSBtYXhDb29yZCAqIDQvM1xuICAgIGNhbnZhcy5oZWlnaHQgPSBtYXhDb29yZFxuICB9XG5cbiAgdmNzID0gbmV3IFZpcnR1YWxDb29yZGluYXRlU3lzdGVtKFxuICAgIGNhbnZhcy53aWR0aCAvIHdvcmxkU2l6ZS54LFxuICAgIGNhbnZhcy5oZWlnaHQgLyB3b3JsZFNpemUueVxuICApXG4gIGNvbnNvbGUubG9nKGBSZXNpemluZyB0byAke21heENvb3JkfXB4LmApXG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemUpO1xuXG5jb25zdCBkcmF3YWJsZXMgPSBuZXcgQXJyYXk8RHJhd2FibGU8R2xvYmFsU3RhdGU+PigpXG5jb25zdCB0aWNraW5nID0gbmV3IEFycmF5PFRpY2tpbmc8R2xvYmFsU3RhdGU+PigpXG5cbmxldCBmdWVsUG9zaXRpb24gPSBuZXcgVmVjdG9yMig1LCA1KVxubGV0IGFuZ2xlUG9zaXRpb24gPSBuZXcgVmVjdG9yMig1LCA3LjUpXG5sZXQgdmVsb2NpdHlQb3NpdGlvbiA9IG5ldyBWZWN0b3IyKDUsIDEwKVxuXG4vLyBHYW1lIGxvb3BcbmxldCBsYXN0VGltZTogbnVtYmVyID0gMFxuZnVuY3Rpb24gbG9vcCAoZ2xvYmFsU3RhdGU6IEdsb2JhbFN0YXRlKSA6IEZyYW1lUmVxdWVzdENhbGxiYWNrIHtcbiAgICBsZXQgZm4gPSBmdW5jdGlvbihjdXJyZW50VGltZTogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gY3VycmVudFRpbWUgLSBsYXN0VGltZVxuICAgICAgICBsYXN0VGltZSA9IGN1cnJlbnRUaW1lXG5cbiAgICAgICAgdXBkYXRlKGRlbHRhIC8gMTAwMCwgZ2xvYmFsU3RhdGUpXG4gICAgICAgIGRyYXcoZ2xvYmFsU3RhdGUpXG5cbiAgICAgICAgaWYgKGdsb2JhbFN0YXRlLnJ1bm5pbmcpIHtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZuXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZSAoZGVsdGE6IG51bWJlciwgZ2xvYmFsU3RhdGU6IEdsb2JhbFN0YXRlKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGlja2luZy5sZW5ndGg7IGkrKykge1xuICAgIHRpY2tpbmdbaV0udXBkYXRlKGRlbHRhLCBnbG9iYWxTdGF0ZSlcbiAgfVxufVxuZnVuY3Rpb24gZHJhdyAoZ2xvYmFsU3RhdGU6IEdsb2JhbFN0YXRlKSB7XG4gIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gIGRyYXdUZXJyYWluKGNvbnRleHQsIGdsb2JhbFN0YXRlLnRlcnJhaW4sIHZjcywgd29ybGRTaXplKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkcmF3YWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICBkcmF3YWJsZXNbaV0uZHJhdyhjb250ZXh0LCBnbG9iYWxTdGF0ZSwgdmNzKTtcbiAgfVxuICBkcmF3VGV4dChjb250ZXh0LCBnbG9iYWxTdGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGRyYXdUZXh0IChjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGdsb2JhbFN0YXRlOiBHbG9iYWxTdGF0ZSkge1xuICBsZXQgZm9udFNpemUgPSB2Y3MudHJhbnNsYXRlVmFsdWVYKDIpXG4gIGNvbnRleHQuZm9udCA9IGAke2ZvbnRTaXplfXB4IEFyaWFsYFxuXG4gIC8vIEZ1ZWxcbiAgbGV0IGZ1ZWwgPSBnbG9iYWxTdGF0ZS5sYW5kZXIuZnVlbFxuICBpZiAoZnVlbCA+IDApIHtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICcjMDBmZjAwJ1xuICB9IGVsc2Uge1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJyNmZmZmZmYnXG4gIH1cbiAgbGV0IGFkanVzdGVkRnVlbFBvc2l0aW9uID0gdmNzLnRyYW5zbGF0ZShmdWVsUG9zaXRpb24pXG4gIGNvbnRleHQuZmlsbFRleHQoXG4gICAgYEZ1ZWw6ICR7ZnVlbC50b0ZpeGVkKDIpfUxgLFxuICAgIGFkanVzdGVkRnVlbFBvc2l0aW9uLngsXG4gICAgYWRqdXN0ZWRGdWVsUG9zaXRpb24ueVxuICApXG5cbiAgLy8gQW5nbGVcbiAgbGV0IGFuZ2xlID0gZ2xvYmFsU3RhdGUubGFuZGVyLnJvdGF0aW9uXG4gIGlmIChhbmdsZSA8IDUgfHwgYW5nbGUgPiAzNTUpIHtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICcjMDBmZjAwJ1xuICB9IGVsc2Uge1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJyNmZmZmZmYnXG4gIH1cbiAgbGV0IGFkanVzdGVkQW5nbGVQb3NpdGlvbiA9IHZjcy50cmFuc2xhdGUoYW5nbGVQb3NpdGlvbilcbiAgY29udGV4dC5maWxsVGV4dChcbiAgICBgQW5nbGU6ICR7YW5nbGUudG9GaXhlZCgyKX3CsGAsXG4gICAgYWRqdXN0ZWRBbmdsZVBvc2l0aW9uLngsXG4gICAgYWRqdXN0ZWRBbmdsZVBvc2l0aW9uLnlcbiAgKVxuXG4gIC8vIFZlbG9jaXR5XG4gIGxldCBtYWduID0gZ2xvYmFsU3RhdGUubGFuZGVyLnZlbG9jaXR5Lm1hZ25pdHVkZSgpXG4gIGlmIChtYWduIDwgMikge1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJyMwMGZmMDAnXG4gIH0gZWxzZSB7XG4gICAgY29udGV4dC5maWxsU3R5bGUgPSAnI2ZmZmZmZidcbiAgfVxuICBsZXQgYWRqdXN0ZWRWZWxvY2l0eVBvc2l0aW9uID0gdmNzLnRyYW5zbGF0ZSh2ZWxvY2l0eVBvc2l0aW9uKVxuICBjb250ZXh0LmZpbGxUZXh0KFxuICAgIGBWZWxvY2l0eTogJHttYWduLnRvRml4ZWQoMil9IG0vc2AsXG4gICAgYWRqdXN0ZWRWZWxvY2l0eVBvc2l0aW9uLngsXG4gICAgYWRqdXN0ZWRWZWxvY2l0eVBvc2l0aW9uLnlcbiAgKVxuICBjb250ZXh0LmZpbGxTdHlsZSA9ICcjZmZmZmZmJ1xufVxuXG5mdW5jdGlvbiBidWlsZENvbW1hbmRzIChzdGF0ZTogR2xvYmFsU3RhdGUpOiBDb21tYW5kU2VydmljZTxHbG9iYWxTdGF0ZT4ge1xuICBjb25zdCBjb21tYW5kcyA9IG5ldyBDb21tYW5kU2VydmljZTxHbG9iYWxTdGF0ZT4oKVxuICAvLyBDb21tYW5kIENyZWF0aW9uXG4gIGNvbW1hbmRzLmNyZWF0ZUNvbW1hbmQoJ2JlZ2luVGhydXN0JywgZ2xvYmFsU3RhdGUgPT4ge1xuICAgIGdsb2JhbFN0YXRlLmxhbmRlci50aHJ1c3RpbmcgPSB0cnVlXG4gICAgaWYgKGdsb2JhbFN0YXRlLmxhbmRlci5mdWVsID4gMCkge1xuICAgICAgZ2xvYmFsU3RhdGUuc291bmRzLm1haW5UaHJ1c3Rlci5wbGF5KClcbiAgICB9IGVsc2Uge1xuICAgICAgZ2xvYmFsU3RhdGUuc291bmRzLm5vRnVlbC5wbGF5KClcbiAgICB9XG4gIH0pXG5cbiAgY29tbWFuZHMuY3JlYXRlQ29tbWFuZCgnZW5kVGhydXN0JywgZ2xvYmFsU3RhdGUgPT4ge1xuICAgIGdsb2JhbFN0YXRlLmxhbmRlci50aHJ1c3RpbmcgPSBmYWxzZVxuICAgIGdsb2JhbFN0YXRlLnNvdW5kcy5tYWluVGhydXN0ZXIuc3RvcCgpXG4gICAgZ2xvYmFsU3RhdGUuc291bmRzLm5vRnVlbC5zdG9wKClcbiAgfSlcblxuICBjb21tYW5kcy5jcmVhdGVDb21tYW5kKCdmdWVsRXhwaXJlZCcsIGdsb2JhbFN0YXRlID0+IHtcbiAgICBpZiAoZ2xvYmFsU3RhdGUuc291bmRzLm1haW5UaHJ1c3Rlci5wbGF5aW5nKSB7XG4gICAgICBnbG9iYWxTdGF0ZS5zb3VuZHMubWFpblRocnVzdGVyLnN0b3AoKVxuICAgICAgZ2xvYmFsU3RhdGUuc291bmRzLm5vRnVlbC5wbGF5KClcbiAgICB9XG4gICAgaWYgKGdsb2JhbFN0YXRlLnNvdW5kcy5zdWJUaHJ1c3Rlci5wbGF5aW5nKSB7XG4gICAgICBnbG9iYWxTdGF0ZS5zb3VuZHMuc3ViVGhydXN0ZXIuc3RvcCgpXG4gICAgICBnbG9iYWxTdGF0ZS5zb3VuZHMubm9GdWVsLnBsYXkoKVxuICAgIH1cbiAgfSlcblxuICBjb21tYW5kcy5jcmVhdGVDb21tYW5kKCdiZWdpblR1cm5MZWZ0JywgZ2xvYmFsU3RhdGUgPT4ge1xuICAgIGdsb2JhbFN0YXRlLmxhbmRlci50dXJuaW5nTGVmdCA9IHRydWVcbiAgICBpZiAoZ2xvYmFsU3RhdGUubGFuZGVyLmZ1ZWwgPiAwKSB7XG4gICAgICBnbG9iYWxTdGF0ZS5zb3VuZHMuc3ViVGhydXN0ZXIucGxheSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGdsb2JhbFN0YXRlLnNvdW5kcy5ub0Z1ZWwucGxheSgpXG4gICAgfVxuICB9KVxuXG4gIGNvbW1hbmRzLmNyZWF0ZUNvbW1hbmQoJ2VuZFR1cm5MZWZ0JywgZ2xvYmFsU3RhdGUgPT4ge1xuICAgIGdsb2JhbFN0YXRlLnNvdW5kcy5zdWJUaHJ1c3Rlci5zdG9wKClcbiAgICBnbG9iYWxTdGF0ZS5zb3VuZHMubm9GdWVsLnN0b3AoKVxuICAgIGdsb2JhbFN0YXRlLmxhbmRlci50dXJuaW5nTGVmdCA9IGZhbHNlXG4gIH0pXG5cbiAgY29tbWFuZHMuY3JlYXRlQ29tbWFuZCgnYmVnaW5UdXJuUmlnaHQnLCBnbG9iYWxTdGF0ZSA9PiB7XG4gICAgaWYgKGdsb2JhbFN0YXRlLmxhbmRlci5mdWVsID4gMCkge1xuICAgICAgZ2xvYmFsU3RhdGUuc291bmRzLnN1YlRocnVzdGVyLnBsYXkoKVxuICAgIH0gZWxzZSB7XG4gICAgICBnbG9iYWxTdGF0ZS5zb3VuZHMubm9GdWVsLnBsYXkoKVxuICAgIH1cbiAgICBnbG9iYWxTdGF0ZS5sYW5kZXIudHVybmluZ1JpZ2h0ID0gdHJ1ZVxuICB9KVxuXG4gIGNvbW1hbmRzLmNyZWF0ZUNvbW1hbmQoJ2VuZFR1cm5SaWdodCcsIGdsb2JhbFN0YXRlID0+IHtcbiAgICBnbG9iYWxTdGF0ZS5zb3VuZHMuc3ViVGhydXN0ZXIuc3RvcCgpXG4gICAgZ2xvYmFsU3RhdGUuc291bmRzLm5vRnVlbC5zdG9wKClcbiAgICBnbG9iYWxTdGF0ZS5sYW5kZXIudHVybmluZ1JpZ2h0ID0gZmFsc2VcbiAgfSlcblxuICBjb21tYW5kcy5jcmVhdGVDb21tYW5kKCdzYWZlTGFuZGluZycsIGdsb2JhbFN0YXRlID0+IHtcbiAgICBnbG9iYWxTdGF0ZS5zb3VuZHMubGFuZGluZy5wbGF5KClcbiAgICBnbG9iYWxTdGF0ZS5sYW5kZXIuZnJlZXplKClcbiAgfSlcblxuICBjb21tYW5kcy5jcmVhdGVDb21tYW5kKCdjcmFzaExhbmRpbmcnLCBnbG9iYWxTdGF0ZSA9PiB7XG4gICAgZ2xvYmFsU3RhdGUuc291bmRzLmV4cGxvc2lvbi5wbGF5KClcbiAgICBnbG9iYWxTdGF0ZS5sYW5kZXIuY3Jhc2hlZCA9IHRydWVcbiAgICBnbG9iYWxTdGF0ZS5sYW5kZXIuZnJlZXplKClcbiAgfSlcblxuICByZXR1cm4gY29tbWFuZHM7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkS2V5cyAoc3RhdGU6IEdsb2JhbFN0YXRlKTogS2V5TWFuYWdlciB7XG4gIC8vIERlZmF1bHQgS2V5YmluZGluZ3NcbiAgY29uc3Qga2V5cyA9IG5ldyBLZXlNYW5hZ2VyKClcbiAgbWFwVG9Db21tYW5kcyhrZXlzLCBzdGF0ZS5jb21tYW5kcywgJ1RocnVzdCcsICdBcnJvd1VwJywgc3RhdGUpO1xuICBtYXBUb0NvbW1hbmRzKGtleXMsIHN0YXRlLmNvbW1hbmRzLCAnVHVybkxlZnQnLCAnQXJyb3dMZWZ0Jywgc3RhdGUpO1xuICBtYXBUb0NvbW1hbmRzKGtleXMsIHN0YXRlLmNvbW1hbmRzLCAnVHVyblJpZ2h0JywgJ0Fycm93UmlnaHQnLCBzdGF0ZSk7XG4gIHJldHVybiBrZXlzXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFN0YXRlICgpOiBHbG9iYWxTdGF0ZSB7XG4gIGxldCBnbG9iYWxTdGF0ZTogR2xvYmFsU3RhdGUgPSB7XG4gICAgdGVycmFpbjogdW5kZWZpbmVkLFxuICAgIHJ1bm5pbmc6IHRydWUsXG4gICAgbGFuZGVyOiB1bmRlZmluZWQsXG4gICAgc2FmZVpvbmVzOiB1bmRlZmluZWQsXG4gICAgY29tbWFuZHM6IHVuZGVmaW5lZCxcbiAgICBrZXlzOiB1bmRlZmluZWQsXG4gICAgY29uZmlnOiB7XG4gICAgICBmdWVsQ29uc3VtcHRpb246IDIwLFxuICAgICAgdGhydXN0Q29lZmZpY2llbnQ6IDEwLFxuICAgICAgdGhldGE6IDkwLFxuICAgICAgZ3Jhdml0eTogbmV3IFZlY3RvcjIoMCwgMSksXG4gICAgICB3b3JsZFNpemVcbiAgICB9LFxuICAgIHNvdW5kczoge1xuICAgICAgbWFpblRocnVzdGVyOiBuZXcgU291bmRFZmZlY3QoJ2Fzc2V0cy9tYWludGhydXN0ZXIud2F2JywgNCksXG4gICAgICBzdWJUaHJ1c3RlcjogbmV3IFNvdW5kRWZmZWN0KCdhc3NldHMvc3VidGhydXN0ZXIud2F2JywgNCksXG4gICAgICBleHBsb3Npb246IG5ldyBTb3VuZEVmZmVjdCgnYXNzZXRzL2V4cGxvc2lvbi53YXYnKSxcbiAgICAgIGxhbmRpbmc6IG5ldyBTb3VuZEVmZmVjdCgnYXNzZXRzL2xhbmRpbmcud2F2JyksXG4gICAgICBub0Z1ZWw6IG5ldyBTb3VuZEVmZmVjdCgnYXNzZXRzL25vZnVlbC53YXYnLCAxKVxuICAgIH1cbiAgfVxuICBnbG9iYWxTdGF0ZS5jb21tYW5kcyA9IGJ1aWxkQ29tbWFuZHMoZ2xvYmFsU3RhdGUpXG4gIGdsb2JhbFN0YXRlLmtleXMgPSBidWlsZEtleXMoZ2xvYmFsU3RhdGUpXG4gIHJldHVybiBnbG9iYWxTdGF0ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnQgKGdsb2JhbFN0YXRlOiBHbG9iYWxTdGF0ZSwgZGlmZmljdWx0eTogbnVtYmVyID0gMSkge1xuICBjb25zdCBsYW5kZXIgPSBuZXcgTGFuZGVyKFxuICAgIG5ldyBWZWN0b3IyKHdvcmxkU2l6ZS54IC8gMiwgMCksXG4gICAgbGFuZGVyVGV4dHVyZSxcbiAgICBuZXcgVmVjdG9yMig1LCA1KVxuICApXG4gIGdsb2JhbFN0YXRlLmxhbmRlciA9IGxhbmRlclxuICBkcmF3YWJsZXMucHVzaChsYW5kZXIpXG4gIHRpY2tpbmcucHVzaChsYW5kZXIpXG4gIGNvbnN0IHRlcnJhaW4gPSBuZXcgVGVycmFpbig4LCAxMDAsIG5ldyBWZWN0b3IyKDAsIHdvcmxkU2l6ZS55IC8gMiksIG5ldyBWZWN0b3IyKHdvcmxkU2l6ZS54LCB3b3JsZFNpemUueSAvIDIpKVxuICBjb25zdCBzYWZlWm9uZXM6IEFycmF5PEFycmF5PFZlY3RvcjI+PiA9IFtdXG4gIGNvbnN0IGNvdW50ID0gMyAtIGRpZmZpY3VsdHk7XG4gIGNvbnN0IG1pbiA9IDEwO1xuICBjb25zdCBtYXggPSB3b3JsZFNpemUueCAtIDEwO1xuICBjb25zdCB2YWxpZFBvcnRpb25zID0gKG1heCAtIG1pbikgLyBjb3VudDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgc2FmZVpvbmVzLnB1c2godGVycmFpbi5pbnNlcnRTYWZlWm9uZShtaW4gKyB2YWxpZFBvcnRpb25zICogaSwgbWluICsgdmFsaWRQb3J0aW9ucyAqIChpICsgMSksIGNvdW50ICogNy41KSk7XG4gIH1cblxuICBnbG9iYWxTdGF0ZS50ZXJyYWluID0gdGVycmFpbjtcbiAgZ2xvYmFsU3RhdGUuc2FmZVpvbmVzID0gc2FmZVpvbmVzO1xuXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKGdsb2JhbFN0YXRlKSlcbn1cbiIsImltcG9ydCB7IGJ1aWxkU3RhdGUsIHN0YXJ0IH0gZnJvbSAnLi9nYW1lJztcblxudmFyIGdsb2JhbFN0YXRlID0gYnVpbGRTdGF0ZSgpO1xuc3RhcnQoZ2xvYmFsU3RhdGUsIDEpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==